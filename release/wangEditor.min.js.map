{"version":3,"sources":["wangEditor.js"],"names":["global","factory","exports","module","define","amd","wangEditor","this","createElemByHTML","html","div","document","createElement","innerHTML","children","isDOMList","selector","HTMLCollection","NodeList","querySelectorAll","result","DomElement","nodeType","selectorResult","Array","replace","trim","indexOf","length","i","$","objForEach","obj","fn","key","hasOwnProperty","call","arrForEach","fakeArr","item","getRandom","prefix","Math","random","toString","slice","replaceHtmlSymbol","isFunction","hasClass","element","className","classList","contains","isComponent","test","nodeName","isWysiwygDiv","isFormatElement","_HTMLConvertor","contents","ec","&","Â ","'","<",">","m","convertHTMLForCodeView","indentSize","returnHTML","reg","window","RegExp","brReg","wDoc","createRange","createContextualFragment","join","recursionFunc","indent","lineBR","node","br","nodeRegTest","childNodes","elementRegTest","elementIndent","len","tag","toLowerCase","outerHTML","match","data","Bold","editor","$elem","type","_active","DropList","menu","opt","_this","$container","$title","titleHtml","replaceLang","addClass","append","list","onClick","_emptyFn","$list","forEach","elemHtml","value","$li","on","e","hideTimeoutId","setTimeout","hide","_rendered","_show","Head","droplist","width","_command","FontSize","FontName","config","fontNames","map","fontName","Panel","Link","Italic","Redo","StrikeThrough","Underline","Undo","List","Justify","ForeColor","colors","color","BackColor","Quote","Code","Emoticon","Table","Video","Image","imgMenuId","SoundCode","getInnerHtml","nodes","builder","push","nodeValue","SelectionRange","doc","range","getSelectedHtml","browser","msie","undefined","htmlText","firefox","chrome","cloneContents","pasteHTML","select","deleteContents","insertNode","temp","elems","j","reverse","splice","getSelectionRange","win","selection","parentElement","sel","getSelection","rangeCount","getRangeAt","setNodeStyle","name","style","cn","setStyle","dom","span","textContent","innetHTML","replaceChild","lineHeight","ClearFormat","Iframe","Menus","menus","filterWord","transUnit","v","transUnitToPx","str","height","src","marks","val","a","b","c","tmp","n","s","split","parts","unit","u","parseFloat","round","getPasteText","clipboardData","originalEvent","pasteText","getData","getPasteHtml","filterStyle","ignoreImg","pasteHtml","getPasteImgs","items","getAsFile","getChildrenJSON","curElem","elemResult","attrData","attrList","attributes","attrListLength","attr","attrs","Text","Command","API","_currentRange","Progress","_time","_isShow","_isRender","_timeoutId","$textContainer","$textContainerElem","$bar","UploadImg","Editor","toolbarSelector","textSelector","Error","id","editorId","customConfig","eventList","prototype","constructor","elem","clone","deep","cloneList","cloneNode","get","index","first","last","types","addEventListener","target","matches","off","removeEventListener","getAttribute","setAttribute","arr","filter","removeClass","css","currentStyle","styleArr","resultArr","show","$children","child","appendChild","remove","parent","removeChild","isContain","$child","getSizeData","getBoundingClientRect","getNodeName","find","text","focus","parentUntil","_currentElem","results","equal","insertBefore","$referenceNode","referenceNode","parentNode","insertAfter","lastChild","nextSibling","offAll","emotions","title","content","alt","zIndex","debug","linkCheck","link","linkImgCheck","pasteFilterStyle","pasteIgnoreImg","pasteTextHandle","showLinkImg","linkImgCallback","url","uploadImgMaxSize","uploadImgShowBase64","uploadFileName","uploadImgParams","uploadImgHeaders","withCredentials","uploadImgTimeout","uploadImgHooks","before","xhr","files","success","fail","error","timeout","qiniu","UA","_ua","navigator","userAgent","isWebkit","isIE","isSeleEmpty","isSelectionEmpty","createEmptyRange","cmd","do","collapseRange","restoreSelection","tryChangeActive","queryCommandState","langArgs","clearTimeout","$menuELem","menuHeight","showTimeoutId","$selectionElem","getSelectionContainerElem","$textElem","cmdValue","queryCommandValue","emptyFn","_isCreatedPanelMenus","$body","$closeBtn","$tabTitleContainer","$tabContentContainer","tabs","tabTitleArr","tabContentArr","tab","tabIndex","tpl","$content","_index","stopPropagation","events","event","$inputs","_hideOtherPanels","panel","$linkelem","createRangeByElem","_createPanel","getSelectionText","inputLinkId","inputTextId","btnOkId","btnDelId","delBtnDisplay","$link","$text","_insertLink","_delLink","selectionText","checkResult","alert","$selectionELem","$parent","$targetELem","$startElem","getSelectionStartElem","$endElem","getSelectionEndElem","$code","textId","btnId","_insertCode","_updateCode","$parentElem","tabConfig","emotData","emotType","faceHtml","$target","insertHtml","_insert","emotHtml","_createEditPanel","_createInsertPanel","btnInsertId","textRowNum","textColNum","rowNum","parseInt","colNum","r","_this2","addRowBtnId","addColBtnId","delRowBtnId","delColBtnId","delTableBtnId","_addRow","_addCol","_delRow","_delCol","_delTable","_getLocationData","$tr","$tds","tdLength","td","$tbody","$trs","trLength","tr","locationData","trData","$currentTr","tdData","newTr","tdIndex","$currentTd","$table","textValId","width30","width50","width100","delBtn","tabsConfig","$img","_selectedImg","uploadImg","upTriggerId","upFileId","linkUrlId","linkBtnId","$file","fileElem","click","fileList","$linkUrl","insertLinkImg","tabsConfigResult","uploadImgServer","customUploadImg","FileReader","codeMirror","$soundCodeElem","querySelector","htmlEditFlag","visibility","editorContent","editorValue","getValue","setValue","_menusControl","txt","disable","Object","keys","menuItem","ua","onstructor","console","log","_setLineHeight","selectNodes","targetNodes","newContent","flvSrc","MenuConstructors","bold","head","fontSize","italic","redo","strikeThrough","underline","undo","justify","foreColor","backColor","quote","code","emoticon","table","video","image","soundCode","clearFormat","iframe","init","menuKey","MenuConstructor","_addToToolbar","_bindEvent","$toolbarElem","getRange","changeActive","clear","initSelection","getJSON","_saveRangeRealTime","_enterKeyHandle","_clearHandle","_pasteHandle","_tabHandle","_imgHandle","_dragHandle","saveRange","insertEmptyP","$p","pHandle","codeHandle","selectionNodeName","parentNodeName","queryCommandSupported","_willBreakCode","preventDefault","_startOffset","startOffset","codeLength","keyCode","txtHtml","canDo","now","Date","flag","pasteTime","resetTime","ex","pasteFiles","img","dataTransfer","_useStyleWithCSS","execCommand","_name","_execCommand","change","_insertHTML","_insertElem","_range","$containerElem","toStart","collapse","commonAncestorContainer","startContainer","endContainer","endOffset","removeAllRanges","addRange","setEnd","isContent","selectNodeContents","selectNode","progress","timeoutId","_hide","_typeof","Symbol","iterator","_alert","alertInfo","debugInfo","customAlert","onload","callback","onerror","onabort","_this3","maxSize","maxSizeM","maxLength","uploadImgMaxLength","uploadImgParamsWithUrl","hooks","resultFiles","errInfo","file","size","bind","formdata","FormData","uploadImgServerArr","uploadImgServerHash","XMLHttpRequest","open","ontimeout","upload","onprogress","percent","progressBar","lengthComputable","loaded","total","onreadystatechange","readyState","status","responseText","JSON","parse","customInsert","errno","beforeResult","prevent","msg","setRequestHeader","send","reader","readAsDataURL","CodeMirror","classTest","cls","removeChildren","count","firstChild","removeChildrenAndAdd","elt","cssText","createTextNode","eltP","host","activeElt","activeElement","body","shadowRoot","current","joinClasses","as","f","args","arguments","apply","copyObj","overwrite","prop","countColumn","string","end","tabSize","startIndex","startValue","search","nextTab","array","findColumn","goal","pos","col","skipped","min","spaceStr","spaceStrs","lst","out","insertSorted","score","priority","nothing","createObj","base","props","inst","create","isWordCharBasic","ch","toUpperCase","nonASCIISingleCaseWordChar","isWordChar","helper","source","isEmpty","isExtendingChar","charCodeAt","extendingChars","skipExtendingChars","dir","charAt","findFirst","pred","from","to","midF","mid","ceil","floor","iterateBidiSections","order","found","part","max","level","getBidiPartAt","sticky","bidiOther","cur","getOrder","line","direction","bidiOrdering","getHandlers","emitter","_handlers","noHandlers","detachEvent","concat","signal","handlers","signalDOMEvent","cm","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","set$$1","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","mac","ctrlKey","zeroWidthElement","measure","zwspSupported","offsetHeight","offsetWidth","ie","ie_version","hasBadBidiRects","badBidiRects","r0","r1","left","right","hasBadZoomedRects","badZoomedRects","normal","fromRange","abs","defineMode","mode","dependencies","modes","defineMIME","mime","spec","mimeModes","resolveMode","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","innerMode","info","startState","a1","a2","getLine","chunk","lines","sz","chunkSize","getBetween","start","iter","getLines","updateLineHeight","diff","lineNo","no","_lineAtHeight","h","outer","i$1","lh","isLine","l","lineNumberFor","String","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","_clipPos","clipToLen","linelen","clipPosArray","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","o","overlays","baseTokens","overlay","at","i_end","opaque","baseTokenPos","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","Context","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","StringStream","callBlankLine","eol","readToken","blankLine","inner","token","takeToken","asArray","tokens","Token","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","after","SavedContext","lookAhead","indented","retreatFrontier","seeReadOnlySpans","sawReadOnlySpans","seeCollapsedSpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","removeMarkedSpan","addMarkedSpan","markedSpans","attachLine","markedSpansBefore","old","startCh","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","mk","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","updateLine","estimateHeight","estHeight","cleanUpLine","interpretTokenStyle","cache","styleToClassCacheWithMode","styleToClassCache","buildLineContent","lineView","webkit","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","defaultSpecialCharPlaceholder","startStyle","endStyle","displayText","special","specialChars","mustWrap","createDocumentFragment","lastIndex","exec","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","j$1","j$2","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","pushOperation","op","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","signalLater","orphanDelayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","updateLineBackground","background","wrap","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","isWidget","next","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","paddingRight","isNaN","scrollGap","scrollerGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","ensureLineHeights","rect","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","bottom","top","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","nullRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","android","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","get$$1","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","measureText","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","add","fragment","rightSide","drawForLine","fromArg","toArg","wrapX","side","extent","lineLen","fromPos","toPos","openStart","openEnd","openLeft","docLTR","openRight","leftSide","topLeft","topRight","botLeft","botRight","padding","sizerWidth","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","selForContextMenu","reset","receivedFocus","rmClass","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","phantom","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","gecko","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","update","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","initScrollbars","scrollbarModel","scrollbarStyle","axis","_startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","nextOpId","_endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","i$4","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","minWidth","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","time","highlight","set","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","snapshot","editorIsHidden","force","visible","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","wrapperHeight","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","minHeight","oldDisplayWidth","reportedViewFrom","reportedViewTo","updateNumbersFrom","rm","currentWheelTarget","container","updateNumber","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","mobile","draggable","wheelDX","wheelDY","activeTouch","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","wheelPixelsPerUnit","onScrollWheel","scroll","canScrollX","canScrollY","presto","pixels","wheelSamples","movedX","movedY","sample","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","prev","inv","Range","Selection","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","Line","firstLine","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","origin","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","somethingSelected","addSelectionToHistory","clearRedo","dest","equals","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","copy","deepCopy","newChanges","Number","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","sel_dontScroll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","returned","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","_replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","adjustScrollWhenAboveVisible","addLineWidget","LineWidget","insertAt","aboveVisible","_markText","markTextShared","TextMarker","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","nextMarkerId","isParent","SharedTextMarker","findSharedMarkers","findMarks","clipPos","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","onDrop","clearDragCursor","lastDrop","isReadOnly","File","read","markAsReadAndPasteIfAllFilesAreRead","t","lineSeparator","allowDropFileTypes","readAsText","draggingText","text$1","selected","listSelections","replaceSelection","onDragStart","setData","effectAllowed","setDragImage","safari","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","ensureGlobalHandlers","globalsRegistered","registerGlobalHandlers","resizeTimer","onResize","setSize","normalizeKeyName","ctrl","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","keyNames","addModifierNames","noShift","altKey","flipCtrlCmd","metaKey","shiftKey","keyName","altGraphKey","keyMap","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","targetTop","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","doHandleBinding","bound","dropShift","commands","ensurePolled","prevShift","Pass","lookupKeyForEditor","keyMaps","extraKeys","dispatchKey","seq","keySeq","stopSeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","onKeyDown","handled","lastStoppedKey","hasCopyEvent","showCrossHair","up","onKeyUp","onKeyPress","charCode","fromCharCode","clickRepeat","lastDoubleClick","compare","lastClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","captureRightClick","onContextMenu","configureMouse","option","chromeOS","addNew","moveOnDrag","contained","behavior","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","ownerDocument","mouseMove","dragStart","e2","rangeForUnit","findWordAt","extendTo","lastPos","startCol","posCol","leftPos","startSel","ourIndex","oldRange","ourRange","ranges$1","bidiSimplify","sel_mouse","curCount","counter","editorSize","move","buttons","anchorLine","boundary","headIndex","usePart","gutterEvent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","dragDropChanged","Init","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","this$1","defaults$$1","Doc","inputStyles","inputStyle","pasteIncoming","cutIncoming","Delayed","autofocus","registerEventHandlers","optionHandlers","finishInit","initHooks","textRendering","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","word","getField","pageX","pageY","coordsChar","inp","indentLine","how","aggressive","curSpace","indentation","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","setLastCopied","newLastCopied","lastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","splitLinesAuto","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","te","ios","border","_findPosH","findNextLine","lineDir","moveOnce","boundToLine","origDir","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","posToDOM","isInGutter","scan","badPos","bad","domTextBetween","recognizeMarker","close","closing","lineSep","extraLinebreak","addText","walk","cmText","markerID","isBlock","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","previousSibling","dist$1","fromTextArea","textarea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","getWrapperElement","platform","ie_upto10","ie_11up","edge","documentMode","qtwebkit","vendor","mac_geMountainLion","windows","presto_version","endNode","setStart","createTextRange","moveToElementText","moveEnd","moveStart","selectInput","selectionStart","selectionEnd","_e","handler","onTimeout","self","ms","sel_move","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","type$1","prev$1","type$2","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","i$7","nstart","unshift","attachEvent","nl","rt","hasSelection","compareEndPoints","oncopy","lineOracle","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","oracle","baseToken","maxLookAhead","NativeScrollbars","vert","horiz","checkedZeroWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","native","null","here","there","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","oldH","withOp","dHeight","nextDocId","cleanGeneration","replaceRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","dup","replaceSelections","newSel","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","markText","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","defaults","defineInitHook","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","startGracePeriod","rememberSelection","selectionInEditor","blur","poll","pollSelection","pollInterval","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","prepareCopyCut","createField","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","prepareSelectAllHack","extval","rehide","oldWrapperCSS","oldCSS","detectingSelectAll","resetSelectionOnContextMenu","wrapperBox","offsetParent","oldScrollY","scrollY","scrollTo","mouseup","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","interpret","startOperation","endOperation","swapDoc","phrase","phraseText","phrases","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","dontDelegate","method","contenteditable","defineExtension","func","defineDocExtension","cmpPos","version","htmlConfig","autoSelfClosers","area","command","embed","frame","hr","keygen","meta","param","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","tbody","tfoot","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","nav","ol","section","ul","thead","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","inText","chain","parser","tokenize","inBlock","doctype","inTag","baseState","tagName","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","depth","startOfLine","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","htmlMode","isInText","baseIndent","textAfter","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","blockCommentStart","blockCommentEnd","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","cx","_initConfig","langConfig","lang","_initDom","$toolbarSelector","config$$1","that","toolbarElemId","textElemId","getElementById","compositionEnd","onfocus","onblur","isFocus","isChild","isToolbar","isMenu","_initCommand","_initSelectionAPI","_initUploadImg","_initMenus","_initText","newLine","$last","onChangeTimeoutId","beforeChangeHtml","onchangeTimeout","onchange","currentHtml","_offAllEvent","varArgs","TypeError","nextSource","nextKey","Element","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","getElementsByTagName"],"mappings":"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","file":"wangEditor.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.wangEditor = factory());\n}(this, (function () { 'use strict';\n\n/*\n    poly-fill\n*/\n\nvar polyfill = function () {\n\n    // Object.assign\n    if (typeof Object.assign != 'function') {\n        Object.assign = function (target, varArgs) {\n            // .length of function is 2\n            if (target == null) {\n                // TypeError if undefined or null\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            var to = Object(target);\n\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n\n                if (nextSource != null) {\n                    // Skip over if undefined or null\n                    for (var nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        };\n    }\n\n    // IE ä¸­å¼å®¹ Element.prototype.matches\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (s) {\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n                i = matches.length;\n            while (--i >= 0 && matches.item(i) !== this) {}\n            return i > -1;\n        };\n    }\n};\n\n/*\n    DOM æä½ API\n*/\n\n// æ ¹æ® html ä»£ç çæ®µåå»º dom å¯¹è±¡\nfunction createElemByHTML(html) {\n    var div = void 0;\n    div = document.createElement('div');\n    div.innerHTML = html;\n    return div.children;\n}\n\n// æ¯å¦æ¯ DOM List\nfunction isDOMList(selector) {\n    if (!selector) {\n        return false;\n    }\n    if (selector instanceof HTMLCollection || selector instanceof NodeList) {\n        return true;\n    }\n    return false;\n}\n\n// å°è£ document.querySelectorAll\nfunction querySelectorAll(selector) {\n    var result = document.querySelectorAll(selector);\n    if (isDOMList(result)) {\n        return result;\n    } else {\n        return [result];\n    }\n}\n\n// è®°å½ææçäºä»¶ç»å®\nvar eventList = [];\n\n// åå»ºæé å½æ°\nfunction DomElement(selector) {\n    if (!selector) {\n        return;\n    }\n\n    // selector æ¬æ¥å°±æ¯ DomElement å¯¹è±¡ï¼ç´æ¥è¿å\n    if (selector instanceof DomElement) {\n        return selector;\n    }\n\n    this.selector = selector;\n    var nodeType = selector.nodeType;\n\n    // æ ¹æ® selector å¾åºçç»æï¼å¦ DOMï¼DOM Listï¼\n    var selectorResult = [];\n    if (nodeType === 9) {\n        // document èç¹\n        selectorResult = [selector];\n    } else if (nodeType === 1) {\n        // åä¸ª DOM èç¹\n        selectorResult = [selector];\n    } else if (isDOMList(selector) || selector instanceof Array) {\n        // DOM List æèæ°ç»\n        selectorResult = selector;\n    } else if (typeof selector === 'string') {\n        // å­ç¬¦ä¸²\n        selector = selector.replace('/\\n/mg', '').trim();\n        if (selector.indexOf('<') === 0) {\n            // å¦ <div>\n            selectorResult = createElemByHTML(selector);\n        } else {\n            // å¦ #id .class\n            selectorResult = querySelectorAll(selector);\n        }\n    }\n\n    var length = selectorResult.length;\n    if (!length) {\n        // ç©ºæ°ç»\n        return this;\n    }\n\n    // å å¥ DOM èç¹\n    var i = void 0;\n    for (i = 0; i < length; i++) {\n        this[i] = selectorResult[i];\n    }\n    this.length = length;\n}\n\n// ä¿®æ¹åå\nDomElement.prototype = {\n    constructor: DomElement,\n\n    // ç±»æ°ç»ï¼forEach\n    forEach: function forEach(fn) {\n        var i = void 0;\n        for (i = 0; i < this.length; i++) {\n            var elem = this[i];\n            var result = fn.call(elem, elem, i);\n            if (result === false) {\n                break;\n            }\n        }\n        return this;\n    },\n\n    // clone\n    clone: function clone(deep) {\n        var cloneList = [];\n        this.forEach(function (elem) {\n            cloneList.push(elem.cloneNode(!!deep));\n        });\n        return $(cloneList);\n    },\n\n    // è·åç¬¬å ä¸ªåç´ \n    get: function get(index) {\n        var length = this.length;\n        if (index >= length) {\n            index = index % length;\n        }\n        return $(this[index]);\n    },\n\n    // ç¬¬ä¸ä¸ª\n    first: function first() {\n        return this.get(0);\n    },\n\n    // æåä¸ä¸ª\n    last: function last() {\n        var length = this.length;\n        return this.get(length - 1);\n    },\n\n    // ç»å®äºä»¶\n    on: function on(type, selector, fn) {\n        // selector ä¸ä¸ºç©ºï¼è¯æç»å®äºä»¶è¦å ä»£ç\n        if (!fn) {\n            fn = selector;\n            selector = null;\n        }\n\n        // type æ¯å¦æå¤ä¸ª\n        var types = [];\n        types = type.split(/\\s+/);\n\n        return this.forEach(function (elem) {\n            types.forEach(function (type) {\n                if (!type) {\n                    return;\n                }\n\n                // è®°å½ä¸ï¼æ¹ä¾¿åé¢è§£ç»\n                eventList.push({\n                    elem: elem,\n                    type: type,\n                    fn: fn\n                });\n\n                if (!selector) {\n                    // æ ä»£ç\n                    elem.addEventListener(type, fn);\n                    return;\n                }\n\n                // æä»£ç\n                elem.addEventListener(type, function (e) {\n                    var target = e.target;\n                    if (target.matches(selector)) {\n                        fn.call(target, e);\n                    }\n                });\n            });\n        });\n    },\n\n    // åæ¶äºä»¶ç»å®\n    off: function off(type, fn) {\n        return this.forEach(function (elem) {\n            elem.removeEventListener(type, fn);\n        });\n    },\n\n    // è·å/è®¾ç½® å±æ§\n    attr: function attr(key, val) {\n        if (val == null) {\n            // è·åå¼\n            return this[0].getAttribute(key);\n        } else {\n            // è®¾ç½®å¼\n            return this.forEach(function (elem) {\n                elem.setAttribute(key, val);\n            });\n        }\n    },\n\n    // æ·»å  class\n    addClass: function addClass(className) {\n        if (!className) {\n            return this;\n        }\n        return this.forEach(function (elem) {\n            var arr = void 0;\n            if (elem.className) {\n                // è§£æå½å className è½¬æ¢ä¸ºæ°ç»\n                arr = elem.className.split(/\\s/);\n                arr = arr.filter(function (item) {\n                    return !!item.trim();\n                });\n                // æ·»å  class\n                if (arr.indexOf(className) < 0) {\n                    arr.push(className);\n                }\n                // ä¿®æ¹ elem.class\n                elem.className = arr.join(' ');\n            } else {\n                elem.className = className;\n            }\n        });\n    },\n\n    // å é¤ class\n    removeClass: function removeClass(className) {\n        if (!className) {\n            return this;\n        }\n        return this.forEach(function (elem) {\n            var arr = void 0;\n            if (elem.className) {\n                // è§£æå½å className è½¬æ¢ä¸ºæ°ç»\n                arr = elem.className.split(/\\s/);\n                arr = arr.filter(function (item) {\n                    item = item.trim();\n                    // å é¤ class\n                    if (!item || item === className) {\n                        return false;\n                    }\n                    return true;\n                });\n                // ä¿®æ¹ elem.class\n                elem.className = arr.join(' ');\n            }\n        });\n    },\n\n    // ä¿®æ¹ css\n    css: function css(key, val) {\n        var currentStyle = key + ':' + val + ';';\n        return this.forEach(function (elem) {\n            var style = (elem.getAttribute('style') || '').trim();\n            var styleArr = void 0,\n                resultArr = [];\n            if (style) {\n                // å° style æç§ ; æåä¸ºæ°ç»\n                styleArr = style.split(';');\n                styleArr.forEach(function (item) {\n                    // å¯¹æ¯é¡¹æ ·å¼ï¼æç§ : æåä¸º key å value\n                    var arr = item.split(':').map(function (i) {\n                        return i.trim();\n                    });\n                    if (arr.length === 2) {\n                        resultArr.push(arr[0] + ':' + arr[1]);\n                    }\n                });\n                // æ¿æ¢æèæ°å¢\n                resultArr = resultArr.map(function (item) {\n                    if (item.indexOf(key) === 0) {\n                        return currentStyle;\n                    } else {\n                        return item;\n                    }\n                });\n                if (resultArr.indexOf(currentStyle) < 0) {\n                    resultArr.push(currentStyle);\n                }\n                // ç»æ\n                elem.setAttribute('style', resultArr.join('; '));\n            } else {\n                // style æ å¼\n                elem.setAttribute('style', currentStyle);\n            }\n        });\n    },\n\n    // æ¾ç¤º\n    show: function show() {\n        return this.css('display', 'block');\n    },\n\n    // éè\n    hide: function hide() {\n        return this.css('display', 'none');\n    },\n\n    // è·åå­èç¹\n    children: function children() {\n        var elem = this[0];\n        if (!elem) {\n            return null;\n        }\n\n        return $(elem.children);\n    },\n\n    // è·åå­èç¹ï¼åæ¬ææ¬èç¹ï¼\n    childNodes: function childNodes() {\n        var elem = this[0];\n        if (!elem) {\n            return null;\n        }\n\n        return $(elem.childNodes);\n    },\n\n    // å¢å å­èç¹\n    append: function append($children) {\n        return this.forEach(function (elem) {\n            $children.forEach(function (child) {\n                elem.appendChild(child);\n            });\n        });\n    },\n\n    // ç§»é¤å½åèç¹\n    remove: function remove() {\n        return this.forEach(function (elem) {\n            if (elem.remove) {\n                elem.remove();\n            } else {\n                var parent = elem.parentElement;\n                parent && parent.removeChild(elem);\n            }\n        });\n    },\n\n    // æ¯å¦åå«æä¸ªå­èç¹\n    isContain: function isContain($child) {\n        var elem = this[0];\n        var child = $child[0];\n        return elem.contains(child);\n    },\n\n    // å°ºå¯¸æ°æ®\n    getSizeData: function getSizeData() {\n        var elem = this[0];\n        return elem.getBoundingClientRect(); // å¯å¾å° bottom height left right top width çæ°æ®\n    },\n\n    // å°è£ nodeName\n    getNodeName: function getNodeName() {\n        var elem = this[0];\n        return elem.nodeName;\n    },\n\n    // ä»å½ååç´ æ¥æ¾\n    find: function find(selector) {\n        var elem = this[0];\n        return $(elem.querySelectorAll(selector));\n    },\n\n    // è·åå½ååç´ ç text\n    text: function text(val) {\n        if (!val) {\n            // è·å text\n            var elem = this[0];\n            return elem.innerHTML.replace(/<.*?>/g, function () {\n                return '';\n            });\n        } else {\n            // è®¾ç½® text\n            return this.forEach(function (elem) {\n                elem.innerHTML = val;\n            });\n        }\n    },\n\n    // è·å html\n    html: function html(value) {\n        var elem = this[0];\n        if (value == null) {\n            return elem.innerHTML;\n        } else {\n            elem.innerHTML = value;\n            return this;\n        }\n    },\n\n    // è·å value\n    val: function val() {\n        var elem = this[0];\n        return elem.value.trim();\n    },\n\n    // focus\n    focus: function focus() {\n        return this.forEach(function (elem) {\n            elem.focus();\n        });\n    },\n\n    // parent\n    parent: function parent() {\n        var elem = this[0];\n        return $(elem.parentElement);\n    },\n\n    // parentUntil æ¾å°ç¬¦å selector çç¶èç¹\n    parentUntil: function parentUntil(selector, _currentElem) {\n        var results = document.querySelectorAll(selector);\n        var length = results.length;\n        if (!length) {\n            // ä¼ å¥ç selector æ æ\n            return null;\n        }\n\n        var elem = _currentElem || this[0];\n        if (elem.nodeName === 'BODY') {\n            return null;\n        }\n\n        var parent = elem.parentElement;\n        var i = void 0;\n        for (i = 0; i < length; i++) {\n            if (parent === results[i]) {\n                // æ¾å°ï¼å¹¶è¿å\n                return $(parent);\n            }\n        }\n\n        // ç»§ç»­æ¥æ¾\n        return this.parentUntil(selector, parent);\n    },\n\n    // å¤æ­ä¸¤ä¸ª elem æ¯å¦ç¸ç­\n    equal: function equal($elem) {\n        if ($elem.nodeType === 1) {\n            return this[0] === $elem;\n        } else {\n            return this[0] === $elem[0];\n        }\n    },\n\n    // å°è¯¥åç´ æå¥å°æä¸ªåç´ åé¢\n    insertBefore: function insertBefore(selector) {\n        var $referenceNode = $(selector);\n        var referenceNode = $referenceNode[0];\n        if (!referenceNode) {\n            return this;\n        }\n        return this.forEach(function (elem) {\n            var parent = referenceNode.parentNode;\n            parent.insertBefore(elem, referenceNode);\n        });\n    },\n\n    // å°è¯¥åç´ æå¥å°æä¸ªåç´ åé¢\n    insertAfter: function insertAfter(selector) {\n        var $referenceNode = $(selector);\n        var referenceNode = $referenceNode[0];\n        if (!referenceNode) {\n            return this;\n        }\n        return this.forEach(function (elem) {\n            var parent = referenceNode.parentNode;\n            if (parent.lastChild === referenceNode) {\n                // æåä¸ä¸ªåç´ \n                parent.appendChild(elem);\n            } else {\n                // ä¸æ¯æåä¸ä¸ªåç´ \n                parent.insertBefore(elem, referenceNode.nextSibling);\n            }\n        });\n    }\n\n    // new ä¸ä¸ªå¯¹è±¡\n};function $(selector) {\n    return new DomElement(selector);\n}\n\n// è§£ç»ææäºä»¶ï¼ç¨äºéæ¯ç¼è¾å¨\n$.offAll = function () {\n    eventList.forEach(function (item) {\n        var elem = item.elem;\n        var type = item.type;\n        var fn = item.fn;\n        // è§£ç»\n        elem.removeEventListener(type, fn);\n    });\n};\n\n/*\n    éç½®ä¿¡æ¯\n*/\n\nvar config = {\n\n    // é»è®¤èåéç½®\n    menus: ['head', 'bold', 'fontSize', 'fontName', 'italic', 'underline', 'strikeThrough', 'foreColor', 'backColor', 'link', 'list', 'justify', 'quote', 'emoticon', 'image', 'table', 'video', 'code', 'undo', 'redo'],\n\n    fontNames: ['å®ä½', 'å¾®è½¯éé»', 'Arial', 'Tahoma', 'Verdana'],\n\n    colors: ['#000000', '#eeece0', '#1c487f', '#4d80bf', '#c24f4a', '#8baa4a', '#7b5ba1', '#46acc8', '#f9963b', '#ffffff'],\n\n    // // è¯­è¨éç½®\n    // lang: {\n    //     'è®¾ç½®æ é¢': 'title',\n    //     'æ­£æ': 'p',\n    //     'é¾æ¥æå­': 'link text',\n    //     'é¾æ¥': 'link',\n    //     'æå¥': 'insert',\n    //     'åå»º': 'init'\n    // },\n\n    // è¡¨æ\n    emotions: [{\n        // tab çæ é¢\n        title: 'é»è®¤',\n        // type -> 'emoji' / 'image'\n        type: 'image',\n        // content -> æ°ç»\n        content: [{\n            alt: '[åç¬]',\n            src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png'\n        }, {\n            alt: '[èå±]',\n            src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png'\n        }, {\n            alt: '[æ±¡]',\n            src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/pcmoren_wu_org.png'\n        }]\n    }, {\n        // tab çæ é¢\n        title: 'æ°æµª',\n        // type -> 'emoji' / 'image'\n        type: 'image',\n        // content -> æ°ç»\n        content: [{\n            src: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n            alt: '[èæ³¥é©¬]'\n        }, {\n            src: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n            alt: '[ç¥é©¬]'\n        }, {\n            src: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n            alt: '[æµ®äº]'\n        }]\n    }, {\n        // tab çæ é¢\n        title: 'emoji',\n        // type -> 'emoji' / 'image'\n        type: 'emoji',\n        // content -> æ°ç»\n        content: 'ð ð ð ð ð ð ð ð ð ð ð ð ð ðª ð´ ð ð¤ ð¬ ð¤'.split(/\\s/)\n    }],\n\n    // ç¼è¾åºåç z-index\n    zIndex: 10000,\n\n    // æ¯å¦å¼å¯ debug æ¨¡å¼ï¼debug æ¨¡å¼ä¸éè¯¯ä¼ throw error å½¢å¼æåºï¼\n    debug: false,\n\n    // æå¥é¾æ¥æ¶åçæ ¼å¼æ ¡éª\n    linkCheck: function linkCheck(text, link) {\n        // text æ¯æå¥çæå­\n        // link æ¯æå¥çé¾æ¥\n        return true; // è¿å true å³è¡¨ç¤ºæå\n        // return 'æ ¡éªå¤±è´¥' // è¿åå­ç¬¦ä¸²å³è¡¨ç¤ºå¤±è´¥çæç¤ºä¿¡æ¯\n    },\n\n    // æå¥ç½ç»å¾ççæ ¡éª\n    linkImgCheck: function linkImgCheck(src) {\n        // src å³å¾ççå°å\n        return true; // è¿å true å³è¡¨ç¤ºæå\n        // return 'æ ¡éªå¤±è´¥'  // è¿åå­ç¬¦ä¸²å³è¡¨ç¤ºå¤±è´¥çæç¤ºä¿¡æ¯\n    },\n\n    // ç²è´´è¿æ»¤æ ·å¼ï¼é»è®¤å¼å¯\n    pasteFilterStyle: true,\n\n    // ç²è´´åå®¹æ¶ï¼å¿½ç¥å¾çãé»è®¤å³é­\n    pasteIgnoreImg: false,\n\n    // å¯¹ç²è´´çæå­è¿è¡èªå®ä¹å¤çï¼è¿åå¤çåçç»æãç¼è¾å¨ä¼å°å¤çåçç»æç²è´´å°ç¼è¾åºåä¸­ã\n    // IE ææ¶ä¸æ¯æ\n    pasteTextHandle: function pasteTextHandle(content) {\n        // content å³ç²è´´è¿æ¥çåå®¹ï¼html æ çº¯ææ¬ï¼ï¼å¯è¿è¡èªå®ä¹å¤çç¶åè¿å\n        return content;\n    },\n\n    // onchange äºä»¶\n    // onchange: function (html) {\n    //     // html å³ååä¹åçåå®¹\n    //     console.log(html)\n    // },\n\n    // æ¯å¦æ¾ç¤ºæ·»å ç½ç»å¾çç tab\n    showLinkImg: true,\n\n    // æå¥ç½ç»å¾ççåè°\n    linkImgCallback: function linkImgCallback(url) {\n        // console.log(url)  // url å³æå¥å¾ççå°å\n    },\n\n    // é»è®¤ä¸ä¼ å¾ç max size: 5M\n    uploadImgMaxSize: 5 * 1024 * 1024,\n\n    // éç½®ä¸æ¬¡æå¤ä¸ä¼ å ä¸ªå¾ç\n    // uploadImgMaxLength: 5,\n\n    // ä¸ä¼ å¾çï¼æ¯å¦æ¾ç¤º base64 æ ¼å¼\n    uploadImgShowBase64: false,\n\n    // ä¸ä¼ å¾çï¼server å°åï¼å¦ææå¼ï¼å base64 æ ¼å¼çéç½®åå¤±æï¼\n    // uploadImgServer: '/upload',\n\n    // èªå®ä¹éç½® filename\n    uploadFileName: '',\n\n    // ä¸ä¼ å¾ççèªå®ä¹åæ°\n    uploadImgParams: {\n        // token: 'abcdef12345'\n    },\n\n    // ä¸ä¼ å¾ççèªå®ä¹header\n    uploadImgHeaders: {\n        // 'Accept': 'text/x-json'\n    },\n\n    // éç½® XHR withCredentials\n    withCredentials: false,\n\n    // èªå®ä¹ä¸ä¼ å¾çè¶æ¶æ¶é´ ms\n    uploadImgTimeout: 10000,\n\n    // ä¸ä¼ å¾ç hook \n    uploadImgHooks: {\n        // customInsert: function (insertLinkImg, result, editor) {\n        //     console.log('customInsert')\n        //     // å¾çä¸ä¼ å¹¶è¿åç»æï¼èªå®ä¹æå¥å¾ççäºä»¶ï¼èä¸æ¯ç¼è¾å¨èªå¨æå¥å¾ç\n        //     const data = result.data1 || []\n        //     data.forEach(link => {\n        //         insertLinkImg(link)\n        //     })\n        // },\n        before: function before(xhr, editor, files) {\n            // å¾çä¸ä¼ ä¹åè§¦å\n\n            // å¦æè¿åçç»ææ¯ {prevent: true, msg: 'xxxx'} åè¡¨ç¤ºç¨æ·æ¾å¼ä¸ä¼ \n            // return {\n            //     prevent: true,\n            //     msg: 'æ¾å¼ä¸ä¼ '\n            // }\n        },\n        success: function success(xhr, editor, result) {\n            // å¾çä¸ä¼ å¹¶è¿åç»æï¼å¾çæå¥æåä¹åè§¦å\n        },\n        fail: function fail(xhr, editor, result) {\n            // å¾çä¸ä¼ å¹¶è¿åç»æï¼ä½å¾çæå¥éè¯¯æ¶è§¦å\n        },\n        error: function error(xhr, editor) {\n            // å¾çä¸ä¼ åºéæ¶è§¦å\n        },\n        timeout: function timeout(xhr, editor) {\n            // å¾çä¸ä¼ è¶æ¶æ¶è§¦å\n        }\n    },\n\n    // æ¯å¦ä¸ä¼ ä¸çäºï¼é»è®¤ä¸º false\n    qiniu: false\n\n    // ä¸ä¼ å¾çèªå®ä¹æç¤ºæ¹æ³\n    // customAlert: function (info) {\n    //     // èªå®ä¹ä¸ä¼ æç¤º\n    // },\n\n    // // èªå®ä¹ä¸ä¼ å¾ç\n    // customUploadImg: function (files, insert) {\n    //     // files æ¯ input ä¸­éä¸­çæä»¶åè¡¨\n    //     // insert æ¯è·åå¾ç url åï¼æå¥å°ç¼è¾å¨çæ¹æ³\n    //     insert(imgUrl)\n    // }\n};\n\n/*\n    å·¥å·\n*/\n\n// å UA ç¸å³çå±æ§\nvar UA = {\n    _ua: navigator.userAgent,\n\n    // æ¯å¦ webkit\n    isWebkit: function isWebkit() {\n        var reg = /webkit/i;\n        return reg.test(this._ua);\n    },\n\n    // æ¯å¦ IE\n    isIE: function isIE() {\n        return 'ActiveXObject' in window;\n    }\n\n    // éåå¯¹è±¡\n};function objForEach(obj, fn) {\n    var key = void 0,\n        result = void 0;\n    for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            result = fn.call(obj, key, obj[key]);\n            if (result === false) {\n                break;\n            }\n        }\n    }\n}\n\n// éåç±»æ°ç»\nfunction arrForEach(fakeArr, fn) {\n    var i = void 0,\n        item = void 0,\n        result = void 0;\n    var length = fakeArr.length || 0;\n    for (i = 0; i < length; i++) {\n        item = fakeArr[i];\n        result = fn.call(fakeArr, item, i);\n        if (result === false) {\n            break;\n        }\n    }\n}\n\n// è·åéæºæ°\nfunction getRandom(prefix) {\n    return prefix + Math.random().toString().slice(2);\n}\n\n// æ¿æ¢ html ç¹æ®å­ç¬¦\nfunction replaceHtmlSymbol(html) {\n    if (html == null) {\n        return '';\n    }\n    return html.replace(/</gm, '&lt;').replace(/>/gm, '&gt;').replace(/\"/gm, '&quot;').replace(/(\\r\\n|\\r|\\n)/g, '<br/>');\n}\n\n// è¿åç¾åæ¯çæ ¼å¼\n\n\n// å¤æ­æ¯ä¸æ¯ function\nfunction isFunction(fn) {\n    return typeof fn === 'function';\n}\n\nfunction hasClass(element, className) {\n    if (!element) return;\n\n    return element.classList.contains(className.trim());\n}\n\nfunction isComponent(element) {\n    return element && (/se-component/.test(element.className) || /^(TABLE|HR)$/.test(element.nodeName));\n}\n\nfunction isWysiwygDiv(element) {\n    if (element && element.nodeType === 1 && (hasClass(element, 'se-wrapper-wysiwyg') || /^BODY$/i.test(element.nodeName))) return true;\n    return false;\n}\n\nfunction isFormatElement(element) {\n    if (element && element.nodeType === 1 && /^(P|DIV|H[1-6]|LI|TH|TD|SECTION)$/i.test(element.nodeName) && !isComponent(element) && !isWysiwygDiv(element)) return true;\n    return false;\n}\n\nfunction _HTMLConvertor(contents) {\n    var ec = { '&': '&amp;', '\\xA0': '&nbsp;', '\\'': '&quot;', '<': '&lt;', '>': '&gt;' };\n    return contents.replace(/&|\\u00A0|'|<|>/g, function (m) {\n        return typeof ec[m] === 'string' ? ec[m] : m;\n    });\n}\n\n// æ ¼å¼åèç¹\nfunction convertHTMLForCodeView(html, indentSize) {\n    var returnHTML = '';\n    var reg = window.RegExp;\n    var brReg = new reg('^(BLOCKQUOTE|PRE|TABLE|THEAD|TBODY|TR|TH|TD|OL|UL|IMG|IFRAME|VIDEO|AUDIO|FIGURE|FIGCAPTION|HR|BR)$', 'i');\n    var wDoc = typeof html === 'string' ? document.createRange().createContextualFragment(html) : html;\n\n    indentSize *= 1;\n    indentSize = indentSize > 0 ? new window.Array(indentSize + 1).join(' ') : '';\n\n    (function recursionFunc(element, indent, lineBR) {\n        var children = element.childNodes;\n        var elementRegTest = brReg.test(element.nodeName);\n        var elementIndent = elementRegTest ? indent : '';\n\n        for (var i = 0, len = children.length, node, br, nodeRegTest; i < len; i++) {\n            node = children[i];\n            nodeRegTest = brReg.test(node.nodeName);\n            br = nodeRegTest ? '\\n' : '';\n            lineBR = isFormatElement(node) && !elementRegTest && !/^(TH|TD)$/i.test(element.nodeName) ? '\\n' : '';\n\n            if (node.nodeType === 3) {\n                returnHTML += _HTMLConvertor(/^\\n+$/.test(node.data) ? '' : node.data);\n                continue;\n            }\n\n            if (node.childNodes.length === 0) {\n                returnHTML += (/^(HR)$/i.test(node.nodeName) ? '\\n' : '') + elementIndent + node.outerHTML + br;\n                continue;\n            }\n\n            node.innerHTML = node.innerHTML;\n            var tag = node.nodeName.toLowerCase();\n            returnHTML += (lineBR || (elementRegTest ? '' : br)) + (elementIndent || nodeRegTest ? indent : '') + node.outerHTML.match(reg('<' + tag + '[^>]*>', 'i'))[0] + br;\n            recursionFunc(node, indent + indentSize, '');\n            returnHTML += (nodeRegTest ? indent : '') + '</' + tag + '>' + (lineBR || br || elementRegTest ? '\\n' : '' || /^(TH|TD)$/i.test(node.nodeName) ? '\\n' : '');\n        }\n    })(wDoc, '', '\\n');\n\n    return returnHTML.trim() + '\\n';\n}\n\n/*\n    bold-menu\n*/\n// æé å½æ°\nfunction Bold(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-bold\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nBold.prototype = {\n    constructor: Bold,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n\n        if (isSeleEmpty) {\n            // éåºæ¯ç©ºçï¼æå¥å¹¶éä¸­ä¸ä¸ªâç©ºç½â\n            editor.selection.createEmptyRange();\n        }\n\n        // æ§è¡ bold å½ä»¤\n        editor.cmd.do('bold');\n\n        if (isSeleEmpty) {\n            // éè¦å°éåæå èµ·æ¥\n            editor.selection.collapseRange();\n            editor.selection.restoreSelection();\n        }\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor.cmd.queryCommandState('bold')) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    æ¿æ¢å¤è¯­è¨\n */\n\nvar replaceLang = function (editor, str) {\n    var langArgs = editor.config.langArgs || [];\n    var result = str;\n\n    langArgs.forEach(function (item) {\n        var reg = item.reg;\n        var val = item.val;\n\n        if (reg.test(result)) {\n            result = result.replace(reg, function () {\n                return val;\n            });\n        }\n    });\n\n    return result;\n};\n\n/*\n    droplist\n*/\nvar _emptyFn = function _emptyFn() {};\n\n// æé å½æ°\nfunction DropList(menu, opt) {\n    var _this = this;\n\n    // droplist æä¾éçèå\n    var editor = menu.editor;\n    this.menu = menu;\n    this.opt = opt;\n    // å®¹å¨\n    var $container = $('<div class=\"w-e-droplist\"></div>');\n\n    // æ é¢\n    var $title = opt.$title;\n    var titleHtml = void 0;\n    if ($title) {\n        // æ¿æ¢å¤è¯­è¨\n        titleHtml = $title.html();\n        titleHtml = replaceLang(editor, titleHtml);\n        $title.html(titleHtml);\n\n        $title.addClass('w-e-dp-title');\n        $container.append($title);\n    }\n\n    var list = opt.list || [];\n    var type = opt.type || 'list'; // 'list' åè¡¨å½¢å¼ï¼å¦âæ é¢âèåï¼ / 'inline-block' åç¶å½¢å¼ï¼å¦âé¢è²âèåï¼\n    var onClick = opt.onClick || _emptyFn;\n\n    // å å¥ DOM å¹¶ç»å®äºä»¶\n    var $list = $('<ul class=\"' + (type === 'list' ? 'w-e-list' : 'w-e-block') + '\"></ul>');\n    $container.append($list);\n    list.forEach(function (item) {\n        var $elem = item.$elem;\n\n        // æ¿æ¢å¤è¯­è¨\n        var elemHtml = $elem.html();\n        elemHtml = replaceLang(editor, elemHtml);\n        $elem.html(elemHtml);\n\n        var value = item.value;\n        var $li = $('<li class=\"w-e-item\"></li>');\n        if ($elem) {\n            $li.append($elem);\n            $list.append($li);\n            $li.on('click', function (e) {\n                onClick(value);\n\n                // éè\n                _this.hideTimeoutId = setTimeout(function () {\n                    _this.hide();\n                }, 0);\n            });\n        }\n    });\n\n    // ç»å®éèäºä»¶\n    $container.on('mouseleave', function (e) {\n        _this.hideTimeoutId = setTimeout(function () {\n            _this.hide();\n        }, 0);\n    });\n\n    // è®°å½å±æ§\n    this.$container = $container;\n\n    // åºæ¬å±æ§\n    this._rendered = false;\n    this._show = false;\n}\n\n// åå\nDropList.prototype = {\n    constructor: DropList,\n\n    // æ¾ç¤ºï¼æå¥DOMï¼\n    show: function show() {\n        if (this.hideTimeoutId) {\n            // æ¸é¤ä¹åçå®æ¶éè\n            clearTimeout(this.hideTimeoutId);\n        }\n\n        var menu = this.menu;\n        var $menuELem = menu.$elem;\n        var $container = this.$container;\n        if (this._show) {\n            return;\n        }\n        if (this._rendered) {\n            // æ¾ç¤º\n            $container.show();\n        } else {\n            // å å¥ DOM ä¹ååå®ä½ä½ç½®\n            var menuHeight = $menuELem.getSizeData().height || 0;\n            var width = this.opt.width || 100; // é»è®¤ä¸º 100\n            $container.css('margin-top', menuHeight + 'px').css('width', width + 'px');\n\n            // å å¥å° DOM\n            $menuELem.append($container);\n            this._rendered = true;\n        }\n\n        // ä¿®æ¹å±æ§\n        this._show = true;\n    },\n\n    // éèï¼ç§»é¤DOMï¼\n    hide: function hide() {\n        if (this.showTimeoutId) {\n            // æ¸é¤ä¹åçå®æ¶æ¾ç¤º\n            clearTimeout(this.showTimeoutId);\n        }\n\n        var $container = this.$container;\n        if (!this._show) {\n            return;\n        }\n        // éèå¹¶éæ¹å±æ§\n        $container.hide();\n        this._show = false;\n    }\n};\n\n/*\n    menu - header\n*/\n// æé å½æ°\nfunction Head(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-header\"></i></div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>è®¾ç½®æ é¢</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: [{ $elem: $('<h1>H1</h1>'), value: '<h1>' }, { $elem: $('<h2>H2</h2>'), value: '<h2>' }, { $elem: $('<h3>H3</h3>'), value: '<h3>' }, { $elem: $('<h4>H4</h4>'), value: '<h4>' }, { $elem: $('<h5>H5</h5>'), value: '<h5>' }, { $elem: $('<p>æ­£æ</p>'), value: '<p>' }],\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç Head å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nHead.prototype = {\n    constructor: Head,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n\n        var $selectionElem = editor.selection.getSelectionContainerElem();\n        if (editor.$textElem.equal($selectionElem)) {\n            // ä¸è½éä¸­å¤è¡æ¥è®¾ç½®æ é¢ï¼å¦åä¼åºç°é®é¢\n            // ä¾å¦éä¸­çæ¯ <p>xxx</p><p>yyy</p> æ¥è®¾ç½®æ é¢ï¼è®¾ç½®ä¹åä¼æä¸º <h1>xxx<br>yyy</h1> ä¸ç¬¦åé¢æ\n            return;\n        }\n\n        editor.cmd.do('formatBlock', value);\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        var reg = /^h/i;\n        var cmdValue = editor.cmd.queryCommandValue('formatBlock');\n        if (reg.test(cmdValue)) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - fontSize\n*/\n\n// æé å½æ°\nfunction FontSize(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-text-heigh\"></i></div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 160,\n        $title: $('<p>å­å·</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: [{ $elem: $('<span style=\"font-size: x-small;\">x-small</span>'), value: '1' }, { $elem: $('<span style=\"font-size: small;\">small</span>'), value: '2' }, { $elem: $('<span>normal</span>'), value: '3' }, { $elem: $('<span style=\"font-size: large;\">large</span>'), value: '4' }, { $elem: $('<span style=\"font-size: x-large;\">x-large</span>'), value: '5' }, { $elem: $('<span style=\"font-size: xx-large;\">xx-large</span>'), value: '6' }],\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç FontSize å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nFontSize.prototype = {\n    constructor: FontSize,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n        editor.cmd.do('fontSize', value);\n    }\n};\n\n/*\n    menu - fontName\n*/\n\n// æé å½æ°\nfunction FontName(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-font\"></i></div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // è·åéç½®çå­ä½\n    var config = editor.config;\n    var fontNames = config.fontNames || [];\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>å­ä½</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: fontNames.map(function (fontName) {\n            return { $elem: $('<span style=\"font-family: ' + fontName + ';\">' + fontName + '</span>'), value: fontName };\n        }),\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç FontName å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nFontName.prototype = {\n    constructor: FontName,\n\n    _command: function _command(value) {\n        var editor = this.editor;\n        editor.cmd.do('fontName', value);\n    }\n};\n\n/*\n    panel\n*/\n\nvar emptyFn = function emptyFn() {};\n\n// è®°å½å·²ç»æ¾ç¤º panel çèå\nvar _isCreatedPanelMenus = [];\n\n// æé å½æ°\nfunction Panel(menu, opt) {\n    this.menu = menu;\n    this.opt = opt;\n}\n\n// åå\nPanel.prototype = {\n    constructor: Panel,\n\n    // æ¾ç¤ºï¼æå¥DOMï¼\n    show: function show() {\n        var _this = this;\n\n        var menu = this.menu;\n        if (_isCreatedPanelMenus.indexOf(menu) >= 0) {\n            // è¯¥èåå·²ç»åå»ºäº panel ä¸è½ååå»º\n            return;\n        }\n\n        var editor = menu.editor;\n        var $body = $('body');\n        var $textContainerElem = editor.$textContainerElem;\n        var opt = this.opt;\n\n        // panel çå®¹å¨\n        var $container = $('<div class=\"w-e-panel-container\"></div>');\n        var width = opt.width || 300; // é»è®¤ 300px\n        $container.css('width', width + 'px').css('margin-left', (0 - width) / 2 + 'px');\n\n        // æ·»å å³é­æé®\n        var $closeBtn = $('<i class=\"w-e-icon-close w-e-panel-close\"></i>');\n        $container.append($closeBtn);\n        $closeBtn.on('click', function () {\n            _this.hide();\n        });\n\n        // åå¤ tabs å®¹å¨\n        var $tabTitleContainer = $('<ul class=\"w-e-panel-tab-title\"></ul>');\n        var $tabContentContainer = $('<div class=\"w-e-panel-tab-content\"></div>');\n        $container.append($tabTitleContainer).append($tabContentContainer);\n\n        // è®¾ç½®é«åº¦\n        var height = opt.height;\n        if (height) {\n            $tabContentContainer.css('height', height + 'px').css('overflow-y', 'auto');\n        }\n\n        // tabs\n        var tabs = opt.tabs || [];\n        var tabTitleArr = [];\n        var tabContentArr = [];\n        tabs.forEach(function (tab, tabIndex) {\n            if (!tab) {\n                return;\n            }\n            var title = tab.title || '';\n            var tpl = tab.tpl || '';\n\n            // æ¿æ¢å¤è¯­è¨\n            title = replaceLang(editor, title);\n            tpl = replaceLang(editor, tpl);\n\n            // æ·»å å° DOM\n            var $title = $('<li class=\"w-e-item\">' + title + '</li>');\n            $tabTitleContainer.append($title);\n            var $content = $(tpl);\n            $tabContentContainer.append($content);\n\n            // è®°å½å°åå­\n            $title._index = tabIndex;\n            tabTitleArr.push($title);\n            tabContentArr.push($content);\n\n            // è®¾ç½® active é¡¹\n            if (tabIndex === 0) {\n                $title._active = true;\n                $title.addClass('w-e-active');\n            } else {\n                $content.hide();\n            }\n\n            // ç»å® tab çäºä»¶\n            $title.on('click', function (e) {\n                if ($title._active) {\n                    return;\n                }\n                // éèææç tab\n                tabTitleArr.forEach(function ($title) {\n                    $title._active = false;\n                    $title.removeClass('w-e-active');\n                });\n                tabContentArr.forEach(function ($content) {\n                    $content.hide();\n                });\n\n                // æ¾ç¤ºå½åç tab\n                $title._active = true;\n                $title.addClass('w-e-active');\n                $content.show();\n            });\n        });\n\n        // ç»å®å³é­äºä»¶\n        $container.on('click', function (e) {\n            // ç¹å»æ¶é»æ­¢åæ³¡\n            e.stopPropagation();\n        });\n        $body.on('click', function (e) {\n            _this.hide();\n        });\n\n        // æ·»å å° DOM\n        $textContainerElem.append($container);\n\n        // ç»å® opt çäºä»¶ï¼åªææ·»å å° DOM ä¹åæè½ç»å®æå\n        tabs.forEach(function (tab, index) {\n            if (!tab) {\n                return;\n            }\n            var events = tab.events || [];\n            events.forEach(function (event) {\n                var selector = event.selector;\n                var type = event.type;\n                var fn = event.fn || emptyFn;\n                var $content = tabContentArr[index];\n                $content.find(selector).on(type, function (e) {\n                    e.stopPropagation();\n                    var needToHide = fn(e);\n                    // æ§è¡å®äºä»¶ä¹åï¼æ¯å¦è¦å³é­ panel\n                    if (needToHide) {\n                        _this.hide();\n                    }\n                });\n            });\n        });\n\n        // focus ç¬¬ä¸ä¸ª elem\n        var $inputs = $container.find('input[type=text],textarea');\n        if ($inputs.length) {\n            $inputs.get(0).focus();\n        }\n\n        // æ·»å å°å±æ§\n        this.$container = $container;\n\n        // éèå¶ä» panel\n        this._hideOtherPanels();\n        // è®°å½è¯¥ menu å·²ç»åå»ºäº panel\n        _isCreatedPanelMenus.push(menu);\n    },\n\n    // éèï¼ç§»é¤DOMï¼\n    hide: function hide() {\n        var menu = this.menu;\n        var $container = this.$container;\n        if ($container) {\n            $container.remove();\n        }\n\n        // å°è¯¥ menu è®°å½ä¸­ç§»é¤\n        _isCreatedPanelMenus = _isCreatedPanelMenus.filter(function (item) {\n            if (item === menu) {\n                return false;\n            } else {\n                return true;\n            }\n        });\n    },\n\n    // ä¸ä¸ª panel å±ç¤ºæ¶ï¼éèå¶ä» panel\n    _hideOtherPanels: function _hideOtherPanels() {\n        if (!_isCreatedPanelMenus.length) {\n            return;\n        }\n        _isCreatedPanelMenus.forEach(function (menu) {\n            var panel = menu.panel || {};\n            if (panel.hide) {\n                panel.hide();\n            }\n        });\n    }\n};\n\n/*\n    menu - link\n*/\n// æé å½æ°\nfunction Link(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-link\"></i></div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nLink.prototype = {\n    constructor: Link,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        var editor = this.editor;\n        var $linkelem = void 0;\n\n        if (this._active) {\n            // å½åéåºå¨é¾æ¥éé¢\n            $linkelem = editor.selection.getSelectionContainerElem();\n            if (!$linkelem) {\n                return;\n            }\n            // å°è¯¥åç´ é½åå«å¨éåä¹åï¼ä»¥ä¾¿åé¢æ´ä½æ¿æ¢\n            editor.selection.createRangeByElem($linkelem);\n            editor.selection.restoreSelection();\n            // æ¾ç¤º panel\n            this._createPanel($linkelem.text(), $linkelem.attr('href'));\n        } else {\n            // å½åéåºä¸å¨é¾æ¥éé¢\n            if (editor.selection.isSelectionEmpty()) {\n                // éåºæ¯ç©ºçï¼æªéä¸­åå®¹\n                this._createPanel('', '');\n            } else {\n                // éä¸­åå®¹äº\n                this._createPanel(editor.selection.getSelectionText(), '');\n            }\n        }\n    },\n\n    // åå»º panel\n    _createPanel: function _createPanel(text, link) {\n        var _this = this;\n\n        // panel ä¸­éè¦ç¨å°çid\n        var inputLinkId = getRandom('input-link');\n        var inputTextId = getRandom('input-text');\n        var btnOkId = getRandom('btn-ok');\n        var btnDelId = getRandom('btn-del');\n\n        // æ¯å¦æ¾ç¤ºâå é¤é¾æ¥â\n        var delBtnDisplay = this._active ? 'inline-block' : 'none';\n\n        // åå§åå¹¶æ¾ç¤º panel\n        var panel = new Panel(this, {\n            width: 300,\n            // panel ä¸­å¯åå«å¤ä¸ª tab\n            tabs: [{\n                // tab çæ é¢\n                title: 'é¾æ¥',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                            <input id=\"' + inputTextId + '\" type=\"text\" class=\"block\" value=\"' + text + '\" placeholder=\"\\u94FE\\u63A5\\u6587\\u5B57\"/></td>\\n                            <input id=\"' + inputLinkId + '\" type=\"text\" class=\"block\" value=\"' + link + '\" placeholder=\"http://...\"/></td>\\n                            <div class=\"w-e-button-container\">\\n                                <button id=\"' + btnOkId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                                <button id=\"' + btnDelId + '\" class=\"gray right\" style=\"display:' + delBtnDisplay + '\">\\u5220\\u9664\\u94FE\\u63A5</button>\\n                            </div>\\n                        </div>',\n                // äºä»¶ç»å®\n                events: [\n                // æå¥é¾æ¥\n                {\n                    selector: '#' + btnOkId,\n                    type: 'click',\n                    fn: function fn() {\n                        // æ§è¡æå¥é¾æ¥\n                        var $link = $('#' + inputLinkId);\n                        var $text = $('#' + inputTextId);\n                        var link = $link.val();\n                        var text = $text.val();\n                        _this._insertLink(text, link);\n\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                },\n                // å é¤é¾æ¥\n                {\n                    selector: '#' + btnDelId,\n                    type: 'click',\n                    fn: function fn() {\n                        // æ§è¡å é¤é¾æ¥\n                        _this._delLink();\n\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }] // tab end\n            }] // tabs end\n        });\n\n        // æ¾ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // å é¤å½åé¾æ¥\n    _delLink: function _delLink() {\n        if (!this._active) {\n            return;\n        }\n        var editor = this.editor;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        var selectionText = editor.selection.getSelectionText();\n        editor.cmd.do('insertHTML', '<span>' + selectionText + '</span>');\n    },\n\n    // æå¥é¾æ¥\n    _insertLink: function _insertLink(text, link) {\n        var editor = this.editor;\n        var config = editor.config;\n        var linkCheck = config.linkCheck;\n        var checkResult = true; // é»è®¤ä¸º true\n        if (linkCheck && typeof linkCheck === 'function') {\n            checkResult = linkCheck(text, link);\n        }\n        if (checkResult === true) {\n            editor.cmd.do('insertHTML', '<a href=\"' + link + '\" target=\"_blank\">' + text + '</a>');\n        } else {\n            alert(checkResult);\n        }\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        if ($selectionELem.getNodeName() === 'A') {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    italic-menu\n*/\n// æé å½æ°\nfunction Italic(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-italic\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nItalic.prototype = {\n    constructor: Italic,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n\n        if (isSeleEmpty) {\n            // éåºæ¯ç©ºçï¼æå¥å¹¶éä¸­ä¸ä¸ªâç©ºç½â\n            editor.selection.createEmptyRange();\n        }\n\n        // æ§è¡ italic å½ä»¤\n        editor.cmd.do('italic');\n\n        if (isSeleEmpty) {\n            // éè¦å°éåæå èµ·æ¥\n            editor.selection.collapseRange();\n            editor.selection.restoreSelection();\n        }\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor.cmd.queryCommandState('italic')) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    redo-menu\n*/\n// æé å½æ°\nfunction Redo(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-redo\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nRedo.prototype = {\n    constructor: Redo,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n\n        // æ§è¡ redo å½ä»¤\n        editor.cmd.do('redo');\n    }\n};\n\n/*\n    strikeThrough-menu\n*/\n// æé å½æ°\nfunction StrikeThrough(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-strikethrough\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nStrikeThrough.prototype = {\n    constructor: StrikeThrough,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n\n        if (isSeleEmpty) {\n            // éåºæ¯ç©ºçï¼æå¥å¹¶éä¸­ä¸ä¸ªâç©ºç½â\n            editor.selection.createEmptyRange();\n        }\n\n        // æ§è¡ strikeThrough å½ä»¤\n        editor.cmd.do('strikeThrough');\n\n        if (isSeleEmpty) {\n            // éè¦å°éåæå èµ·æ¥\n            editor.selection.collapseRange();\n            editor.selection.restoreSelection();\n        }\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor.cmd.queryCommandState('strikeThrough')) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    underline-menu\n*/\n// æé å½æ°\nfunction Underline(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-underline\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nUnderline.prototype = {\n    constructor: Underline,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n\n        if (isSeleEmpty) {\n            // éåºæ¯ç©ºçï¼æå¥å¹¶éä¸­ä¸ä¸ªâç©ºç½â\n            editor.selection.createEmptyRange();\n        }\n\n        // æ§è¡ underline å½ä»¤\n        editor.cmd.do('underline');\n\n        if (isSeleEmpty) {\n            // éè¦å°éåæå èµ·æ¥\n            editor.selection.collapseRange();\n            editor.selection.restoreSelection();\n        }\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor.cmd.queryCommandState('underline')) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    undo-menu\n*/\n// æé å½æ°\nfunction Undo(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-undo\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nUndo.prototype = {\n    constructor: Undo,\n\n    // ç¹å»äºä»¶\n    onClick: function onClick(e) {\n        // ç¹å»èåå°è§¦åè¿é\n\n        var editor = this.editor;\n\n        // æ§è¡ undo å½ä»¤\n        editor.cmd.do('undo');\n    }\n};\n\n/*\n    menu - list\n*/\n// æé å½æ°\nfunction List(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-list2\"></i></div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 120,\n        $title: $('<p>è®¾ç½®åè¡¨</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: [{ $elem: $('<span><i class=\"w-e-icon-list-numbered\"></i> æåºåè¡¨</span>'), value: 'insertOrderedList' }, { $elem: $('<span><i class=\"w-e-icon-list2\"></i> æ åºåè¡¨</span>'), value: 'insertUnorderedList' }],\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç List å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nList.prototype = {\n    constructor: List,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        editor.selection.restoreSelection();\n        if (editor.cmd.queryCommandState(value)) {\n            return;\n        }\n        editor.cmd.do(value);\n\n        // éªè¯åè¡¨æ¯å¦è¢«åè£¹å¨ <p> ä¹å\n        var $selectionElem = editor.selection.getSelectionContainerElem();\n        if ($selectionElem.getNodeName() === 'LI') {\n            $selectionElem = $selectionElem.parent();\n        }\n        if (/^ol|ul$/i.test($selectionElem.getNodeName()) === false) {\n            return;\n        }\n        if ($selectionElem.equal($textElem)) {\n            // è¯ææ¯é¡¶çº§æ ç­¾ï¼æ²¡æè¢« <p> åè£¹\n            return;\n        }\n        var $parent = $selectionElem.parent();\n        if ($parent.equal($textElem)) {\n            // $parent æ¯é¡¶çº§æ ç­¾ï¼ä¸è½å é¤\n            return;\n        }\n\n        $selectionElem.insertAfter($parent);\n        $parent.remove();\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor.cmd.queryCommandState('insertUnOrderedList') || editor.cmd.queryCommandState('insertOrderedList')) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - justify\n*/\n// æé å½æ°\nfunction Justify(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-paragraph-left\"></i></div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>å¯¹é½æ¹å¼</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: [{ $elem: $('<span><i class=\"icon w-e-icon w-e-icon-paragraph-left\"></i> é å·¦</span>'), value: 'justifyLeft' }, { $elem: $('<span><i class=\"icon w-e-icon w-e-icon-paragraph-center\"></i> å±ä¸­</span>'), value: 'justifyCenter' }, { $elem: $('<span><i class=\"icon w-e-icon w-e-icon-paragraph-right\"></i> é å³</span>'), value: 'justifyRight' }],\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç List å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nJustify.prototype = {\n    constructor: Justify,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n        editor.cmd.do(value);\n    }\n};\n\n/*\n    menu - Forecolor\n*/\n// æé å½æ°\nfunction ForeColor(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-pencil2\"></i></div>');\n    this.type = 'droplist';\n\n    // è·åéç½®çé¢è²\n    var config = editor.config;\n    var colors = config.colors || [];\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>æå­é¢è²</p>'),\n        type: 'inline-block', // droplist åå®¹ä»¥ block å½¢å¼å±ç¤º\n        list: colors.map(function (color) {\n            return { $elem: $('<i style=\"color:' + color + ';\" class=\"icon w-e-icon w-e-icon-pencil2\"></i>'), value: color };\n        }),\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç ForeColor å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nForeColor.prototype = {\n    constructor: ForeColor,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n        editor.cmd.do('foreColor', value);\n    }\n};\n\n/*\n    menu - BackColor\n*/\n// æé å½æ°\nfunction BackColor(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-paint-brush\"></i></div>');\n    this.type = 'droplist';\n\n    // è·åéç½®çé¢è²\n    var config = editor.config;\n    var colors = config.colors || [];\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>èæ¯è²</p>'),\n        type: 'inline-block', // droplist åå®¹ä»¥ block å½¢å¼å±ç¤º\n        list: colors.map(function (color) {\n            return { $elem: $('<i style=\"color:' + color + ';\" class=\"icon w-e-icon w-e-icon-paint-brush\"></i>'), value: color };\n        }),\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç BackColor å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nBackColor.prototype = {\n    constructor: BackColor,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(value) {\n        var editor = this.editor;\n        editor.cmd.do('backColor', value);\n    }\n};\n\n/*\n    menu - quote\n*/\n// æé å½æ°\nfunction Quote(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"w-e-icon-quotes-left\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nQuote.prototype = {\n    constructor: Quote,\n\n    onClick: function onClick(e) {\n        var editor = this.editor;\n        var $selectionElem = editor.selection.getSelectionContainerElem();\n        var nodeName = $selectionElem.getNodeName();\n\n        if (!UA.isIE()) {\n            if (nodeName === 'BLOCKQUOTE') {\n                // æ¤é quote\n                editor.cmd.do('formatBlock', '<P>');\n            } else {\n                // è½¬æ¢ä¸º quote\n                editor.cmd.do('formatBlock', '<BLOCKQUOTE>');\n            }\n            return;\n        }\n\n        // IE ä¸­ä¸æ¯æ formatBlock <BLOCKQUOTE> ï¼è¦ç¨å¶ä»æ¹å¼å¼å®¹\n        var content = void 0,\n            $targetELem = void 0;\n        if (nodeName === 'P') {\n            // å° P è½¬æ¢ä¸º quote\n            content = $selectionElem.text();\n            $targetELem = $('<blockquote>' + content + '</blockquote>');\n            $targetELem.insertAfter($selectionElem);\n            $selectionElem.remove();\n            return;\n        }\n        if (nodeName === 'BLOCKQUOTE') {\n            // æ¤é quote\n            content = $selectionElem.text();\n            $targetELem = $('<p>' + content + '</p>');\n            $targetELem.insertAfter($selectionElem);\n            $selectionElem.remove();\n        }\n    },\n\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        var reg = /^BLOCKQUOTE$/i;\n        var cmdValue = editor.cmd.queryCommandValue('formatBlock');\n        if (reg.test(cmdValue)) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - code\n*/\n// æé å½æ°\nfunction Code(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-terminal\"></i>\\n        </div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nCode.prototype = {\n    constructor: Code,\n\n    onClick: function onClick(e) {\n        var editor = this.editor;\n        var $startElem = editor.selection.getSelectionStartElem();\n        var $endElem = editor.selection.getSelectionEndElem();\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n        var selectionText = editor.selection.getSelectionText();\n        var $code = void 0;\n\n        if (!$startElem.equal($endElem)) {\n            // è·¨åç´ éæ©ï¼ä¸åå¤ç\n            editor.selection.restoreSelection();\n            return;\n        }\n        if (!isSeleEmpty) {\n            // éåä¸æ¯ç©ºï¼ç¨ <code> åè£¹å³å¯\n            $code = $('<code>' + selectionText + '</code>');\n            editor.cmd.do('insertElem', $code);\n            editor.selection.createRangeByElem($code, false);\n            editor.selection.restoreSelection();\n            return;\n        }\n\n        // éåæ¯ç©ºï¼ä¸æ²¡æå¤¸åç´ éæ©ï¼åæå¥ <pre><code></code></prev>\n        if (this._active) {\n            // éä¸­ç¶æï¼å°ç¼è¾åå®¹\n            this._createPanel($startElem.html());\n        } else {\n            // æªéä¸­ç¶æï¼å°åå»ºåå®¹\n            this._createPanel();\n        }\n    },\n\n    _createPanel: function _createPanel(value) {\n        var _this = this;\n\n        // value - è¦ç¼è¾çåå®¹\n        value = value || '';\n        var type = !value ? 'new' : 'edit';\n        var textId = getRandom('texxt');\n        var btnId = getRandom('btn');\n\n        var panel = new Panel(this, {\n            width: 500,\n            // ä¸ä¸ª Panel åå«å¤ä¸ª tab\n            tabs: [{\n                // æ é¢\n                title: 'æå¥ä»£ç ',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                        <textarea id=\"' + textId + '\" style=\"height:145px;;\">' + value + '</textarea>\\n                        <div class=\"w-e-button-container\">\\n                            <button id=\"' + btnId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                        </div>\\n                    <div>',\n                // äºä»¶ç»å®\n                events: [\n                // æå¥ä»£ç \n                {\n                    selector: '#' + btnId,\n                    type: 'click',\n                    fn: function fn() {\n                        var $text = $('#' + textId);\n                        var text = $text.val() || $text.html();\n                        text = replaceHtmlSymbol(text);\n                        if (type === 'new') {\n                            // æ°æå¥\n                            _this._insertCode(text);\n                        } else {\n                            // ç¼è¾æ´æ°\n                            _this._updateCode(text);\n                        }\n\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }] // first tab end\n            }] // tabs end\n        }); // new Panel end\n\n        // æ¾ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // æå¥ä»£ç \n    _insertCode: function _insertCode(value) {\n        var editor = this.editor;\n        editor.cmd.do('insertHTML', '<pre><code>' + value + '</code></pre><p class=\"p\"><br></p>');\n    },\n\n    // æ´æ°ä»£ç \n    _updateCode: function _updateCode(value) {\n        var editor = this.editor;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        $selectionELem.html(value);\n        editor.selection.restoreSelection();\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        var $parentElem = $selectionELem.parent();\n        if ($selectionELem.getNodeName() === 'CODE' && $parentElem.getNodeName() === 'PRE') {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - emoticon\n*/\n// æé å½æ°\nfunction Emoticon(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-happy\"></i>\\n        </div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nEmoticon.prototype = {\n    constructor: Emoticon,\n\n    onClick: function onClick() {\n        this._createPanel();\n    },\n\n    _createPanel: function _createPanel() {\n        var _this = this;\n\n        var editor = this.editor;\n        var config = editor.config;\n        // è·åè¡¨æéç½®\n        var emotions = config.emotions || [];\n\n        // åå»ºè¡¨æ dropPanel çéç½®\n        var tabConfig = [];\n        emotions.forEach(function (emotData) {\n            var emotType = emotData.type;\n            var content = emotData.content || [];\n\n            // è¿ä¸ç»è¡¨ææç»æ¼æ¥åºæ¥ç html\n            var faceHtml = '';\n\n            // emoji è¡¨æ\n            if (emotType === 'emoji') {\n                content.forEach(function (item) {\n                    if (item) {\n                        faceHtml += '<span class=\"w-e-item\">' + item + '</span>';\n                    }\n                });\n            }\n            // å¾çè¡¨æ\n            if (emotType === 'image') {\n                content.forEach(function (item) {\n                    var src = item.src;\n                    var alt = item.alt;\n                    if (src) {\n                        // å ä¸ä¸ª data-w-e å±æ§ï¼ç¹å»å¾ççæ¶åä¸åæç¤ºç¼è¾å¾ç\n                        faceHtml += '<span class=\"w-e-item\"><img src=\"' + src + '\" alt=\"' + alt + '\" data-w-e=\"1\"/></span>';\n                    }\n                });\n            }\n\n            tabConfig.push({\n                title: emotData.title,\n                tpl: '<div class=\"w-e-emoticon-container\">' + faceHtml + '</div>',\n                events: [{\n                    selector: 'span.w-e-item',\n                    type: 'click',\n                    fn: function fn(e) {\n                        var target = e.target;\n                        var $target = $(target);\n                        var nodeName = $target.getNodeName();\n\n                        var insertHtml = void 0;\n                        if (nodeName === 'IMG') {\n                            // æå¥å¾ç\n                            insertHtml = $target.parent().html();\n                        } else {\n                            // æå¥ emoji\n                            insertHtml = '<span>' + $target.html() + '</span>';\n                        }\n\n                        _this._insert(insertHtml);\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }]\n            });\n        });\n\n        var panel = new Panel(this, {\n            width: 300,\n            height: 200,\n            // ä¸ä¸ª Panel åå«å¤ä¸ª tab\n            tabs: tabConfig\n        });\n\n        // æ¾ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // æå¥è¡¨æ\n    _insert: function _insert(emotHtml) {\n        var editor = this.editor;\n        editor.cmd.do('insertHTML', emotHtml);\n    }\n};\n\n/*\n    menu - table\n*/\n// æé å½æ°\nfunction Table(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-table2\"></i></div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nTable.prototype = {\n    constructor: Table,\n\n    onClick: function onClick() {\n        if (this._active) {\n            // ç¼è¾ç°æè¡¨æ ¼\n            this._createEditPanel();\n        } else {\n            // æå¥æ°è¡¨æ ¼\n            this._createInsertPanel();\n        }\n    },\n\n    // åå»ºæå¥æ°è¡¨æ ¼ç panel\n    _createInsertPanel: function _createInsertPanel() {\n        var _this = this;\n\n        // ç¨å°ç id\n        var btnInsertId = getRandom('btn');\n        var textRowNum = getRandom('row');\n        var textColNum = getRandom('col');\n\n        var panel = new Panel(this, {\n            width: 250,\n            // panel åå«å¤ä¸ª tab\n            tabs: [{\n                // æ é¢\n                title: 'æå¥è¡¨æ ¼',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                        <p style=\"text-align:left; padding:5px 0;\">\\n                            \\u521B\\u5EFA\\n                            <input id=\"' + textRowNum + '\" type=\"text\" value=\"5\" style=\"width:40px;text-align:center;\"/>\\n                            \\u884C\\n                            <input id=\"' + textColNum + '\" type=\"text\" value=\"5\" style=\"width:40px;text-align:center;\"/>\\n                            \\u5217\\u7684\\u8868\\u683C\\n                        </p>\\n                        <div class=\"w-e-button-container\">\\n                            <button id=\"' + btnInsertId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                        </div>\\n                    </div>',\n                // äºä»¶ç»å®\n                events: [{\n                    // ç¹å»æé®ï¼æå¥è¡¨æ ¼\n                    selector: '#' + btnInsertId,\n                    type: 'click',\n                    fn: function fn() {\n                        var rowNum = parseInt($('#' + textRowNum).val());\n                        var colNum = parseInt($('#' + textColNum).val());\n\n                        if (rowNum && colNum && rowNum > 0 && colNum > 0) {\n                            // form æ°æ®ææ\n                            _this._insert(rowNum, colNum);\n                        }\n\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }] // first tab end\n            }] // tabs end\n        }); // panel end\n\n        // å±ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // æå¥è¡¨æ ¼\n    _insert: function _insert(rowNum, colNum) {\n        // æ¼æ¥ table æ¨¡æ¿\n        var r = void 0,\n            c = void 0;\n        var html = '<table border=\"0\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">';\n        for (r = 0; r < rowNum; r++) {\n            html += '<tr>';\n            if (r === 0) {\n                for (c = 0; c < colNum; c++) {\n                    html += '<th>&nbsp;</th>';\n                }\n            } else {\n                for (c = 0; c < colNum; c++) {\n                    html += '<td>&nbsp;</td>';\n                }\n            }\n            html += '</tr>';\n        }\n        html += '</table><p><br></p>';\n\n        // æ§è¡å½ä»¤\n        var editor = this.editor;\n        editor.cmd.do('insertHTML', html);\n\n        // é²æ­¢ firefox ä¸åºç° resize çæ§å¶ç¹\n        editor.cmd.do('enableObjectResizing', false);\n        editor.cmd.do('enableInlineTableEditing', false);\n    },\n\n    // åå»ºç¼è¾è¡¨æ ¼ç panel\n    _createEditPanel: function _createEditPanel() {\n        var _this2 = this;\n\n        // å¯ç¨ç id\n        var addRowBtnId = getRandom('add-row');\n        var addColBtnId = getRandom('add-col');\n        var delRowBtnId = getRandom('del-row');\n        var delColBtnId = getRandom('del-col');\n        var delTableBtnId = getRandom('del-table');\n\n        // åå»º panel å¯¹è±¡\n        var panel = new Panel(this, {\n            width: 320,\n            // panel åå«å¤ä¸ª tab\n            tabs: [{\n                // æ é¢\n                title: 'ç¼è¾è¡¨æ ¼',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                        <div class=\"w-e-button-container\" style=\"border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;\">\\n                            <button id=\"' + addRowBtnId + '\" class=\"left\">\\u589E\\u52A0\\u884C</button>\\n                            <button id=\"' + delRowBtnId + '\" class=\"red left\">\\u5220\\u9664\\u884C</button>\\n                            <button id=\"' + addColBtnId + '\" class=\"left\">\\u589E\\u52A0\\u5217</button>\\n                            <button id=\"' + delColBtnId + '\" class=\"red left\">\\u5220\\u9664\\u5217</button>\\n                        </div>\\n                        <div class=\"w-e-button-container\">\\n                            <button id=\"' + delTableBtnId + '\" class=\"gray left\">\\u5220\\u9664\\u8868\\u683C</button>\\n                        </dv>\\n                    </div>',\n                // äºä»¶ç»å®\n                events: [{\n                    // å¢å è¡\n                    selector: '#' + addRowBtnId,\n                    type: 'click',\n                    fn: function fn() {\n                        _this2._addRow();\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }, {\n                    // å¢å å\n                    selector: '#' + addColBtnId,\n                    type: 'click',\n                    fn: function fn() {\n                        _this2._addCol();\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }, {\n                    // å é¤è¡\n                    selector: '#' + delRowBtnId,\n                    type: 'click',\n                    fn: function fn() {\n                        _this2._delRow();\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }, {\n                    // å é¤å\n                    selector: '#' + delColBtnId,\n                    type: 'click',\n                    fn: function fn() {\n                        _this2._delCol();\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }, {\n                    // å é¤è¡¨æ ¼\n                    selector: '#' + delTableBtnId,\n                    type: 'click',\n                    fn: function fn() {\n                        _this2._delTable();\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }]\n            }]\n        });\n        // æ¾ç¤º panel\n        panel.show();\n    },\n\n    // è·åéä¸­çååæ ¼çä½ç½®ä¿¡æ¯\n    _getLocationData: function _getLocationData() {\n        var result = {};\n        var editor = this.editor;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        var nodeName = $selectionELem.getNodeName();\n        if (nodeName !== 'TD' && nodeName !== 'TH') {\n            return;\n        }\n\n        // è·å td index\n        var $tr = $selectionELem.parent();\n        var $tds = $tr.children();\n        var tdLength = $tds.length;\n        $tds.forEach(function (td, index) {\n            if (td === $selectionELem[0]) {\n                // è®°å½å¹¶è·³åºå¾ªç¯\n                result.td = {\n                    index: index,\n                    elem: td,\n                    length: tdLength\n                };\n                return false;\n            }\n        });\n\n        // è·å tr index\n        var $tbody = $tr.parent();\n        var $trs = $tbody.children();\n        var trLength = $trs.length;\n        $trs.forEach(function (tr, index) {\n            if (tr === $tr[0]) {\n                // è®°å½å¹¶è·³åºå¾ªç¯\n                result.tr = {\n                    index: index,\n                    elem: tr,\n                    length: trLength\n                };\n                return false;\n            }\n        });\n\n        // è¿åç»æ\n        return result;\n    },\n\n    // å¢å è¡\n    _addRow: function _addRow() {\n        // è·åå½åååæ ¼çä½ç½®ä¿¡æ¯\n        var locationData = this._getLocationData();\n        if (!locationData) {\n            return;\n        }\n        var trData = locationData.tr;\n        var $currentTr = $(trData.elem);\n        var tdData = locationData.td;\n        var tdLength = tdData.length;\n\n        // æ¼æ¥å³å°æå¥çå­ç¬¦ä¸²\n        var newTr = document.createElement('tr');\n        var tpl = '',\n            i = void 0;\n        for (i = 0; i < tdLength; i++) {\n            tpl += '<td>&nbsp;</td>';\n        }\n        newTr.innerHTML = tpl;\n        // æå¥\n        $(newTr).insertAfter($currentTr);\n    },\n\n    // å¢å å\n    _addCol: function _addCol() {\n        // è·åå½åååæ ¼çä½ç½®ä¿¡æ¯\n        var locationData = this._getLocationData();\n        if (!locationData) {\n            return;\n        }\n        var trData = locationData.tr;\n        var tdData = locationData.td;\n        var tdIndex = tdData.index;\n        var $currentTr = $(trData.elem);\n        var $trParent = $currentTr.parent();\n        var $trs = $trParent.children();\n\n        // éåææè¡\n        $trs.forEach(function (tr) {\n            var $tr = $(tr);\n            var $tds = $tr.children();\n            var $currentTd = $tds.get(tdIndex);\n            var name = $currentTd.getNodeName().toLowerCase();\n\n            // new ä¸ä¸ª tdï¼å¹¶æå¥\n            var newTd = document.createElement(name);\n            $(newTd).insertAfter($currentTd);\n        });\n    },\n\n    // å é¤è¡\n    _delRow: function _delRow() {\n        // è·åå½åååæ ¼çä½ç½®ä¿¡æ¯\n        var locationData = this._getLocationData();\n        if (!locationData) {\n            return;\n        }\n        var trData = locationData.tr;\n        var $currentTr = $(trData.elem);\n        $currentTr.remove();\n    },\n\n    // å é¤å\n    _delCol: function _delCol() {\n        // è·åå½åååæ ¼çä½ç½®ä¿¡æ¯\n        var locationData = this._getLocationData();\n        if (!locationData) {\n            return;\n        }\n        var trData = locationData.tr;\n        var tdData = locationData.td;\n        var tdIndex = tdData.index;\n        var $currentTr = $(trData.elem);\n        var $trParent = $currentTr.parent();\n        var $trs = $trParent.children();\n\n        // éåææè¡\n        $trs.forEach(function (tr) {\n            var $tr = $(tr);\n            var $tds = $tr.children();\n            var $currentTd = $tds.get(tdIndex);\n            // å é¤\n            $currentTd.remove();\n        });\n    },\n\n    // å é¤è¡¨æ ¼\n    _delTable: function _delTable() {\n        var editor = this.editor;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        var $table = $selectionELem.parentUntil('table');\n        if (!$table) {\n            return;\n        }\n        $table.remove();\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        var $selectionELem = editor.selection.getSelectionContainerElem();\n        if (!$selectionELem) {\n            return;\n        }\n        var nodeName = $selectionELem.getNodeName();\n        if (nodeName === 'TD' || nodeName === 'TH') {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - video\n*/\n// æé å½æ°\nfunction Video(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-play\"></i></div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nVideo.prototype = {\n    constructor: Video,\n\n    onClick: function onClick() {\n        this._createPanel();\n    },\n\n    _createPanel: function _createPanel() {\n        var _this = this;\n\n        // åå»º id\n        var textValId = getRandom('text-val');\n        var btnId = getRandom('btn');\n\n        // åå»º panel\n        var panel = new Panel(this, {\n            width: 350,\n            // ä¸ä¸ª panel å¤ä¸ª tab\n            tabs: [{\n                // æ é¢\n                title: 'æå¥è§é¢',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                        <input id=\"' + textValId + '\" type=\"text\" class=\"block\" placeholder=\"\\u683C\\u5F0F\\u5982\\uFF1A<iframe src=... ></iframe>\"/>\\n                        <div class=\"w-e-button-container\">\\n                            <button id=\"' + btnId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                        </div>\\n                    </div>',\n                // äºä»¶ç»å®\n                events: [{\n                    selector: '#' + btnId,\n                    type: 'click',\n                    fn: function fn() {\n                        var $text = $('#' + textValId);\n                        var val = $text.val().trim();\n\n                        // æµè¯ç¨è§é¢å°å\n                        // <iframe height=498 width=510 src='http://player.youku.com/embed/XMjcwMzc3MzM3Mg==' frameborder=0 'allowfullscreen'></iframe>\n\n                        if (val) {\n                            // æå¥è§é¢\n                            _this._insert(val);\n                        }\n\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }] // first tab end\n            }] // tabs end\n        }); // panel end\n\n        // æ¾ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // æå¥è§é¢\n    _insert: function _insert(val) {\n        var editor = this.editor;\n        editor.cmd.do('insertHTML', val + '<p><br></p>');\n    }\n};\n\n/*\n    menu - img\n*/\n// æé å½æ°\nfunction Image(editor) {\n    this.editor = editor;\n    var imgMenuId = getRandom('w-e-img');\n    this.$elem = $('<div class=\"w-e-menu\" id=\"' + imgMenuId + '\"><i class=\"icon w-e-icon w-e-icon-image\"></i></div>');\n    editor.imgMenuId = imgMenuId;\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nImage.prototype = {\n    constructor: Image,\n\n    onClick: function onClick() {\n        var editor = this.editor;\n        var config = editor.config;\n        if (config.qiniu) {\n            return;\n        }\n        if (this._active) {\n            this._createEditPanel();\n        } else {\n            this._createInsertPanel();\n        }\n    },\n\n    _createEditPanel: function _createEditPanel() {\n        var editor = this.editor;\n\n        // id\n        var width30 = getRandom('width-30');\n        var width50 = getRandom('width-50');\n        var width100 = getRandom('width-100');\n        var delBtn = getRandom('del-btn');\n\n        // tab éç½®\n        var tabsConfig = [{\n            title: 'ç¼è¾å¾ç',\n            tpl: '<div>\\n                    <div class=\"w-e-button-container\" style=\"border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;\">\\n                        <span style=\"float:left;font-size:14px;margin:4px 5px 0 5px;color:#333;\">\\u6700\\u5927\\u5BBD\\u5EA6\\uFF1A</span>\\n                        <button id=\"' + width30 + '\" class=\"left\">30%</button>\\n                        <button id=\"' + width50 + '\" class=\"left\">50%</button>\\n                        <button id=\"' + width100 + '\" class=\"left\">100%</button>\\n                    </div>\\n                    <div class=\"w-e-button-container\">\\n                        <button id=\"' + delBtn + '\" class=\"gray left\">\\u5220\\u9664\\u56FE\\u7247</button>\\n                    </dv>\\n                </div>',\n            events: [{\n                selector: '#' + width30,\n                type: 'click',\n                fn: function fn() {\n                    var $img = editor._selectedImg;\n                    if ($img) {\n                        $img.css('max-width', '30%');\n                    }\n                    // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                    return true;\n                }\n            }, {\n                selector: '#' + width50,\n                type: 'click',\n                fn: function fn() {\n                    var $img = editor._selectedImg;\n                    if ($img) {\n                        $img.css('max-width', '50%');\n                    }\n                    // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                    return true;\n                }\n            }, {\n                selector: '#' + width100,\n                type: 'click',\n                fn: function fn() {\n                    var $img = editor._selectedImg;\n                    if ($img) {\n                        $img.css('max-width', '100%');\n                    }\n                    // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                    return true;\n                }\n            }, {\n                selector: '#' + delBtn,\n                type: 'click',\n                fn: function fn() {\n                    var $img = editor._selectedImg;\n                    if ($img) {\n                        $img.remove();\n                    }\n                    // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                    return true;\n                }\n            }]\n        }];\n\n        // åå»º panel å¹¶æ¾ç¤º\n        var panel = new Panel(this, {\n            width: 300,\n            tabs: tabsConfig\n        });\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    _createInsertPanel: function _createInsertPanel() {\n        var editor = this.editor;\n        var uploadImg = editor.uploadImg;\n        var config = editor.config;\n\n        // id\n        var upTriggerId = getRandom('up-trigger');\n        var upFileId = getRandom('up-file');\n        var linkUrlId = getRandom('link-url');\n        var linkBtnId = getRandom('link-btn');\n\n        // tabs çéç½®\n        var tabsConfig = [{\n            title: 'ä¸ä¼ å¾ç',\n            tpl: '<div class=\"w-e-up-img-container\">\\n                    <div id=\"' + upTriggerId + '\" class=\"w-e-up-btn\">\\n                        <i class=\"w-e-icon-upload2\"></i>\\n                    </div>\\n                    <div style=\"display:none;\">\\n                        <input id=\"' + upFileId + '\" type=\"file\" multiple=\"multiple\" accept=\"image/jpg,image/jpeg,image/png,image/gif,image/bmp\"/>\\n                    </div>\\n                </div>',\n            events: [{\n                // è§¦åéæ©å¾ç\n                selector: '#' + upTriggerId,\n                type: 'click',\n                fn: function fn() {\n                    var $file = $('#' + upFileId);\n                    var fileElem = $file[0];\n                    if (fileElem) {\n                        fileElem.click();\n                    } else {\n                        // è¿å true å¯å³é­ panel\n                        return true;\n                    }\n                }\n            }, {\n                // éæ©å¾çå®æ¯\n                selector: '#' + upFileId,\n                type: 'change',\n                fn: function fn() {\n                    var $file = $('#' + upFileId);\n                    var fileElem = $file[0];\n                    if (!fileElem) {\n                        // è¿å true å¯å³é­ panel\n                        return true;\n                    }\n\n                    // è·åéä¸­ç file å¯¹è±¡åè¡¨\n                    var fileList = fileElem.files;\n                    if (fileList.length) {\n                        uploadImg.uploadImg(fileList);\n                    }\n\n                    // è¿å true å¯å³é­ panel\n                    return true;\n                }\n            }]\n        }, // first tab end\n        {\n            title: 'ç½ç»å¾ç',\n            tpl: '<div>\\n                    <input id=\"' + linkUrlId + '\" type=\"text\" class=\"block\" placeholder=\"\\u56FE\\u7247\\u94FE\\u63A5\"/></td>\\n                    <div class=\"w-e-button-container\">\\n                        <button id=\"' + linkBtnId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                    </div>\\n                </div>',\n            events: [{\n                selector: '#' + linkBtnId,\n                type: 'click',\n                fn: function fn() {\n                    var $linkUrl = $('#' + linkUrlId);\n                    var url = $linkUrl.val().trim();\n\n                    if (url) {\n                        uploadImg.insertLinkImg(url);\n                    }\n\n                    // è¿å true è¡¨ç¤ºå½æ°æ§è¡ç»æä¹åå³é­ panel\n                    return true;\n                }\n            }] // second tab end\n        }]; // tabs end\n\n        // å¤æ­ tabs çæ¾ç¤º\n        var tabsConfigResult = [];\n        if ((config.uploadImgShowBase64 || config.uploadImgServer || config.customUploadImg) && window.FileReader) {\n            // æ¾ç¤ºâä¸ä¼ å¾çâ\n            tabsConfigResult.push(tabsConfig[0]);\n        }\n        if (config.showLinkImg) {\n            // æ¾ç¤ºâç½ç»å¾çâ\n            tabsConfigResult.push(tabsConfig[1]);\n        }\n\n        // åå»º panel å¹¶æ¾ç¤º\n        var panel = new Panel(this, {\n            width: 300,\n            tabs: tabsConfigResult\n        });\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // è¯å¾æ¹å active ç¶æ\n    tryChangeActive: function tryChangeActive(e) {\n        var editor = this.editor;\n        var $elem = this.$elem;\n        if (editor._selectedImg) {\n            this._active = true;\n            $elem.addClass('w-e-active');\n        } else {\n            this._active = false;\n            $elem.removeClass('w-e-active');\n        }\n    }\n};\n\n/*\n    menu - soundCode\n*/\n// æé å½æ°\nfunction SoundCode(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-sound-code\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nSoundCode.prototype = {\n    constructor: SoundCode,\n\n    onClick: function onClick(e) {\n        var editor = this.editor;\n        var codeMirror = editor.codeMirror;\n        var $textElem = editor.$textElem;\n        var $soundCodeElem = document.querySelector('.CodeMirror'); // è·åæºç ç¼è¾å¨\n        var htmlEditFlag = $soundCodeElem.style.visibility; // è®°å½ç¼è¾å¨æ¯å¦å¤äºç¼è¾ç¶æ\n        var editorContent = convertHTMLForCodeView($textElem[0], 4); // è·åææ¬æºç \n        var editorValue = codeMirror.getValue(); // è·åæºç å®¹å¨åæºç value(string)\n\n        if (htmlEditFlag === 'hidden') {\n            $soundCodeElem.setAttribute('style', 'visibility: visible');\n\n            codeMirror.setValue(editorContent);\n            $textElem.css('display', 'none');\n            this._menusControl(false);\n        } else {\n            editor.txt.html(editorValue);\n            $soundCodeElem.setAttribute('style', 'visibility: hidden');\n            $textElem.css('display', 'block');\n            this._menusControl(true);\n        }\n    },\n\n    _menusControl: function _menusControl(disable) {\n        // æ§å¶menuæ¾é\n        var editor = this.editor;\n        var menus = editor.menus.menus;\n\n        Object.keys(menus).map(function (item) {\n            var menuItem = menus[item].$elem;\n            item !== 'soundCode' && menuItem.css('visibility', !disable ? 'hidden' : 'visible');\n        });\n    }\n};\n\n/*\n**è®¾ç½®éä¸­æå­æ ·å¼\n*/\n\n// ç¨äºè®°å½æµè§å¨çç±»å\nvar browser = {};\nvar ua = navigator.userAgent.toLowerCase();\n\nbrowser.msie = /msie ([\\d.]+)/.test(ua);\nbrowser.firefox = /firefox\\/([\\d.]+)/.test(ua);\nbrowser.chrome = /chrome\\/([\\d.]+)/.test(ua);\n\n// è·åå¤ä¸ªèç¹çHTML\nfunction getInnerHtml(nodes) {\n    var builder = [];\n    for (var i = 0; i < nodes.length; i++) {\n        // if (nodes[i].nodeValue != undefined){\n        //     builder.push(nodes[i].innerHTML || nodes[i].nodeValue);\n        // }else{\n        //     if (nodes[i].textContent) builder.push(nodes[i].textContent.replace(/\\</ig, function() { return \"<\"; }));\n        //     else if (nodes[i].nodeValue) builder.push(nodes[i].nodeValue.replace(/\\</ig, function() { return \"<\"; }));\n        // }\n        builder.push(nodes[i].innerHTML || nodes[i].nodeValue);\n    }\n    return builder;\n}\nfunction SelectionRange(doc, range) {\n    // è·åéä¸­çåå®¹çHTML\n    this.getSelectedHtml = function () {\n        if (range == null) return '';\n\n        if (browser.msie) {\n            if (range.htmlText !== undefined) return range.htmlText;else return '';\n        } else if (browser.firefox || browser.chrome) {\n            return getInnerHtml(range.cloneContents().childNodes);\n        } else {\n            return '';\n        }\n    };\n    // ç¨htmlæ¿æ¢éä¸­çåå®¹çHTML\n    this.replace = function (html) {\n        if (range != null) {\n            if (browser.msie) {\n                if (range.pasteHTML !== undefined) {\n                    // å½åéä¸­htmlå¯è½ä»¥ä¸ºæç§åå ï¼ä¾å¦ç¹å»äºå¦ä¸ä¸ªDIVï¼èä¸¢å¤±ï¼éæ°éä¸­\n                    range.select();\n                    range.pasteHTML(html);\n                    return true;\n                }\n            } else if (browser.firefox || browser.chrome) {\n                if (range.deleteContents !== undefined && range.insertNode !== undefined) {\n                    // å°ææ¬htmlè½¬æ¢æDOMå¯¹è±¡\n                    var temp = html;\n                    var elems = [];\n                    for (var i = 0; i < temp.length; i++) {\n                        var node = doc.createElement('p');\n                        node.innerHTML = temp[i];\n                        elems.push(node);\n                    }\n\n                    // å é¤éä¸­çèç¹\n                    range.deleteContents();\n                    // å°htmlå¯¹åºçèç¹(å³tempçææå­èç¹)éä¸ªæå¥å°rangeä¸­ï¼å¹¶ä»tempä¸­å é¤\n                    for (var j in elems.reverse()) {\n                        temp.splice(j, 1);\n                        range.insertNode(elems[j]);\n                    }\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n}\n\n// è·åå½åéä¸­ææ¬å¯¹åºçSelectionRangeå¯¹è±¡\nfunction getSelectionRange(win) {\n    var range = null;\n\n    if (browser.msie) {\n        range = win.document.selection.createRange();\n        if (range.parentElement().document !== win.document) {\n            range = null;\n        }\n    } else if (browser.firefox || browser.chrome) {\n        var sel = win.getSelection();\n        if (sel.rangeCount > 0) range = sel.getRangeAt(0);else range = null;\n    }\n\n    return new SelectionRange(win.document, range);\n}\n\n// ä¿®æ¹éä¸­çHTMLçæ ·å¼\nfunction setNodeStyle(doc, node, name, value) {\n    if (node.innerHTML === undefined) {\n        return node;\n    } else {\n        node.style[name] = value;\n\n        for (var i = 0; i < node.childNodes.length; i++) {\n            var cn = node.childNodes[i];\n            if (node.innerHTML !== undefined) {\n                setNodeStyle(doc, cn, name, value);\n            }\n        }\n\n        return node;\n    }\n}\n\nfunction setStyle(doc, html, name, value) {\n    var dom = doc.createElement('div');\n    dom.innerHTML = html;\n\n    for (var i = 0; i < dom.childNodes.length; i++) {\n        var node = dom.childNodes[i];\n        if (node.innerHTML === undefined) {\n            // å¦ææ¯ææ¬èç¹ï¼åè½¬æ¢è½¬æ¢æp\n            var span = doc.createElement('p');\n            span.style[name] = value;\n            if (node.nodeValue !== undefined) span.innerHTML = node.nodeValue.replace(/\\</ig, function () {\n                return '<';\n            });else if (node.textContent !== undefined) span.innetHTML = node.textContent.replace(/\\</ig, function () {\n                return '<';\n            });\n            // æ¿æ¢æææ¬èç¹\n            dom.replaceChild(span, node);\n        } else {\n            setNodeStyle(doc, node, name, value);\n        }\n    }\n    return dom.innerHTML;\n}\n\n/*\n    menu - lineHeight\n*/\n// æé å½æ°\nfunction lineHeight(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-line-height\"></i>\\n        </div>');\n    this.type = 'droplist';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n\n    // åå§å droplist\n    this.droplist = new DropList(this, {\n        width: 100,\n        $title: $('<p>è®¾ç½®è¡é«</p>'),\n        type: 'list', // droplist ä»¥åè¡¨å½¢å¼å±ç¤º\n        list: [{ $elem: $('<p>1</p>'), value: '1' }, { $elem: $('<p>1.5</p>'), value: '1.5' }, { $elem: $('<p>1.75</p>'), value: '1.75' }, { $elem: $('<p>2</p>'), value: '2' }, { $elem: $('<p>3</p>'), value: '3' }, { $elem: $('<p>4</p>'), value: '4' }, { $elem: $('<p>5</p>'), value: '5' }],\n        onClick: function onClick(value) {\n            // æ³¨æ this æ¯æåå½åç lineHeight å¯¹è±¡\n            _this._command(value);\n        }\n    });\n}\n\n// åå\nlineHeight.prototype = {\n    onstructor: lineHeight,\n\n    // æ§è¡å½ä»¤\n    _command: function _command(val) {\n        var editor = this.editor;\n        console.log(val, '111111');\n        var isSeleEmpty = editor.selection.isSelectionEmpty();\n\n        if (isSeleEmpty) {\n            // éåºæ¯ç©ºçï¼æå¥å¹¶éä¸­ä¸ä¸ªâç©ºç½â\n            // editor.selection.createEmptyRange()\n        }\n        editor.selection.restoreSelection();\n        this._setLineHeight(val);\n    },\n    // è®¾ç½®è¡é«\n    _setLineHeight: function _setLineHeight(val) {\n        val = val == 1 ? 'unset' : val + 'em';\n        var range = getSelectionRange(window);\n        var selectNodes = range.getSelectedHtml();\n        var targetNodes = [];\n        for (var i = 0; i < selectNodes.length; i++) {\n            var html = setStyle(document, selectNodes[i], 'lineHeight', val);\n            targetNodes.push(html);\n        }\n        range.replace(targetNodes);\n    }\n};\n\n/*\n    clearFormat-menu\n*/\n// æé å½æ°\nfunction ClearFormat(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\">\\n            <i class=\"icon w-e-icon w-e-icon-format\"></i>\\n        </div>');\n    this.type = 'click';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nClearFormat.prototype = {\n    constructor: ClearFormat,\n\n    onClick: function onClick(e) {\n        var editor = this.editor;\n        var editorContent = editor.txt.html(); // è·åææ¬æºç \n        var newContent = editorContent.replace(/style=\\\"(.*?)\\\"/g, '');\n        editor.txt.html(newContent);\n    }\n};\n\n/*\n    menu - video\n*/\n// æé å½æ°\nfunction Iframe(editor) {\n    this.editor = editor;\n    this.$elem = $('<div class=\"w-e-menu\"><i class=\"icon w-e-icon w-e-icon-iframe\"></i></div>');\n    this.type = 'panel';\n\n    // å½åæ¯å¦ active ç¶æ\n    this._active = false;\n}\n\n// åå\nIframe.prototype = {\n    constructor: Iframe,\n\n    onClick: function onClick() {\n        this._createPanel();\n    },\n\n    _createPanel: function _createPanel() {\n        var _this = this;\n\n        // åå»º id\n        var textValId = getRandom('text-val');\n        var btnId = getRandom('btn');\n\n        // åå»º panel\n        var panel = new Panel(this, {\n            width: 350,\n            // ä¸ä¸ª panel å¤ä¸ª tab\n            tabs: [{\n                // æ é¢\n                title: 'æå¥Iframe',\n                // æ¨¡æ¿\n                tpl: '<div>\\n                        <input id=\"' + textValId + '\" type=\"text\" class=\"block\" placeholder=\"http://...\"/>\\n                        <div class=\"w-e-button-container\">\\n                            <button id=\"' + btnId + '\" class=\"right\">\\u63D2\\u5165</button>\\n                        </div>\\n                    </div>',\n                // äºä»¶ç»å®\n                events: [{\n                    selector: '#' + btnId,\n                    type: 'click',\n                    fn: function fn() {\n                        var $text = $('#' + textValId);\n                        var val = $text.val().trim();\n                        if (val) {\n                            _this._insert(val);\n                        }\n                        // è¿å trueï¼è¡¨ç¤ºè¯¥äºä»¶æ§è¡å®ä¹åï¼panel è¦å³é­ãå¦å panel ä¸ä¼å³é­\n                        return true;\n                    }\n                }] // first tab end\n            }] // tabs end\n        }); // panel end\n\n        // æ¾ç¤º panel\n        panel.show();\n\n        // è®°å½å±æ§\n        this.panel = panel;\n    },\n\n    // æå¥Iframe\n    _insert: function _insert(flvSrc) {\n        var editor = this.editor;\n        editor.cmd.do('insertHTML', '<div class=\"flv-box\"><iframe class=\"video_iframe\" frameborder=\"0\" src=\"' + flvSrc + '\"></iframe></div>');\n    }\n};\n\n/*\n    ææèåçæ±æ»\n*/\n\n// å­å¨èåçæé å½æ°\nvar MenuConstructors = {};\n\nMenuConstructors.bold = Bold;\n\nMenuConstructors.head = Head;\n\nMenuConstructors.fontSize = FontSize;\n\nMenuConstructors.fontName = FontName;\n\nMenuConstructors.link = Link;\n\nMenuConstructors.italic = Italic;\n\nMenuConstructors.redo = Redo;\n\nMenuConstructors.strikeThrough = StrikeThrough;\n\nMenuConstructors.underline = Underline;\n\nMenuConstructors.undo = Undo;\n\nMenuConstructors.list = List;\n\nMenuConstructors.justify = Justify;\n\nMenuConstructors.foreColor = ForeColor;\n\nMenuConstructors.backColor = BackColor;\n\nMenuConstructors.quote = Quote;\n\nMenuConstructors.code = Code;\n\nMenuConstructors.emoticon = Emoticon;\n\nMenuConstructors.table = Table;\n\nMenuConstructors.video = Video;\n\nMenuConstructors.image = Image;\n\nMenuConstructors.soundCode = SoundCode;\n\nMenuConstructors.lineHeight = lineHeight;\n\nMenuConstructors.clearFormat = ClearFormat;\n\nMenuConstructors.iframe = Iframe;\n\n/*\n    èåéå\n*/\n// æé å½æ°\nfunction Menus(editor) {\n    this.editor = editor;\n    this.menus = {};\n}\n\n// ä¿®æ¹åå\nMenus.prototype = {\n    constructor: Menus,\n\n    // åå§åèå\n    init: function init() {\n        var _this = this;\n\n        var editor = this.editor;\n        var config = editor.config || {};\n        var configMenus = config.menus || []; // è·åéç½®ä¸­çèå\n\n        // æ ¹æ®éç½®ä¿¡æ¯ï¼åå»ºèå\n        configMenus.forEach(function (menuKey) {\n            var MenuConstructor = MenuConstructors[menuKey];\n            if (MenuConstructor && typeof MenuConstructor === 'function') {\n                // åå»ºåä¸ªèå\n                _this.menus[menuKey] = new MenuConstructor(editor);\n            }\n        });\n\n        // æ·»å å°èåæ \n        this._addToToolbar();\n\n        // ç»å®äºä»¶\n        this._bindEvent();\n    },\n\n    // æ·»å å°èåæ \n    _addToToolbar: function _addToToolbar() {\n        var editor = this.editor;\n        var $toolbarElem = editor.$toolbarElem;\n        var menus = this.menus;\n        var config = editor.config;\n        // config.zIndex æ¯éç½®çç¼è¾åºåç z-indexï¼èåç z-index å¾å¨å¶åºç¡ä¸ +1\n        var zIndex = config.zIndex + 1;\n        objForEach(menus, function (key, menu) {\n            var $elem = menu.$elem;\n            if ($elem) {\n                // è®¾ç½® z-index\n                $elem.css('z-index', zIndex);\n                $toolbarElem.append($elem);\n            }\n        });\n    },\n\n    // ç»å®èå click mouseenter äºä»¶\n    _bindEvent: function _bindEvent() {\n        var menus = this.menus;\n        var editor = this.editor;\n        objForEach(menus, function (key, menu) {\n            var type = menu.type;\n            if (!type) {\n                return;\n            }\n            var $elem = menu.$elem;\n            var droplist = menu.droplist;\n            var panel = menu.panel;\n\n            // ç¹å»ç±»åï¼ä¾å¦ bold\n            if (type === 'click' && menu.onClick) {\n                $elem.on('click', function (e) {\n                    if (editor.selection.getRange() == null) {\n                        return;\n                    }\n                    menu.onClick(e);\n                });\n            }\n\n            // ä¸ææ¡ï¼ä¾å¦ head\n            if (type === 'droplist' && droplist) {\n                $elem.on('mouseenter', function (e) {\n                    if (editor.selection.getRange() == null) {\n                        return;\n                    }\n                    // æ¾ç¤º\n                    droplist.showTimeoutId = setTimeout(function () {\n                        droplist.show();\n                    }, 200);\n                }).on('mouseleave', function (e) {\n                    // éè\n                    droplist.hideTimeoutId = setTimeout(function () {\n                        droplist.hide();\n                    }, 0);\n                });\n            }\n\n            // å¼¹æ¡ç±»åï¼ä¾å¦ link\n            if (type === 'panel' && menu.onClick) {\n                $elem.on('click', function (e) {\n                    e.stopPropagation();\n                    if (editor.selection.getRange() == null) {\n                        return;\n                    }\n                    // å¨èªå®ä¹äºä»¶ä¸­æ¾ç¤º panel\n                    menu.onClick(e);\n                });\n            }\n        });\n    },\n\n    // å°è¯ä¿®æ¹èåç¶æ\n    changeActive: function changeActive() {\n        var menus = this.menus;\n        objForEach(menus, function (key, menu) {\n            if (menu.tryChangeActive) {\n                setTimeout(function () {\n                    menu.tryChangeActive();\n                }, 100);\n            }\n        });\n    }\n};\n\n// è¿æ»¤wordåä½ä»£ç åæ ç¨å±æ§\nfunction filterWord(html) {\n    //æ¯å¦æ¯wordè¿æ¥çåå®¹\n    function isWordDocument(str) {\n        return (/(class=\"?Mso|style=\"[^\"]*\\bmso\\-|w:WordDocument|<(v|o):|lang=)/ig.test(str)\n        );\n    }\n    //å»æå°æ°\n    function transUnit(v) {\n        v = v.replace(/[\\d.]+\\w+/g, function (m) {\n            return transUnitToPx(m);\n        });\n        return v;\n    }\n\n    function filterPasteWord(str) {\n        return str.replace(/[\\t\\r\\n]+/g, ' ').replace(/<!--[\\s\\S]*?-->/ig, '')\n        //è½¬æ¢å¾ç\n        .replace(/<v:shape [^>]*>[\\s\\S]*?.<\\/v:shape>/gi, function (str) {\n            //operaè½èªå·±è§£æåºimageæè¿éç´æ¥è¿åç©º\n            // if(browser.opera){\n            //     return ''\n            // }\n            try {\n                //æå¯è½æ¯bitmapå ä¸ºå¾ï¼æ ç¨ï¼ç´æ¥è¿æ»¤æï¼ä¸»è¦ä½ç°å¨ç²è´´excelè¡¨æ ¼ä¸­\n                if (/Bitmap/i.test(str)) {\n                    return '';\n                }\n                var width = str.match(/width:([ \\d.]*p[tx])/i)[1],\n                    height = str.match(/height:([ \\d.]*p[tx])/i)[1],\n                    src = str.match(/src=\\s*\"([^\"]*)\"/i)[1];\n                return '<img width=\"' + transUnit(width) + '\" height=\"' + transUnit(height) + '\" src=\"' + src + '\" />';\n            } catch (e) {\n                return '';\n            }\n        })\n        //éå¯¹wpsæ·»å çå¤ä½æ ç­¾å¤ç\n        .replace(/<\\/?div[^>]*>/g, '')\n        //å»æå¤ä½çå±æ§\n        .replace(/v:\\w+=([\"']?)[^'\"]+\\1/g, '').replace(/<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|xml|meta|link|style|\\w+:\\w+)(?=[\\s\\/>]))[^>]*>/gi, '').replace(/<p [^>]*class=\"?MsoHeading\"?[^>]*>(.*?)<\\/p>/gi, '<p><strong>$1</strong></p>')\n        //å»æå¤ä½çå±æ§\n        .replace(/\\s+(class|lang|align)\\s*=\\s*(['\"]?)([\\w-]+)\\2/ig, function (str, name, marks, val) {\n            //ä¿çlistçæ ç¤º\n            return name == 'class' && val == 'MsoListParagraph' ? str : '';\n        })\n        //æ¸é¤å¤ä½çfont/spanä¸è½å¹é&nbsp;æå¯è½æ¯ç©ºæ ¼\n        .replace(/<(font|span)[^>]*>(\\s*)<\\/\\1>/gi, function (a, b, c) {\n            return c.replace(/[\\t\\r\\n ]+/g, ' ');\n        })\n        //å¤çstyleçé®é¢\n        .replace(/(<[a-z][^>]*)\\sstyle=([\"'])([^\\2]*?)\\2/gi, function (str, tag, tmp, style) {\n            var n = [],\n                s = style.replace(/^\\s+|\\s+$/, '').replace(/&#39;/g, '\\'').replace(/&quot;/gi, \"'\").replace(/[\\d.]+(cm|pt)/g, function (str) {\n                return transUnitToPx(str);\n            }).split(/;\\s*/g);\n\n            for (var i = 0, v; v = s[i]; i++) {\n\n                var name,\n                    value,\n                    parts = v.split(\":\");\n\n                if (parts.length == 2) {\n                    name = parts[0].toLowerCase();\n                    value = parts[1].toLowerCase();\n                    if (/^(background)\\w*/.test(name) && value.replace(/(initial|\\s)/g, '').length == 0 || /^(margin)\\w*/.test(name) && /^0\\w+$/.test(value)) {\n                        continue;\n                    }\n\n                    switch (name) {\n                        case \"mso-padding-alt\":\n                        case \"mso-padding-top-alt\":\n                        case \"mso-padding-right-alt\":\n                        case \"mso-padding-bottom-alt\":\n                        case \"mso-padding-left-alt\":\n                        case \"mso-margin-alt\":\n                        case \"mso-margin-top-alt\":\n                        case \"mso-margin-right-alt\":\n                        case \"mso-margin-bottom-alt\":\n                        case \"mso-margin-left-alt\":\n                        case \"mso-height\":\n                        case \"mso-width\":\n                        case \"mso-vertical-align-alt\":\n                            //trace:1819 ffä¸ä¼è§£æåºpaddingå¨tableä¸\n                            if (!/<table/.test(tag)) n[i] = name.replace(/^mso-|-alt$/g, \"\") + \":\" + transUnit(value);\n                            continue;\n                        case \"horiz-align\":\n                            n[i] = \"text-align:\" + value;\n                            continue;\n\n                        case \"vert-align\":\n                            n[i] = \"vertical-align:\" + value;\n                            continue;\n\n                        case \"font-color\":\n                        case \"mso-foreground\":\n                            n[i] = \"color:\" + value;\n                            continue;\n\n                        case \"mso-background\":\n                        case \"mso-highlight\":\n                            n[i] = \"background:\" + value;\n                            continue;\n\n                        case \"mso-default-height\":\n                            n[i] = \"min-height:\" + transUnit(value);\n                            continue;\n\n                        case \"mso-default-width\":\n                            n[i] = \"min-width:\" + transUnit(value);\n                            continue;\n\n                        case \"mso-padding-between-alt\":\n                            n[i] = \"border-collapse:separate;border-spacing:\" + transUnit(value);\n                            continue;\n\n                        case \"text-line-through\":\n                            if (value == \"single\" || value == \"double\") {\n                                n[i] = \"text-decoration:line-through\";\n                            }\n                            continue;\n                        case \"mso-zero-height\":\n                            if (value == \"yes\") {\n                                n[i] = \"display:none\";\n                            }\n                            continue;\n                        //                                case 'background':\n                        //                                    break;\n                        case 'margin':\n                            if (!/[1-9]/.test(value)) {\n                                continue;\n                            }\n\n                    }\n\n                    if (/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name) || /text\\-indent|padding|margin/.test(name) && /\\-[\\d.]+/.test(value)) {\n                        continue;\n                    }\n\n                    n[i] = name + \":\" + parts[1];\n                }\n            }\n            return tag + (n.length ? ' style=\"' + n.join(';').replace(/;{2,}/g, ';') + '\"' : '');\n        });\n    }\n    return isWordDocument(html) ? filterPasteWord(html) : html;\n}\n\n/**\n * æcmï¼ptä¸ºåä½çå¼è½¬æ¢ä¸ºpxä¸ºåä½çå¼\n * @method transUnitToPx\n * @param { String } å¾è½¬æ¢çå¸¦åä½çå­ç¬¦ä¸²\n * @return { String } è½¬æ¢ä¸ºpxä¸ºè®¡éåä½çå¼çå­ç¬¦ä¸²\n * @example\n * ```javascript\n *\n * //output: 500px\n * console.log( UE.utils.transUnitToPx( '20cm' ) );\n *\n * //output: 27px\n * console.log( UE.utils.transUnitToPx( '20pt' ) );\n *\n * ```\n */\nfunction transUnitToPx(val) {\n    if (!/(pt|cm)/.test(val)) {\n        return val;\n    }\n    var unit;\n    val.replace(/([\\d.]+)(\\w+)/, function (str, v, u) {\n        val = v;\n        unit = u;\n    });\n    switch (unit) {\n        case 'cm':\n            val = parseFloat(val) * 25;\n            break;\n        case 'pt':\n            val = Math.round(parseFloat(val) * 96 / 72);\n    }\n    return val + (val ? 'px' : '');\n}\n\n/*\n    ç²è´´ä¿¡æ¯çå¤ç\n*/\n\n// è·åç²è´´ççº¯ææ¬\nfunction getPasteText(e) {\n    var clipboardData = e.clipboardData || e.originalEvent && e.originalEvent.clipboardData;\n    var pasteText = void 0;\n    if (clipboardData == null) {\n        pasteText = window.clipboardData && window.clipboardData.getData('text');\n    } else {\n        pasteText = clipboardData.getData('text/plain');\n    }\n\n    return replaceHtmlSymbol(pasteText);\n}\n\n// è·åç²è´´çhtml\nfunction getPasteHtml(e, filterStyle, ignoreImg) {\n    var clipboardData = e.clipboardData || e.originalEvent && e.originalEvent.clipboardData;\n    var pasteText = void 0,\n        pasteHtml = void 0;\n    if (clipboardData == null) {\n        pasteText = window.clipboardData && window.clipboardData.getData('text');\n    } else {\n        pasteText = clipboardData.getData('text/plain');\n        pasteHtml = clipboardData.getData('text/html');\n    }\n    if (!pasteHtml && pasteText) {\n        pasteHtml = '<p class=\"p\">' + replaceHtmlSymbol(pasteText) + '</p>';\n    }\n    if (!pasteHtml) {\n        return;\n    }\n\n    // è¿æ»¤wordä¸­ç¶æè¿æ¥çæ ç¨å­ç¬¦\n    pasteHtml = filterWord(pasteHtml);\n    // const docSplitHtml = pasteHtml.split('</html>')\n    // if (docSplitHtml.length === 2) {\n    //     pasteHtml = docSplitHtml[0]\n    // }\n\n    // // è¿æ»¤æ ç¨æ ç­¾\n    // pasteHtml = pasteHtml.replace(/<(meta|script|link|style).+?>/igm, '')\n    // pasteHtml = pasteHtml.replace(/<style>[\\w\\W\\r\\n]*?<\\/style>/gmi, '')\n    // pasteHtml = pasteHtml.replace(/<w:sdtpr[\\w\\W\\r\\n]*?<\\/w:sdtpr>/gmi, '')\n    // pasteHtml = pasteHtml.replace(/<o:p>[\\w\\W\\r\\n]*?<\\/o:p>/gmi, '')\n    // // å»ææ³¨é\n    // pasteHtml = pasteHtml.replace(/<!--[\\w\\W\\r\\n]*?-->/gmi, '')\n    // // è¿æ»¤ data-xxx å±æ§\n    // pasteHtml = pasteHtml.replace(/\\s?data-.+?=('|\").+?('|\")/igm, '')\n\n    // if (ignoreImg) {\n    //     // å¿½ç¥å¾ç\n    //     pasteHtml = pasteHtml.replace(/<img.+?>/igm, '')\n    // }\n\n    // if (filterStyle) {\n    //     // è¿æ»¤æ ·å¼\n    //     pasteHtml = pasteHtml.replace(/\\s?(class|style)=('|\").*?('|\")/igm, '')\n    // } else {\n    //     // ä¿çæ ·å¼\n    //     pasteHtml = pasteHtml.replace(/\\s?class=('|\").*?('|\")/igm, '')\n    // }\n    // ä¸ºpæ ç­¾æ·»å class\n    pasteHtml = pasteHtml.replace(/<p>/g, '<p class=\"p\">');\n    return pasteHtml;\n}\n\n// è·åç²è´´çå¾çæä»¶\nfunction getPasteImgs(e) {\n    var result = [];\n    var txt = getPasteText(e);\n    if (txt) {\n        // ææå­ï¼å°±å¿½ç¥å¾ç\n        return result;\n    }\n\n    var clipboardData = e.clipboardData || e.originalEvent && e.originalEvent.clipboardData || {};\n    var items = clipboardData.items;\n    if (!items) {\n        return result;\n    }\n\n    objForEach(items, function (key, value) {\n        var type = value.type;\n        if (/image/i.test(type)) {\n            result.push(value.getAsFile());\n        }\n    });\n\n    return result;\n}\n\n/*\n    ç¼è¾åºå\n*/\n\n// è·åä¸ä¸ª elem.childNodes ç JSON æ°æ®\nfunction getChildrenJSON($elem) {\n    var result = [];\n    var $children = $elem.childNodes() || []; // æ³¨æ childNodes() å¯ä»¥è·åææ¬èç¹\n    $children.forEach(function (curElem) {\n        var elemResult = void 0;\n        var nodeType = curElem.nodeType;\n\n        // ææ¬èç¹\n        if (nodeType === 3) {\n            elemResult = curElem.textContent;\n            elemResult = replaceHtmlSymbol(elemResult);\n        }\n\n        // æ®é DOM èç¹\n        if (nodeType === 1) {\n            elemResult = {};\n\n            // tag\n            elemResult.tag = curElem.nodeName.toLowerCase();\n            // attr\n            var attrData = [];\n            var attrList = curElem.attributes || {};\n            var attrListLength = attrList.length || 0;\n            for (var i = 0; i < attrListLength; i++) {\n                var attr = attrList[i];\n                attrData.push({\n                    name: attr.name,\n                    value: attr.value\n                });\n            }\n            elemResult.attrs = attrData;\n            // childrenï¼éå½ï¼\n            elemResult.children = getChildrenJSON($(curElem));\n        }\n\n        result.push(elemResult);\n    });\n    return result;\n}\n\n// æé å½æ°\nfunction Text(editor) {\n    this.editor = editor;\n}\n\n// ä¿®æ¹åå\nText.prototype = {\n    constructor: Text,\n\n    // åå§å\n    init: function init() {\n        // ç»å®äºä»¶\n        this._bindEvent();\n    },\n\n    // æ¸ç©ºåå®¹\n    clear: function clear() {\n        this.html('<p class=\"p\"><br></p>');\n    },\n\n    // è·å è®¾ç½® html\n    html: function html(val) {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        var html = void 0;\n        if (val == null) {\n            html = $textElem.html();\n            // æªéä¸­ä»»ä½åå®¹çæ¶åç¹å»âå ç²âæèâæä½âç­æé®ï¼å°±å¾éè¦ä¸ä¸ªç©ºçå ä½ç¬¦ &#8203 ï¼è¿éæ¿æ¢æ\n            html = html.replace(/\\u200b/gm, '');\n            return html;\n        } else {\n            $textElem.html(val);\n\n            // åå§åéåï¼å°åæ å®ä½å°åå®¹å°¾é¨\n            editor.initSelection();\n        }\n    },\n\n    // è·å JSON\n    getJSON: function getJSON() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        return getChildrenJSON($textElem);\n    },\n\n    // è·å è®¾ç½® text\n    text: function text(val) {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        var text = void 0;\n        if (val == null) {\n            text = $textElem.text();\n            // æªéä¸­ä»»ä½åå®¹çæ¶åç¹å»âå ç²âæèâæä½âç­æé®ï¼å°±å¾éè¦ä¸ä¸ªç©ºçå ä½ç¬¦ &#8203 ï¼è¿éæ¿æ¢æ\n            text = text.replace(/\\u200b/gm, '');\n            return text;\n        } else {\n            $textElem.text('<p class=\"p\">' + val + '</p>');\n\n            // åå§åéåï¼å°åæ å®ä½å°åå®¹å°¾é¨\n            editor.initSelection();\n        }\n    },\n\n    // è¿½å åå®¹\n    append: function append(html) {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        $textElem.append($(html));\n\n        // åå§åéåï¼å°åæ å®ä½å°åå®¹å°¾é¨\n        editor.initSelection();\n    },\n\n    // ç»å®äºä»¶\n    _bindEvent: function _bindEvent() {\n        // å®æ¶ä¿å­éå\n        this._saveRangeRealTime();\n\n        // æåè½¦å»ºæ¶çç¹æ®å¤ç\n        this._enterKeyHandle();\n\n        // æ¸ç©ºæ¶ä¿ç <p><br></p>\n        this._clearHandle();\n\n        // ç²è´´äºä»¶ï¼ç²è´´æå­ï¼ç²è´´å¾çï¼\n        this._pasteHandle();\n\n        // tab ç¹æ®å¤ç\n        this._tabHandle();\n\n        // img ç¹å»\n        this._imgHandle();\n\n        // ææ½äºä»¶\n        this._dragHandle();\n    },\n\n    // å®æ¶ä¿å­éå\n    _saveRangeRealTime: function _saveRangeRealTime() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n\n        // ä¿å­å½åçéåº\n        function saveRange(e) {\n            // éæ¶ä¿å­éåº\n            editor.selection.saveRange();\n            // æ´æ°æé® ative ç¶æ\n            editor.menus.changeActive();\n        }\n        // æé®åä¿å­\n        $textElem.on('keyup', saveRange);\n        $textElem.on('mousedown', function (e) {\n            // mousedown ç¶æä¸ï¼é¼ æ æ»å¨å°ç¼è¾åºåå¤é¢ï¼ä¹éè¦ä¿å­éåº\n            $textElem.on('mouseleave', saveRange);\n        });\n        $textElem.on('mouseup', function (e) {\n            saveRange();\n            // å¨ç¼è¾å¨åºåä¹åå®æç¹å»ï¼åæ¶é¼ æ æ»å¨å°ç¼è¾åºå¤é¢çäºä»¶\n            $textElem.off('mouseleave', saveRange);\n        });\n    },\n\n    // æåè½¦é®æ¶çç¹æ®å¤ç\n    _enterKeyHandle: function _enterKeyHandle() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n\n        function insertEmptyP($selectionElem) {\n            var $p = $('<p class=\"p\"><br></p>');\n            $p.insertBefore($selectionElem);\n            editor.selection.createRangeByElem($p, true);\n            editor.selection.restoreSelection();\n            $selectionElem.remove();\n        }\n\n        // å°åè½¦ä¹åçæçé <p> çé¡¶çº§æ ç­¾ï¼æ¹ä¸º <p>\n        function pHandle(e) {\n            var $selectionElem = editor.selection.getSelectionContainerElem();\n            var $parentElem = $selectionElem.parent();\n\n            if ($parentElem.html() === '<code><br></code>') {\n                // åè½¦ä¹ååæ æå¨ä¸ä¸ª <p><code>.....</code></p> ï¼å¿½ç¶åè½¦çæä¸ä¸ªç©ºç <p><code><br></code></p>\n                // èä¸ç»§ç»­åè½¦è·³ä¸åºå»ï¼å æ­¤åªè½ç¹æ®å¤ç\n                insertEmptyP($selectionElem);\n                return;\n            }\n\n            if (!$parentElem.equal($textElem)) {\n                // ä¸æ¯é¡¶çº§æ ç­¾\n                return;\n            }\n\n            var nodeName = $selectionElem.getNodeName();\n            if (nodeName === 'P') {\n                // å½åçæ ç­¾æ¯ P ï¼ä¸ç¨åå¤ç\n                return;\n            }\n\n            if ($selectionElem.text()) {\n                // æåå®¹ï¼ä¸åå¤ç\n                return;\n            }\n\n            // æå¥ <p> ï¼å¹¶å°éåå®ä½å° <p>ï¼å é¤å½åæ ç­¾\n            insertEmptyP($selectionElem);\n        }\n\n        $textElem.on('keyup', function (e) {\n            if (e.keyCode !== 13) {\n                // ä¸æ¯åè½¦é®\n                return;\n            }\n            // å°åè½¦ä¹åçæçé <p> çé¡¶çº§æ ç­¾ï¼æ¹ä¸º <p>\n            pHandle(e);\n        });\n\n        // <pre><code></code></pre> åè½¦æ¶ ç¹æ®å¤ç\n        function codeHandle(e) {\n            var $selectionElem = editor.selection.getSelectionContainerElem();\n            if (!$selectionElem) {\n                return;\n            }\n            var $parentElem = $selectionElem.parent();\n            var selectionNodeName = $selectionElem.getNodeName();\n            var parentNodeName = $parentElem.getNodeName();\n\n            if (selectionNodeName !== 'CODE' || parentNodeName !== 'PRE') {\n                // ä¸ç¬¦åè¦æ± å¿½ç¥\n                return;\n            }\n\n            if (!editor.cmd.queryCommandSupported('insertHTML')) {\n                // å¿é¡»åçæ¯æ insertHTML å½ä»¤\n                return;\n            }\n\n            // å¤çï¼åæ å®ä½å°ä»£ç æ«å°¾ï¼èç³»ç¹å»ä¸¤æ¬¡åè½¦ï¼å³è·³åºä»£ç å\n            if (editor._willBreakCode === true) {\n                // æ­¤æ¶å¯ä»¥è·³åºä»£ç å\n                // æå¥ <p> ï¼å¹¶å°éåå®ä½å° <p>\n                var $p = $('<p class=\"p\"><br></p>');\n                $p.insertAfter($parentElem);\n                editor.selection.createRangeByElem($p, true);\n                editor.selection.restoreSelection();\n\n                // ä¿®æ¹ç¶æ\n                editor._willBreakCode = false;\n\n                e.preventDefault();\n                return;\n            }\n\n            var _startOffset = editor.selection.getRange().startOffset;\n\n            // å¤çï¼åè½¦æ¶ï¼ä¸è½æå¥ <br> èæ¯æå¥ \\n ï¼å ä¸ºæ¯å¨ pre æ ç­¾éé¢\n            editor.cmd.do('insertHTML', '\\n');\n            editor.selection.saveRange();\n            if (editor.selection.getRange().startOffset === _startOffset) {\n                // æ²¡èµ·ä½ç¨ï¼åæ¥ä¸é\n                editor.cmd.do('insertHTML', '\\n');\n            }\n\n            var codeLength = $selectionElem.html().length;\n            if (editor.selection.getRange().startOffset + 1 === codeLength) {\n                // è¯´æåæ å¨ä»£ç æåçä½ç½®ï¼æ§è¡äºåè½¦æä½\n                // è®°å½ä¸æ¥ï¼ä»¥ä¾¿ä¸æ¬¡åè½¦æ¶åè·³åº code\n                editor._willBreakCode = true;\n            }\n\n            // é»æ­¢é»è®¤è¡ä¸º\n            e.preventDefault();\n        }\n\n        $textElem.on('keydown', function (e) {\n            if (e.keyCode !== 13) {\n                // ä¸æ¯åè½¦é®\n                // åæ¶å³å°è·³è½¬ä»£ç åçè®°å½\n                editor._willBreakCode = false;\n                return;\n            }\n            // <pre><code></code></pre> åè½¦æ¶ ç¹æ®å¤ç\n            codeHandle(e);\n        });\n    },\n\n    // æ¸ç©ºæ¶ä¿ç <p><br></p>\n    _clearHandle: function _clearHandle() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n\n        $textElem.on('keydown', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $textElem.html().toLowerCase().trim();\n            if (txtHtml === '<p class=\"p\"><br></p>') {\n                // æåå©ä¸ä¸ä¸ªç©ºè¡ï¼å°±ä¸åå é¤äº\n                e.preventDefault();\n                return;\n            }\n        });\n\n        $textElem.on('keyup', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var $p = void 0;\n            var txtHtml = $textElem.html().toLowerCase().trim();\n\n            // firefox æ¶ç¨ txtHtml === '<br>' å¤æ­ï¼å¶ä»ç¨ !txtHtml å¤æ­\n            if (!txtHtml || txtHtml === '<br>') {\n                // åå®¹ç©ºäº\n                $p = $('<p class=\"p\"><br/></p>');\n                $textElem.html(''); // ä¸å®è¦åæ¸ç©ºï¼å¦åå¨ firefox ä¸æé®é¢\n                $textElem.append($p);\n                editor.selection.createRangeByElem($p, false, true);\n                editor.selection.restoreSelection();\n            }\n        });\n    },\n\n    // ç²è´´äºä»¶ï¼ç²è´´æå­ ç²è´´å¾çï¼\n    _pasteHandle: function _pasteHandle() {\n        var editor = this.editor;\n        var config = editor.config;\n        var pasteFilterStyle = config.pasteFilterStyle;\n        var pasteTextHandle = config.pasteTextHandle;\n        var ignoreImg = config.pasteIgnoreImg;\n        var $textElem = editor.$textElem;\n\n        // ç²è´´å¾çãææ¬çäºä»¶ï¼æ¯æ¬¡åªè½æ§è¡ä¸ä¸ª\n        // å¤æ­è¯¥æ¬¡ç²è´´äºä»¶æ¯å¦å¯ä»¥æ§è¡\n        var pasteTime = 0;\n        function canDo() {\n            var now = Date.now();\n            var flag = false;\n            if (now - pasteTime >= 100) {\n                // é´éå¤§äº 100 ms ï¼å¯ä»¥æ§è¡\n                flag = true;\n            }\n            pasteTime = now;\n            return flag;\n        }\n        function resetTime() {\n            pasteTime = 0;\n        }\n\n        // ç²è´´æå­\n        $textElem.on('paste', function (e) {\n            if (UA.isIE()) {\n                return;\n            } else {\n                // é»æ­¢é»è®¤è¡ä¸ºï¼ä½¿ç¨ execCommand çç²è´´å½ä»¤\n                e.preventDefault();\n            }\n\n            // ç²è´´å¾çåææ¬ï¼åªè½åæ¶ä½¿ç¨ä¸ä¸ª\n            if (!canDo()) {\n                return;\n            }\n\n            // è·åç²è´´çæå­\n            var pasteHtml = getPasteHtml(e, pasteFilterStyle, ignoreImg);\n            var pasteText = getPasteText(e);\n            pasteText = pasteText.replace(/\\n/gm, '<br>');\n\n            var $selectionElem = editor.selection.getSelectionContainerElem();\n            if (!$selectionElem) {\n                return;\n            }\n            var nodeName = $selectionElem.getNodeName();\n\n            // code ä¸­åªè½ç²è´´çº¯ææ¬\n            if (nodeName === 'CODE' || nodeName === 'PRE') {\n                if (pasteTextHandle && isFunction(pasteTextHandle)) {\n                    // ç¨æ·èªå®ä¹è¿æ»¤å¤çç²è´´åå®¹\n                    pasteText = '' + (pasteTextHandle(pasteText) || '');\n                }\n                editor.cmd.do('insertHTML', '<p class=\"p\">' + pasteText + '</p>');\n                return;\n            }\n\n            // åæ¾å¼æ³¨éï¼æé®é¢åè¿½æ¥ ââââ\n            // // è¡¨æ ¼ä¸­å¿½ç¥ï¼å¯è½ä¼åºç°å¼å¸¸é®é¢\n            // if (nodeName === 'TD' || nodeName === 'TH') {\n            //     return\n            // }\n\n            if (!pasteHtml) {\n                // æ²¡æåå®¹ï¼å¯ç»§ç»­æ§è¡ä¸é¢çå¾çç²è´´\n                resetTime();\n                return;\n            }\n            try {\n                // firefox ä¸­ï¼è·åç pasteHtml å¯è½æ¯æ²¡æ <ul> åè£¹ç <li>\n                // å æ­¤æ§è¡ insertHTML ä¼æ¥é\n                if (pasteTextHandle && isFunction(pasteTextHandle)) {\n                    // ç¨æ·èªå®ä¹è¿æ»¤å¤çç²è´´åå®¹\n                    pasteHtml = '' + (pasteTextHandle(pasteHtml) || '');\n                }\n                editor.cmd.do('insertHTML', pasteHtml);\n            } catch (ex) {\n                // æ­¤æ¶ä½¿ç¨ pasteText æ¥å¼å®¹ä¸ä¸\n                if (pasteTextHandle && isFunction(pasteTextHandle)) {\n                    // ç¨æ·èªå®ä¹è¿æ»¤å¤çç²è´´åå®¹\n                    pasteText = '' + (pasteTextHandle(pasteText) || '');\n                }\n                editor.cmd.do('insertHTML', '<p class=\"p\">' + pasteText + '</p>');\n            }\n        });\n\n        // ç²è´´å¾ç\n        $textElem.on('paste', function (e) {\n            if (UA.isIE()) {\n                return;\n            } else {\n                e.preventDefault();\n            }\n\n            // ç²è´´å¾çåææ¬ï¼åªè½åæ¶ä½¿ç¨ä¸ä¸ª\n            if (!canDo()) {\n                return;\n            }\n\n            // è·åç²è´´çå¾ç\n            var pasteFiles = getPasteImgs(e);\n            if (!pasteFiles || !pasteFiles.length) {\n                return;\n            }\n\n            // è·åå½åçåç´ \n            var $selectionElem = editor.selection.getSelectionContainerElem();\n            if (!$selectionElem) {\n                return;\n            }\n            var nodeName = $selectionElem.getNodeName();\n\n            // code ä¸­ç²è´´å¿½ç¥\n            if (nodeName === 'CODE' || nodeName === 'PRE') {\n                return;\n            }\n\n            // ä¸ä¼ å¾ç\n            var uploadImg = editor.uploadImg;\n            uploadImg.uploadImg(pasteFiles);\n        });\n    },\n\n    // tab ç¹æ®å¤ç\n    _tabHandle: function _tabHandle() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n\n        $textElem.on('keydown', function (e) {\n            if (e.keyCode !== 9) {\n                return;\n            }\n            if (!editor.cmd.queryCommandSupported('insertHTML')) {\n                // å¿é¡»åçæ¯æ insertHTML å½ä»¤\n                return;\n            }\n            var $selectionElem = editor.selection.getSelectionContainerElem();\n            if (!$selectionElem) {\n                return;\n            }\n            var $parentElem = $selectionElem.parent();\n            var selectionNodeName = $selectionElem.getNodeName();\n            var parentNodeName = $parentElem.getNodeName();\n\n            if (selectionNodeName === 'CODE' && parentNodeName === 'PRE') {\n                // <pre><code> éé¢\n                editor.cmd.do('insertHTML', '    ');\n            } else {\n                // æ®éæå­\n                editor.cmd.do('insertHTML', '&nbsp;&nbsp;&nbsp;&nbsp;');\n            }\n\n            e.preventDefault();\n        });\n    },\n\n    // img ç¹å»\n    _imgHandle: function _imgHandle() {\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n\n        // ä¸ºå¾çå¢å  selected æ ·å¼\n        $textElem.on('click', 'img', function (e) {\n            var img = this;\n            var $img = $(img);\n\n            if ($img.attr('data-w-e') === '1') {\n                // æ¯è¡¨æå¾çï¼å¿½ç¥\n                return;\n            }\n\n            // è®°å½å½åç¹å»è¿çå¾ç\n            editor._selectedImg = $img;\n\n            // ä¿®æ¹éåºå¹¶ restore ï¼é²æ­¢ç¨æ·æ­¤æ¶ç¹å»éæ ¼é®ï¼ä¼å é¤å¶ä»åå®¹\n            editor.selection.createRangeByElem($img);\n            editor.selection.restoreSelection();\n        });\n\n        // å»æå¾çç selected æ ·å¼\n        $textElem.on('click  keyup', function (e) {\n            if (e.target.matches('img')) {\n                // ç¹å»çæ¯å¾çï¼å¿½ç¥\n                return;\n            }\n            // å é¤è®°å½\n            editor._selectedImg = null;\n        });\n    },\n\n    // ææ½äºä»¶\n    _dragHandle: function _dragHandle() {\n        var editor = this.editor;\n\n        // ç¦ç¨ document ææ½äºä»¶\n        var $document = $(document);\n        $document.on('dragleave drop dragenter dragover', function (e) {\n            e.preventDefault();\n        });\n\n        // æ·»å ç¼è¾åºåææ½äºä»¶\n        var $textElem = editor.$textElem;\n        $textElem.on('drop', function (e) {\n            e.preventDefault();\n            var files = e.dataTransfer && e.dataTransfer.files;\n            if (!files || !files.length) {\n                return;\n            }\n\n            // ä¸ä¼ å¾ç\n            var uploadImg = editor.uploadImg;\n            uploadImg.uploadImg(files);\n        });\n    }\n};\n\n/*\n    å½ä»¤ï¼å°è£ document.execCommand\n*/\n\n// æé å½æ°\nfunction Command(editor) {\n    this.editor = editor;\n}\n\n// ä¿®æ¹åå\nCommand.prototype = {\n    constructor: Command,\n\n    // æ§è¡å½ä»¤\n    do: function _do(name, value) {\n        var editor = this.editor;\n\n        // ä½¿ç¨ styleWithCSS\n        if (!editor._useStyleWithCSS) {\n            document.execCommand('styleWithCSS', null, true);\n            editor._useStyleWithCSS = true;\n        }\n\n        // å¦ææ éåºï¼å¿½ç¥\n        if (!editor.selection.getRange()) {\n            return;\n        }\n\n        // æ¢å¤éå\n        editor.selection.restoreSelection();\n\n        // æ§è¡\n        var _name = '_' + name;\n        if (this[_name]) {\n            // æèªå®ä¹äºä»¶\n            this[_name](value);\n        } else {\n            // é»è®¤ command\n            this._execCommand(name, value);\n        }\n\n        // ä¿®æ¹èåç¶æ\n        editor.menus.changeActive();\n\n        // æåï¼æ¢å¤éåä¿è¯åæ å¨åæ¥çä½ç½®éªç\n        editor.selection.saveRange();\n        editor.selection.restoreSelection();\n\n        // è§¦å onchange\n        editor.change && editor.change();\n    },\n\n    // èªå®ä¹ insertHTML äºä»¶\n    _insertHTML: function _insertHTML(html) {\n        var editor = this.editor;\n        var range = editor.selection.getRange();\n\n        if (this.queryCommandSupported('insertHTML')) {\n            // W3C\n            this._execCommand('insertHTML', html);\n        } else if (range.insertNode) {\n            // IE\n            range.deleteContents();\n            range.insertNode($(html)[0]);\n        } else if (range.pasteHTML) {\n            // IE <= 10\n            range.pasteHTML(html);\n        }\n    },\n\n    // æå¥ elem\n    _insertElem: function _insertElem($elem) {\n        var editor = this.editor;\n        var range = editor.selection.getRange();\n\n        if (range.insertNode) {\n            range.deleteContents();\n            range.insertNode($elem[0]);\n        }\n    },\n\n    // å°è£ execCommand\n    _execCommand: function _execCommand(name, value) {\n        document.execCommand(name, false, value);\n    },\n\n    // å°è£ document.queryCommandValue\n    queryCommandValue: function queryCommandValue(name) {\n        return document.queryCommandValue(name);\n    },\n\n    // å°è£ document.queryCommandState\n    queryCommandState: function queryCommandState(name) {\n        return document.queryCommandState(name);\n    },\n\n    // å°è£ document.queryCommandSupported\n    queryCommandSupported: function queryCommandSupported(name) {\n        return document.queryCommandSupported(name);\n    }\n};\n\n/*\n    selection range API\n*/\n\n// æé å½æ°\nfunction API(editor) {\n    this.editor = editor;\n    this._currentRange = null;\n}\n\n// ä¿®æ¹åå\nAPI.prototype = {\n    constructor: API,\n\n    // è·å range å¯¹è±¡\n    getRange: function getRange() {\n        return this._currentRange;\n    },\n\n    // ä¿å­éåº\n    saveRange: function saveRange(_range) {\n        if (_range) {\n            // ä¿å­å·²æéåº\n            this._currentRange = _range;\n            return;\n        }\n\n        // è·åå½åçéåº\n        var selection = window.getSelection();\n        if (selection.rangeCount === 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n\n        // å¤æ­éåºåå®¹æ¯å¦å¨ç¼è¾åå®¹ä¹å\n        var $containerElem = this.getSelectionContainerElem(range);\n        if (!$containerElem) {\n            return;\n        }\n\n        // å¤æ­éåºåå®¹æ¯å¦å¨ä¸å¯ç¼è¾åºåä¹å\n        if ($containerElem.attr('contenteditable') === 'false' || $containerElem.parentUntil('[contenteditable=false]')) {\n            return;\n        }\n\n        var editor = this.editor;\n        var $textElem = editor.$textElem;\n        if ($textElem.isContain($containerElem)) {\n            // æ¯ç¼è¾åå®¹ä¹åç\n            this._currentRange = range;\n        }\n    },\n\n    // æå éåº\n    collapseRange: function collapseRange(toStart) {\n        if (toStart == null) {\n            // é»è®¤ä¸º false\n            toStart = false;\n        }\n        var range = this._currentRange;\n        if (range) {\n            range.collapse(toStart);\n        }\n    },\n\n    // éä¸­åºåçæå­\n    getSelectionText: function getSelectionText() {\n        var range = this._currentRange;\n        if (range) {\n            return this._currentRange.toString();\n        } else {\n            return '';\n        }\n    },\n\n    // éåºç $Elem\n    getSelectionContainerElem: function getSelectionContainerElem(range) {\n        range = range || this._currentRange;\n        var elem = void 0;\n        if (range) {\n            elem = range.commonAncestorContainer;\n            return $(elem.nodeType === 1 ? elem : elem.parentNode);\n        }\n    },\n    getSelectionStartElem: function getSelectionStartElem(range) {\n        range = range || this._currentRange;\n        var elem = void 0;\n        if (range) {\n            elem = range.startContainer;\n            return $(elem.nodeType === 1 ? elem : elem.parentNode);\n        }\n    },\n    getSelectionEndElem: function getSelectionEndElem(range) {\n        range = range || this._currentRange;\n        var elem = void 0;\n        if (range) {\n            elem = range.endContainer;\n            return $(elem.nodeType === 1 ? elem : elem.parentNode);\n        }\n    },\n\n    // éåºæ¯å¦ä¸ºç©º\n    isSelectionEmpty: function isSelectionEmpty() {\n        var range = this._currentRange;\n        if (range && range.startContainer) {\n            if (range.startContainer === range.endContainer) {\n                if (range.startOffset === range.endOffset) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n\n    // æ¢å¤éåº\n    restoreSelection: function restoreSelection() {\n        var selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(this._currentRange);\n    },\n\n    // åå»ºä¸ä¸ªç©ºç½ï¼å³ &#8203 å­ç¬¦ï¼éåº\n    createEmptyRange: function createEmptyRange() {\n        var editor = this.editor;\n        var range = this.getRange();\n        var $elem = void 0;\n\n        if (!range) {\n            // å½åæ  range\n            return;\n        }\n        if (!this.isSelectionEmpty()) {\n            // å½åéåºå¿é¡»æ²¡æåå®¹æå¯ä»¥\n            return;\n        }\n\n        try {\n            // ç®ååªæ¯æ webkit åæ ¸\n            if (UA.isWebkit()) {\n                // æå¥ &#8203\n                editor.cmd.do('insertHTML', '&#8203;');\n                // ä¿®æ¹ offset ä½ç½®\n                range.setEnd(range.endContainer, range.endOffset + 1);\n                // å­å¨\n                this.saveRange(range);\n            } else {\n                $elem = $('<strong>&#8203;</strong>');\n                editor.cmd.do('insertElem', $elem);\n                this.createRangeByElem($elem, true);\n            }\n        } catch (ex) {\n            // é¨åæåµä¸ä¼æ¥éï¼å¼å®¹ä¸ä¸\n        }\n    },\n\n    // æ ¹æ® $Elem è®¾ç½®éåº\n    createRangeByElem: function createRangeByElem($elem, toStart, isContent) {\n        // $elem - ç»è¿å°è£ç elem\n        // toStart - true å¼å§ä½ç½®ï¼false ç»æä½ç½®\n        // isContent - æ¯å¦éä¸­Elemçåå®¹\n        if (!$elem.length) {\n            return;\n        }\n\n        var elem = $elem[0];\n        var range = document.createRange();\n\n        if (isContent) {\n            range.selectNodeContents(elem);\n        } else {\n            range.selectNode(elem);\n        }\n\n        if (typeof toStart === 'boolean') {\n            range.collapse(toStart);\n        }\n\n        // å­å¨ range\n        this.saveRange(range);\n    }\n};\n\n/*\n    ä¸ä¼ è¿åº¦æ¡\n*/\n\nfunction Progress(editor) {\n    this.editor = editor;\n    this._time = 0;\n    this._isShow = false;\n    this._isRender = false;\n    this._timeoutId = 0;\n    this.$textContainer = editor.$textContainerElem;\n    this.$bar = $('<div class=\"w-e-progress\"></div>');\n}\n\nProgress.prototype = {\n    constructor: Progress,\n\n    show: function show(progress) {\n        var _this = this;\n\n        // ç¶æå¤ç\n        if (this._isShow) {\n            return;\n        }\n        this._isShow = true;\n\n        // æ¸²æ\n        var $bar = this.$bar;\n        if (!this._isRender) {\n            var $textContainer = this.$textContainer;\n            $textContainer.append($bar);\n        } else {\n            this._isRender = true;\n        }\n\n        // æ¹åè¿åº¦ï¼èæµï¼100ms æ¸²æä¸æ¬¡ï¼\n        if (Date.now() - this._time > 100) {\n            if (progress <= 1) {\n                $bar.css('width', progress * 100 + '%');\n                this._time = Date.now();\n            }\n        }\n\n        // éè\n        var timeoutId = this._timeoutId;\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(function () {\n            _this._hide();\n        }, 500);\n    },\n\n    _hide: function _hide() {\n        var $bar = this.$bar;\n        $bar.remove();\n\n        // ä¿®æ¹ç¶æ\n        this._time = 0;\n        this._isShow = false;\n        this._isRender = false;\n    }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n/*\n    ä¸ä¼ å¾ç\n*/\n\n// æé å½æ°\nfunction UploadImg(editor) {\n    this.editor = editor;\n}\n\n// åå\nUploadImg.prototype = {\n    constructor: UploadImg,\n\n    // æ ¹æ® debug å¼¹åºä¸åçä¿¡æ¯\n    _alert: function _alert(alertInfo, debugInfo) {\n        var editor = this.editor;\n        var debug = editor.config.debug;\n        var customAlert = editor.config.customAlert;\n\n        if (debug) {\n            throw new Error('wangEditor: ' + (debugInfo || alertInfo));\n        } else {\n            if (customAlert && typeof customAlert === 'function') {\n                customAlert(alertInfo);\n            } else {\n                alert(alertInfo);\n            }\n        }\n    },\n\n    // æ ¹æ®é¾æ¥æå¥å¾ç\n    insertLinkImg: function insertLinkImg(link) {\n        var _this2 = this;\n\n        if (!link) {\n            return;\n        }\n        var editor = this.editor;\n        var config = editor.config;\n\n        // æ ¡éªæ ¼å¼\n        var linkImgCheck = config.linkImgCheck;\n        var checkResult = void 0;\n        if (linkImgCheck && typeof linkImgCheck === 'function') {\n            checkResult = linkImgCheck(link);\n            if (typeof checkResult === 'string') {\n                // æ ¡éªå¤±è´¥ï¼æç¤ºä¿¡æ¯\n                alert(checkResult);\n                return;\n            }\n        }\n\n        editor.cmd.do('insertHTML', '<div class=\"img\"><img src=\"' + link + '\" style=\"max-width:100%;\"/></div>');\n\n        // éªè¯å¾ç url æ¯å¦ææï¼æ æçè¯ç»åºæç¤º\n        var img = document.createElement('img');\n        img.onload = function () {\n            var callback = config.linkImgCallback;\n            if (callback && typeof callback === 'function') {\n                callback(link);\n            }\n\n            img = null;\n        };\n        img.onerror = function () {\n            img = null;\n            // æ æ³æåä¸è½½å¾ç\n            _this2._alert('æå¥å¾çéè¯¯', 'wangEditor: \\u63D2\\u5165\\u56FE\\u7247\\u51FA\\u9519\\uFF0C\\u56FE\\u7247\\u94FE\\u63A5\\u662F \"' + link + '\"\\uFF0C\\u4E0B\\u8F7D\\u8BE5\\u94FE\\u63A5\\u5931\\u8D25');\n            return;\n        };\n        img.onabort = function () {\n            img = null;\n        };\n        img.src = link;\n    },\n\n    // ä¸ä¼ å¾ç\n    uploadImg: function uploadImg(files) {\n        var _this3 = this;\n\n        if (!files || !files.length) {\n            return;\n        }\n\n        // ------------------------------ è·åéç½®ä¿¡æ¯ ------------------------------\n        var editor = this.editor;\n        var config = editor.config;\n        var uploadImgServer = config.uploadImgServer;\n        var uploadImgShowBase64 = config.uploadImgShowBase64;\n\n        var maxSize = config.uploadImgMaxSize;\n        var maxSizeM = maxSize / 1024 / 1024;\n        var maxLength = config.uploadImgMaxLength || 10000;\n        var uploadFileName = config.uploadFileName || '';\n        var uploadImgParams = config.uploadImgParams || {};\n        var uploadImgParamsWithUrl = config.uploadImgParamsWithUrl;\n        var uploadImgHeaders = config.uploadImgHeaders || {};\n        var hooks = config.uploadImgHooks || {};\n        var timeout = config.uploadImgTimeout || 3000;\n        var withCredentials = config.withCredentials;\n        if (withCredentials == null) {\n            withCredentials = false;\n        }\n        var customUploadImg = config.customUploadImg;\n\n        if (!customUploadImg) {\n            // æ²¡æ customUploadImg çæåµä¸ï¼éè¦å¦ä¸ä¸¤ä¸ªéç½®æè½ç»§ç»­è¿è¡å¾çä¸ä¼ \n            if (!uploadImgServer && !uploadImgShowBase64) {\n                return;\n            }\n        }\n\n        // ------------------------------ éªè¯æä»¶ä¿¡æ¯ ------------------------------\n        var resultFiles = [];\n        var errInfo = [];\n        arrForEach(files, function (file) {\n            var name = file.name;\n            var size = file.size;\n\n            // chrome ä½çæ¬ name === undefined\n            if (!name || !size) {\n                return;\n            }\n\n            if (/\\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(name) === false) {\n                // åç¼åä¸åæ³ï¼ä¸æ¯å¾ç\n                errInfo.push('\\u3010' + name + '\\u3011\\u4E0D\\u662F\\u56FE\\u7247');\n                return;\n            }\n            if (maxSize < size) {\n                // ä¸ä¼ å¾çè¿å¤§\n                errInfo.push('\\u3010' + name + '\\u3011\\u5927\\u4E8E ' + maxSizeM + 'M');\n                return;\n            }\n\n            // éªè¯éè¿çå å¥ç»æåè¡¨\n            resultFiles.push(file);\n        });\n        // æåºéªè¯ä¿¡æ¯\n        if (errInfo.length) {\n            this._alert('å¾çéªè¯æªéè¿: \\n' + errInfo.join('\\n'));\n            return;\n        }\n        if (resultFiles.length > maxLength) {\n            this._alert('ä¸æ¬¡æå¤ä¸ä¼ ' + maxLength + 'å¼ å¾ç');\n            return;\n        }\n\n        // ------------------------------ èªå®ä¹ä¸ä¼  ------------------------------\n        if (customUploadImg && typeof customUploadImg === 'function') {\n            customUploadImg(resultFiles, this.insertLinkImg.bind(this));\n\n            // é»æ­¢ä»¥ä¸ä»£ç æ§è¡\n            return;\n        }\n\n        // æ·»å å¾çæ°æ®\n        var formdata = new FormData();\n        arrForEach(resultFiles, function (file) {\n            var name = uploadFileName || file.name;\n            formdata.append(name, file);\n        });\n\n        // ------------------------------ ä¸ä¼ å¾ç ------------------------------\n        if (uploadImgServer && typeof uploadImgServer === 'string') {\n            // æ·»å åæ°\n            var uploadImgServerArr = uploadImgServer.split('#');\n            uploadImgServer = uploadImgServerArr[0];\n            var uploadImgServerHash = uploadImgServerArr[1] || '';\n            objForEach(uploadImgParams, function (key, val) {\n                // å ä½¿ç¨èååºï¼èªå®ä¹åæ°ä¸è½é»è®¤ encode ï¼ç± v3.1.1 çæ¬å¼å§æ³¨éæ\n                // val = encodeURIComponent(val)\n\n                // ç¬¬ä¸ï¼å°åæ°æ¼æ¥å° url ä¸­\n                if (uploadImgParamsWithUrl) {\n                    if (uploadImgServer.indexOf('?') > 0) {\n                        uploadImgServer += '&';\n                    } else {\n                        uploadImgServer += '?';\n                    }\n                    uploadImgServer = uploadImgServer + key + '=' + val;\n                }\n\n                // ç¬¬äºï¼å°åæ°æ·»å å° formdata ä¸­\n                formdata.append(key, val);\n            });\n            if (uploadImgServerHash) {\n                uploadImgServer += '#' + uploadImgServerHash;\n            }\n\n            // å®ä¹ xhr\n            var xhr = new XMLHttpRequest();\n            xhr.open('POST', uploadImgServer);\n\n            // è®¾ç½®è¶æ¶\n            xhr.timeout = timeout;\n            xhr.ontimeout = function () {\n                // hook - timeout\n                if (hooks.timeout && typeof hooks.timeout === 'function') {\n                    hooks.timeout(xhr, editor);\n                }\n\n                _this3._alert('ä¸ä¼ å¾çè¶æ¶');\n            };\n\n            // çæ§ progress\n            if (xhr.upload) {\n                xhr.upload.onprogress = function (e) {\n                    var percent = void 0;\n                    // è¿åº¦æ¡\n                    var progressBar = new Progress(editor);\n                    if (e.lengthComputable) {\n                        percent = e.loaded / e.total;\n                        progressBar.show(percent);\n                    }\n                };\n            }\n\n            // è¿åæ°æ®\n            xhr.onreadystatechange = function () {\n                var result = void 0;\n                if (xhr.readyState === 4) {\n                    if (xhr.status < 200 || xhr.status >= 300) {\n                        // hook - error\n                        if (hooks.error && typeof hooks.error === 'function') {\n                            hooks.error(xhr, editor);\n                        }\n\n                        // xhr è¿åç¶æéè¯¯\n                        _this3._alert('ä¸ä¼ å¾çåçéè¯¯', '\\u4E0A\\u4F20\\u56FE\\u7247\\u53D1\\u751F\\u9519\\u8BEF\\uFF0C\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u72B6\\u6001\\u662F ' + xhr.status);\n                        return;\n                    }\n\n                    result = xhr.responseText;\n                    if ((typeof result === 'undefined' ? 'undefined' : _typeof(result)) !== 'object') {\n                        try {\n                            result = JSON.parse(result);\n                        } catch (ex) {\n                            // hook - fail\n                            if (hooks.fail && typeof hooks.fail === 'function') {\n                                hooks.fail(xhr, editor, result);\n                            }\n\n                            _this3._alert('ä¸ä¼ å¾çå¤±è´¥', 'ä¸ä¼ å¾çè¿åç»æéè¯¯ï¼è¿åç»ææ¯: ' + result);\n                            return;\n                        }\n                    }\n                    if (!hooks.customInsert && result.errno != '0') {\n                        // hook - fail\n                        if (hooks.fail && typeof hooks.fail === 'function') {\n                            hooks.fail(xhr, editor, result);\n                        }\n\n                        // æ°æ®éè¯¯\n                        _this3._alert('ä¸ä¼ å¾çå¤±è´¥', 'ä¸ä¼ å¾çè¿åç»æéè¯¯ï¼è¿åç»æ errno=' + result.errno);\n                    } else {\n                        if (hooks.customInsert && typeof hooks.customInsert === 'function') {\n                            // ä½¿ç¨èèªå®ä¹æå¥æ¹æ³\n                            hooks.customInsert(_this3.insertLinkImg.bind(_this3), result, editor);\n                        } else {\n                            // å°å¾çæå¥ç¼è¾å¨\n                            var data = result.data || [];\n                            data.forEach(function (link) {\n                                _this3.insertLinkImg(link);\n                            });\n                        }\n\n                        // hook - success\n                        if (hooks.success && typeof hooks.success === 'function') {\n                            hooks.success(xhr, editor, result);\n                        }\n                    }\n                }\n            };\n\n            // hook - before\n            if (hooks.before && typeof hooks.before === 'function') {\n                var beforeResult = hooks.before(xhr, editor, resultFiles);\n                if (beforeResult && (typeof beforeResult === 'undefined' ? 'undefined' : _typeof(beforeResult)) === 'object') {\n                    if (beforeResult.prevent) {\n                        // å¦æè¿åçç»ææ¯ {prevent: true, msg: 'xxxx'} åè¡¨ç¤ºç¨æ·æ¾å¼ä¸ä¼ \n                        this._alert(beforeResult.msg);\n                        return;\n                    }\n                }\n            }\n\n            // èªå®ä¹ headers\n            objForEach(uploadImgHeaders, function (key, val) {\n                xhr.setRequestHeader(key, val);\n            });\n\n            // è·¨åä¼  cookie\n            xhr.withCredentials = withCredentials;\n\n            // åéè¯·æ±\n            xhr.send(formdata);\n\n            // æ³¨æï¼è¦ return ãä¸å»æä½æ¥ä¸æ¥ç base64 æ¾ç¤ºæ¹å¼\n            return;\n        }\n\n        // ------------------------------ æ¾ç¤º base64 æ ¼å¼ ------------------------------\n        if (uploadImgShowBase64) {\n            arrForEach(files, function (file) {\n                var _this = _this3;\n                var reader = new FileReader();\n                reader.readAsDataURL(file);\n                reader.onload = function () {\n                    _this.insertLinkImg(this.result);\n                };\n            });\n        }\n    }\n};\n\nfunction codemirror() {\n    var userAgent = navigator.userAgent;\n    var platform = navigator.platform;\n\n    var gecko = /gecko\\/\\d/i.test(userAgent);\n    var ie_upto10 = /MSIE \\d/.test(userAgent);\n    var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n    var edge = /Edge\\/(\\d+)/.exec(userAgent);\n    var ie = ie_upto10 || ie_11up || edge;\n    var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n    var webkit = !edge && /WebKit\\//.test(userAgent);\n    var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n    var chrome = !edge && /Chrome\\//.test(userAgent);\n    var presto = /Opera\\//.test(userAgent);\n    var safari = /Apple Computer/.test(navigator.vendor);\n    var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n    var phantom = /PhantomJS/.test(userAgent);\n\n    var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n    var android = /Android/.test(userAgent);\n    // This is woefully incomplete. Suggestions for alternative methods welcome.\n    var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n    var mac = ios || /Mac/.test(platform);\n    var chromeOS = /\\bCrOS\\b/.test(userAgent);\n    var windows = /win/i.test(platform);\n\n    var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n    if (presto_version) {\n        presto_version = Number(presto_version[1]);\n    }\n    if (presto_version && presto_version >= 15) {\n        presto = false;webkit = true;\n    }\n    // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n    var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n    var captureRightClick = gecko || ie && ie_version >= 9;\n\n    function classTest(cls) {\n        return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n    }\n\n    var rmClass = function rmClass(node, cls) {\n        var current = node.className;\n        var match = classTest(cls).exec(current);\n        if (match) {\n            var after = current.slice(match.index + match[0].length);\n            node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n        }\n    };\n\n    function removeChildren(e) {\n        for (var count = e.childNodes.length; count > 0; --count) {\n            e.removeChild(e.firstChild);\n        }\n        return e;\n    }\n\n    function removeChildrenAndAdd(parent, e) {\n        return removeChildren(parent).appendChild(e);\n    }\n\n    function elt(tag, content, className, style) {\n        var e = document.createElement(tag);\n        if (className) {\n            e.className = className;\n        }\n        if (style) {\n            e.style.cssText = style;\n        }\n        if (typeof content == \"string\") {\n            e.appendChild(document.createTextNode(content));\n        } else if (content) {\n            for (var i = 0; i < content.length; ++i) {\n                e.appendChild(content[i]);\n            }\n        }\n        return e;\n    }\n    // wrapper for elt, which removes the elt from the accessibility tree\n    function eltP(tag, content, className, style) {\n        var e = elt(tag, content, className, style);\n        e.setAttribute(\"role\", \"presentation\");\n        return e;\n    }\n\n    var range;\n    if (document.createRange) {\n        range = function range(node, start, end, endNode) {\n            var r = document.createRange();\n            r.setEnd(endNode || node, end);\n            r.setStart(node, start);\n            return r;\n        };\n    } else {\n        range = function range(node, start, end) {\n            var r = document.body.createTextRange();\n            try {\n                r.moveToElementText(node.parentNode);\n            } catch (e) {\n                return r;\n            }\n            r.collapse(true);\n            r.moveEnd(\"character\", end);\n            r.moveStart(\"character\", start);\n            return r;\n        };\n    }\n\n    function contains(parent, child) {\n        if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n            {\n                child = child.parentNode;\n            }\n        if (parent.contains) {\n            return parent.contains(child);\n        }\n        do {\n            if (child.nodeType == 11) {\n                child = child.host;\n            }\n            if (child == parent) {\n                return true;\n            }\n        } while (child = child.parentNode);\n    }\n\n    function activeElt() {\n        // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n        // IE < 10 will throw when accessed while the page is loading or in an iframe.\n        // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n        var activeElement;\n        try {\n            activeElement = document.activeElement;\n        } catch (e) {\n            activeElement = document.body || null;\n        }\n        while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n            activeElement = activeElement.shadowRoot.activeElement;\n        }\n        return activeElement;\n    }\n\n    function addClass(node, cls) {\n        var current = node.className;\n        if (!classTest(cls).test(current)) {\n            node.className += (current ? \" \" : \"\") + cls;\n        }\n    }\n    function joinClasses(a, b) {\n        var as = a.split(\" \");\n        for (var i = 0; i < as.length; i++) {\n            if (as[i] && !classTest(as[i]).test(b)) {\n                b += \" \" + as[i];\n            }\n        }\n        return b;\n    }\n\n    var selectInput = function selectInput(node) {\n        node.select();\n    };\n    if (ios) // Mobile Safari apparently has a bug where select() is broken.\n        {\n            selectInput = function selectInput(node) {\n                node.selectionStart = 0;node.selectionEnd = node.value.length;\n            };\n        } else if (ie) // Suppress mysterious IE10 errors\n        {\n            selectInput = function selectInput(node) {\n                try {\n                    node.select();\n                } catch (_e) {}\n            };\n        }\n\n    function bind(f) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return f.apply(null, args);\n        };\n    }\n\n    function copyObj(obj, target, overwrite) {\n        if (!target) {\n            target = {};\n        }\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n                target[prop] = obj[prop];\n            }\n        }\n        return target;\n    }\n\n    // Counts the column offset in a string, taking tabs into account.\n    // Used mostly to find indentation.\n    function countColumn(string, end, tabSize, startIndex, startValue) {\n        if (end == null) {\n            end = string.search(/[^\\s\\u00a0]/);\n            if (end == -1) {\n                end = string.length;\n            }\n        }\n        for (var i = startIndex || 0, n = startValue || 0;;) {\n            var nextTab = string.indexOf(\"\\t\", i);\n            if (nextTab < 0 || nextTab >= end) {\n                return n + (end - i);\n            }\n            n += nextTab - i;\n            n += tabSize - n % tabSize;\n            i = nextTab + 1;\n        }\n    }\n\n    var Delayed = function Delayed() {\n        this.id = null;\n        this.f = null;\n        this.time = 0;\n        this.handler = bind(this.onTimeout, this);\n    };\n    Delayed.prototype.onTimeout = function (self) {\n        self.id = 0;\n        if (self.time <= +new Date()) {\n            self.f();\n        } else {\n            setTimeout(self.handler, self.time - +new Date());\n        }\n    };\n    Delayed.prototype.set = function (ms, f) {\n        this.f = f;\n        var time = +new Date() + ms;\n        if (!this.id || time < this.time) {\n            clearTimeout(this.id);\n            this.id = setTimeout(this.handler, ms);\n            this.time = time;\n        }\n    };\n\n    function indexOf(array, elt) {\n        for (var i = 0; i < array.length; ++i) {\n            if (array[i] == elt) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    // Number of pixels added to scroller and sizer to hide scrollbar\n    var scrollerGap = 30;\n\n    // Returned or thrown by various protocols to signal 'I'm not\n    // handling this'.\n    var Pass = { toString: function toString() {\n            return \"CodeMirror.Pass\";\n        } };\n\n    // Reused option objects for setSelection & friends\n    var sel_dontScroll = { scroll: false },\n        sel_mouse = { origin: \"*mouse\" },\n        sel_move = { origin: \"+move\" };\n\n    // The inverse of countColumn -- find the offset that corresponds to\n    // a particular column.\n    function findColumn(string, goal, tabSize) {\n        for (var pos = 0, col = 0;;) {\n            var nextTab = string.indexOf(\"\\t\", pos);\n            if (nextTab == -1) {\n                nextTab = string.length;\n            }\n            var skipped = nextTab - pos;\n            if (nextTab == string.length || col + skipped >= goal) {\n                return pos + Math.min(skipped, goal - col);\n            }\n            col += nextTab - pos;\n            col += tabSize - col % tabSize;\n            pos = nextTab + 1;\n            if (col >= goal) {\n                return pos;\n            }\n        }\n    }\n\n    var spaceStrs = [\"\"];\n    function spaceStr(n) {\n        while (spaceStrs.length <= n) {\n            spaceStrs.push(lst(spaceStrs) + \" \");\n        }\n        return spaceStrs[n];\n    }\n\n    function lst(arr) {\n        return arr[arr.length - 1];\n    }\n\n    function map(array, f) {\n        var out = [];\n        for (var i = 0; i < array.length; i++) {\n            out[i] = f(array[i], i);\n        }\n        return out;\n    }\n\n    function insertSorted(array, value, score) {\n        var pos = 0,\n            priority = score(value);\n        while (pos < array.length && score(array[pos]) <= priority) {\n            pos++;\n        }\n        array.splice(pos, 0, value);\n    }\n\n    function nothing() {}\n\n    function createObj(base, props) {\n        var inst;\n        if (Object.create) {\n            inst = Object.create(base);\n        } else {\n            nothing.prototype = base;\n            inst = new nothing();\n        }\n        if (props) {\n            copyObj(props, inst);\n        }\n        return inst;\n    }\n\n    var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n    function isWordCharBasic(ch) {\n        return (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n        );\n    }\n    function isWordChar(ch, helper) {\n        if (!helper) {\n            return isWordCharBasic(ch);\n        }\n        if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n            return true;\n        }\n        return helper.test(ch);\n    }\n\n    function isEmpty(obj) {\n        for (var n in obj) {\n            if (obj.hasOwnProperty(n) && obj[n]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // Extending unicode characters. A series of a non-extending char +\n    // any number of extending chars is treated as a single unit as far\n    // as editing and measuring is concerned. This is not fully correct,\n    // since some scripts/fonts/browsers also treat other configurations\n    // of code points as a group.\n    var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n    function isExtendingChar(ch) {\n        return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    }\n\n    // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n    function skipExtendingChars(str, pos, dir) {\n        while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n            pos += dir;\n        }\n        return pos;\n    }\n\n    // Returns the value from the range [`from`; `to`] that satisfies\n    // `pred` and is closest to `from`. Assumes that at least `to`\n    // satisfies `pred`. Supports `from` being greater than `to`.\n    function findFirst(pred, from, to) {\n        // At any point we are certain `to` satisfies `pred`, don't know\n        // whether `from` does.\n        var dir = from > to ? -1 : 1;\n        for (;;) {\n            if (from == to) {\n                return from;\n            }\n            var midF = (from + to) / 2,\n                mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n            if (mid == from) {\n                return pred(mid) ? from : to;\n            }\n            if (pred(mid)) {\n                to = mid;\n            } else {\n                from = mid + dir;\n            }\n        }\n    }\n\n    // BIDI HELPERS\n\n    function iterateBidiSections(order, from, to, f) {\n        if (!order) {\n            return f(from, to, \"ltr\", 0);\n        }\n        var found = false;\n        for (var i = 0; i < order.length; ++i) {\n            var part = order[i];\n            if (part.from < to && part.to > from || from == to && part.to == from) {\n                f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n                found = true;\n            }\n        }\n        if (!found) {\n            f(from, to, \"ltr\");\n        }\n    }\n\n    var bidiOther = null;\n    function getBidiPartAt(order, ch, sticky) {\n        var found;\n        bidiOther = null;\n        for (var i = 0; i < order.length; ++i) {\n            var cur = order[i];\n            if (cur.from < ch && cur.to > ch) {\n                return i;\n            }\n            if (cur.to == ch) {\n                if (cur.from != cur.to && sticky == \"before\") {\n                    found = i;\n                } else {\n                    bidiOther = i;\n                }\n            }\n            if (cur.from == ch) {\n                if (cur.from != cur.to && sticky != \"before\") {\n                    found = i;\n                } else {\n                    bidiOther = i;\n                }\n            }\n        }\n        return found != null ? found : bidiOther;\n    }\n\n    // Bidirectional ordering algorithm\n    // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n    // that this (partially) implements.\n\n    // One-char codes used for character types:\n    // L (L):   Left-to-Right\n    // R (R):   Right-to-Left\n    // r (AL):  Right-to-Left Arabic\n    // 1 (EN):  European Number\n    // + (ES):  European Number Separator\n    // % (ET):  European Number Terminator\n    // n (AN):  Arabic Number\n    // , (CS):  Common Number Separator\n    // m (NSM): Non-Spacing Mark\n    // b (BN):  Boundary Neutral\n    // s (B):   Paragraph Separator\n    // t (S):   Segment Separator\n    // w (WS):  Whitespace\n    // N (ON):  Other Neutrals\n\n    // Returns null if characters are ordered as they appear\n    // (left-to-right), or an array of sections ({from, to, level}\n    // objects) in the order in which they occur visually.\n    var bidiOrdering = function () {\n        // Character types for codepoints 0 to 0xff\n        var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n        // Character types for codepoints 0x600 to 0x6f9\n        var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n        function charType(code) {\n            if (code <= 0xf7) {\n                return lowTypes.charAt(code);\n            } else if (0x590 <= code && code <= 0x5f4) {\n                return \"R\";\n            } else if (0x600 <= code && code <= 0x6f9) {\n                return arabicTypes.charAt(code - 0x600);\n            } else if (0x6ee <= code && code <= 0x8ac) {\n                return \"r\";\n            } else if (0x2000 <= code && code <= 0x200b) {\n                return \"w\";\n            } else if (code == 0x200c) {\n                return \"b\";\n            } else {\n                return \"L\";\n            }\n        }\n\n        var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n        var isNeutral = /[stwN]/,\n            isStrong = /[LRr]/,\n            countsAsLeft = /[Lb1n]/,\n            countsAsNum = /[1n]/;\n\n        function BidiSpan(level, from, to) {\n            this.level = level;\n            this.from = from;this.to = to;\n        }\n\n        return function (str, direction) {\n            var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n            if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n                return false;\n            }\n            var len = str.length,\n                types = [];\n            for (var i = 0; i < len; ++i) {\n                types.push(charType(str.charCodeAt(i)));\n            }\n\n            // W1. Examine each non-spacing mark (NSM) in the level run, and\n            // change the type of the NSM to the type of the previous\n            // character. If the NSM is at the start of the level run, it will\n            // get the type of sor.\n            for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n                var type = types[i$1];\n                if (type == \"m\") {\n                    types[i$1] = prev;\n                } else {\n                    prev = type;\n                }\n            }\n\n            // W2. Search backwards from each instance of a European number\n            // until the first strong type (R, L, AL, or sor) is found. If an\n            // AL is found, change the type of the European number to Arabic\n            // number.\n            // W3. Change all ALs to R.\n            for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n                var type$1 = types[i$2];\n                if (type$1 == \"1\" && cur == \"r\") {\n                    types[i$2] = \"n\";\n                } else if (isStrong.test(type$1)) {\n                    cur = type$1;if (type$1 == \"r\") {\n                        types[i$2] = \"R\";\n                    }\n                }\n            }\n\n            // W4. A single European separator between two European numbers\n            // changes to a European number. A single common separator between\n            // two numbers of the same type changes to that type.\n            for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n                var type$2 = types[i$3];\n                if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n                    types[i$3] = \"1\";\n                } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n                    types[i$3] = prev$1;\n                }\n                prev$1 = type$2;\n            }\n\n            // W5. A sequence of European terminators adjacent to European\n            // numbers changes to all European numbers.\n            // W6. Otherwise, separators and terminators change to Other\n            // Neutral.\n            for (var i$4 = 0; i$4 < len; ++i$4) {\n                var type$3 = types[i$4];\n                if (type$3 == \",\") {\n                    types[i$4] = \"N\";\n                } else if (type$3 == \"%\") {\n                    var end = void 0;\n                    for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n                    var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n                    for (var j = i$4; j < end; ++j) {\n                        types[j] = replace;\n                    }\n                    i$4 = end - 1;\n                }\n            }\n\n            // W7. Search backwards from each instance of a European number\n            // until the first strong type (R, L, or sor) is found. If an L is\n            // found, then change the type of the European number to L.\n            for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n                var type$4 = types[i$5];\n                if (cur$1 == \"L\" && type$4 == \"1\") {\n                    types[i$5] = \"L\";\n                } else if (isStrong.test(type$4)) {\n                    cur$1 = type$4;\n                }\n            }\n\n            // N1. A sequence of neutrals takes the direction of the\n            // surrounding strong text if the text on both sides has the same\n            // direction. European and Arabic numbers act as if they were R in\n            // terms of their influence on neutrals. Start-of-level-run (sor)\n            // and end-of-level-run (eor) are used at level run boundaries.\n            // N2. Any remaining neutrals take the embedding direction.\n            for (var i$6 = 0; i$6 < len; ++i$6) {\n                if (isNeutral.test(types[i$6])) {\n                    var end$1 = void 0;\n                    for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n                    var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n                    var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n                    var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n                    for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n                        types[j$1] = replace$1;\n                    }\n                    i$6 = end$1 - 1;\n                }\n            }\n\n            // Here we depart from the documented algorithm, in order to avoid\n            // building up an actual levels array. Since there are only three\n            // levels (0, 1, 2) in an implementation that doesn't take\n            // explicit embedding into account, we can build up the order on\n            // the fly, without following the level-based algorithm.\n            var order = [],\n                m;\n            for (var i$7 = 0; i$7 < len;) {\n                if (countsAsLeft.test(types[i$7])) {\n                    var start = i$7;\n                    for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n                    order.push(new BidiSpan(0, start, i$7));\n                } else {\n                    var pos = i$7,\n                        at = order.length;\n                    for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n                    for (var j$2 = pos; j$2 < i$7;) {\n                        if (countsAsNum.test(types[j$2])) {\n                            if (pos < j$2) {\n                                order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                            }\n                            var nstart = j$2;\n                            for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n                            order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n                            pos = j$2;\n                        } else {\n                            ++j$2;\n                        }\n                    }\n                    if (pos < i$7) {\n                        order.splice(at, 0, new BidiSpan(1, pos, i$7));\n                    }\n                }\n            }\n            if (direction == \"ltr\") {\n                if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n                    order[0].from = m[0].length;\n                    order.unshift(new BidiSpan(0, 0, m[0].length));\n                }\n                if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n                    lst(order).to -= m[0].length;\n                    order.push(new BidiSpan(0, len - m[0].length, len));\n                }\n            }\n\n            return direction == \"rtl\" ? order.reverse() : order;\n        };\n    }();\n\n    // Get the bidi ordering for the given line (and cache it). Returns\n    // false for lines that are fully left-to-right, and an array of\n    // BidiSpan objects otherwise.\n    function getOrder(line, direction) {\n        var order = line.order;\n        if (order == null) {\n            order = line.order = bidiOrdering(line.text, direction);\n        }\n        return order;\n    }\n\n    // EVENT HANDLING\n\n    // Lightweight event framework. on/off also work on DOM nodes,\n    // registering native DOM handlers.\n\n    var noHandlers = [];\n\n    var on = function on(emitter, type, f) {\n        if (emitter.addEventListener) {\n            emitter.addEventListener(type, f, false);\n        } else if (emitter.attachEvent) {\n            emitter.attachEvent(\"on\" + type, f);\n        } else {\n            var map = emitter._handlers || (emitter._handlers = {});\n            map[type] = (map[type] || noHandlers).concat(f);\n        }\n    };\n\n    function getHandlers(emitter, type) {\n        return emitter._handlers && emitter._handlers[type] || noHandlers;\n    }\n\n    function off(emitter, type, f) {\n        if (emitter.removeEventListener) {\n            emitter.removeEventListener(type, f, false);\n        } else if (emitter.detachEvent) {\n            emitter.detachEvent(\"on\" + type, f);\n        } else {\n            var map = emitter._handlers,\n                arr = map && map[type];\n            if (arr) {\n                var index = indexOf(arr, f);\n                if (index > -1) {\n                    map[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n                }\n            }\n        }\n    }\n\n    function signal(emitter, type /*, values...*/) {\n        var handlers = getHandlers(emitter, type);\n        if (!handlers.length) {\n            return;\n        }\n        var args = Array.prototype.slice.call(arguments, 2);\n        for (var i = 0; i < handlers.length; ++i) {\n            handlers[i].apply(null, args);\n        }\n    }\n\n    // The DOM events that CodeMirror handles can be overridden by\n    // registering a (non-DOM) handler on the editor for the event name,\n    // and preventDefault-ing the event in that handler.\n    function signalDOMEvent(cm, e, override) {\n        if (typeof e == \"string\") {\n            e = { type: e, preventDefault: function preventDefault() {\n                    this.defaultPrevented = true;\n                } };\n        }\n        signal(cm, override || e.type, cm, e);\n        return e_defaultPrevented(e) || e.codemirrorIgnore;\n    }\n\n    function signalCursorActivity(cm) {\n        var arr = cm._handlers && cm._handlers.cursorActivity;\n        if (!arr) {\n            return;\n        }\n        var set$$1 = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n        for (var i = 0; i < arr.length; ++i) {\n            if (indexOf(set$$1, arr[i]) == -1) {\n                set$$1.push(arr[i]);\n            }\n        }\n    }\n\n    function hasHandler(emitter, type) {\n        return getHandlers(emitter, type).length > 0;\n    }\n\n    // Add on and off methods to a constructor's prototype, to make\n    // registering events on such objects more convenient.\n    function eventMixin(ctor) {\n        ctor.prototype.on = function (type, f) {\n            on(this, type, f);\n        };\n        ctor.prototype.off = function (type, f) {\n            off(this, type, f);\n        };\n    }\n\n    // Due to the fact that we still support jurassic IE versions, some\n    // compatibility wrappers are needed.\n\n    function e_preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n        } else {\n            e.returnValue = false;\n        }\n    }\n    function e_stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n        } else {\n            e.cancelBubble = true;\n        }\n    }\n    function e_defaultPrevented(e) {\n        return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n    }\n    function e_stop(e) {\n        e_preventDefault(e);e_stopPropagation(e);\n    }\n\n    function e_target(e) {\n        return e.target || e.srcElement;\n    }\n    function e_button(e) {\n        var b = e.which;\n        if (b == null) {\n            if (e.button & 1) {\n                b = 1;\n            } else if (e.button & 2) {\n                b = 3;\n            } else if (e.button & 4) {\n                b = 2;\n            }\n        }\n        if (mac && e.ctrlKey && b == 1) {\n            b = 3;\n        }\n        return b;\n    }\n\n    // Detect drag-and-drop\n    var dragAndDrop = function () {\n        // There is *some* kind of drag-and-drop support in IE6-8, but I\n        // couldn't get it to work yet.\n        if (ie && ie_version < 9) {\n            return false;\n        }\n        var div = elt('div');\n        return \"draggable\" in div || \"dragDrop\" in div;\n    }();\n\n    var zwspSupported;\n    function zeroWidthElement(measure) {\n        if (zwspSupported == null) {\n            var test = elt(\"span\", \"\\u200B\");\n            removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n            if (measure.firstChild.offsetHeight != 0) {\n                zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n            }\n        }\n        var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n        node.setAttribute(\"cm-text\", \"\");\n        return node;\n    }\n\n    // Feature-detect IE's crummy client rect reporting for bidi text\n    var badBidiRects;\n    function hasBadBidiRects(measure) {\n        if (badBidiRects != null) {\n            return badBidiRects;\n        }\n        var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n        var r0 = range(txt, 0, 1).getBoundingClientRect();\n        var r1 = range(txt, 1, 2).getBoundingClientRect();\n        removeChildren(measure);\n        if (!r0 || r0.left == r0.right) {\n            return false;\n        } // Safari returns null in some cases (#2780)\n        return badBidiRects = r1.right - r0.right < 3;\n    }\n\n    // See if \"\".split is the broken IE version, if so, provide an\n    // alternative way to split lines.\n    var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n        var pos = 0,\n            result = [],\n            l = string.length;\n        while (pos <= l) {\n            var nl = string.indexOf(\"\\n\", pos);\n            if (nl == -1) {\n                nl = string.length;\n            }\n            var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n            var rt = line.indexOf(\"\\r\");\n            if (rt != -1) {\n                result.push(line.slice(0, rt));\n                pos += rt + 1;\n            } else {\n                result.push(line);\n                pos = nl + 1;\n            }\n        }\n        return result;\n    } : function (string) {\n        return string.split(/\\r\\n?|\\n/);\n    };\n\n    var hasSelection = window.getSelection ? function (te) {\n        try {\n            return te.selectionStart != te.selectionEnd;\n        } catch (e) {\n            return false;\n        }\n    } : function (te) {\n        var range;\n        try {\n            range = te.ownerDocument.selection.createRange();\n        } catch (e) {}\n        if (!range || range.parentElement() != te) {\n            return false;\n        }\n        return range.compareEndPoints(\"StartToEnd\", range) != 0;\n    };\n\n    var hasCopyEvent = function () {\n        var e = elt(\"div\");\n        if (\"oncopy\" in e) {\n            return true;\n        }\n        e.setAttribute(\"oncopy\", \"return;\");\n        return typeof e.oncopy == \"function\";\n    }();\n\n    var badZoomedRects = null;\n    function hasBadZoomedRects(measure) {\n        if (badZoomedRects != null) {\n            return badZoomedRects;\n        }\n        var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n        var normal = node.getBoundingClientRect();\n        var fromRange = range(node, 0, 1).getBoundingClientRect();\n        return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n    }\n\n    // Known modes, by name and by MIME\n    var modes = {},\n        mimeModes = {};\n\n    // Extra arguments are stored as the mode's dependencies, which is\n    // used by (legacy) mechanisms like loadmode.js to automatically\n    // load a mode. (Preferred mechanism is the require/define calls.)\n    function defineMode(name, mode) {\n        if (arguments.length > 2) {\n            mode.dependencies = Array.prototype.slice.call(arguments, 2);\n        }\n        modes[name] = mode;\n    }\n\n    function defineMIME(mime, spec) {\n        mimeModes[mime] = spec;\n    }\n\n    // Given a MIME type, a {name, ...options} config object, or a name\n    // string, return a mode config object.\n    function resolveMode(spec) {\n        if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n            spec = mimeModes[spec];\n        } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n            var found = mimeModes[spec.name];\n            if (typeof found == \"string\") {\n                found = { name: found };\n            }\n            spec = createObj(found, spec);\n            spec.name = found.name;\n        } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n            return resolveMode(\"application/xml\");\n        } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n            return resolveMode(\"application/json\");\n        }\n        if (typeof spec == \"string\") {\n            return { name: spec };\n        } else {\n            return spec || { name: \"null\" };\n        }\n    }\n\n    // Given a mode spec (anything that resolveMode accepts), find and\n    // initialize an actual mode object.\n    function getMode(options, spec) {\n        spec = resolveMode(spec);\n        var mfactory = modes[spec.name];\n        if (!mfactory) {\n            return getMode(options, \"text/plain\");\n        }\n        var modeObj = mfactory(options, spec);\n        if (modeExtensions.hasOwnProperty(spec.name)) {\n            var exts = modeExtensions[spec.name];\n            for (var prop in exts) {\n                if (!exts.hasOwnProperty(prop)) {\n                    continue;\n                }\n                if (modeObj.hasOwnProperty(prop)) {\n                    modeObj[\"_\" + prop] = modeObj[prop];\n                }\n                modeObj[prop] = exts[prop];\n            }\n        }\n        modeObj.name = spec.name;\n        if (spec.helperType) {\n            modeObj.helperType = spec.helperType;\n        }\n        if (spec.modeProps) {\n            for (var prop$1 in spec.modeProps) {\n                modeObj[prop$1] = spec.modeProps[prop$1];\n            }\n        }\n\n        return modeObj;\n    }\n\n    // This can be used to attach properties to mode objects from\n    // outside the actual mode definition.\n    var modeExtensions = {};\n    function extendMode(mode, properties) {\n        var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n        copyObj(properties, exts);\n    }\n\n    function copyState(mode, state) {\n        if (state === true) {\n            return state;\n        }\n        if (mode.copyState) {\n            return mode.copyState(state);\n        }\n        var nstate = {};\n        for (var n in state) {\n            var val = state[n];\n            if (val instanceof Array) {\n                val = val.concat([]);\n            }\n            nstate[n] = val;\n        }\n        return nstate;\n    }\n\n    // Given a mode and a state (for that mode), find the inner mode and\n    // state at the position that the state refers to.\n    function innerMode(mode, state) {\n        var info;\n        while (mode.innerMode) {\n            info = mode.innerMode(state);\n            if (!info || info.mode == mode) {\n                break;\n            }\n            state = info.state;\n            mode = info.mode;\n        }\n        return info || { mode: mode, state: state };\n    }\n\n    function startState(mode, a1, a2) {\n        return mode.startState ? mode.startState(a1, a2) : true;\n    }\n\n    // STRING STREAM\n\n    // Fed to the mode parsers, provides helper functions to make\n    // parsers more succinct.\n\n    var StringStream = function StringStream(string, tabSize, lineOracle) {\n        this.pos = this.start = 0;\n        this.string = string;\n        this.tabSize = tabSize || 8;\n        this.lastColumnPos = this.lastColumnValue = 0;\n        this.lineStart = 0;\n        this.lineOracle = lineOracle;\n    };\n\n    StringStream.prototype.eol = function () {\n        return this.pos >= this.string.length;\n    };\n    StringStream.prototype.sol = function () {\n        return this.pos == this.lineStart;\n    };\n    StringStream.prototype.peek = function () {\n        return this.string.charAt(this.pos) || undefined;\n    };\n    StringStream.prototype.next = function () {\n        if (this.pos < this.string.length) {\n            return this.string.charAt(this.pos++);\n        }\n    };\n    StringStream.prototype.eat = function (match) {\n        var ch = this.string.charAt(this.pos);\n        var ok;\n        if (typeof match == \"string\") {\n            ok = ch == match;\n        } else {\n            ok = ch && (match.test ? match.test(ch) : match(ch));\n        }\n        if (ok) {\n            ++this.pos;return ch;\n        }\n    };\n    StringStream.prototype.eatWhile = function (match) {\n        var start = this.pos;\n        while (this.eat(match)) {}\n        return this.pos > start;\n    };\n    StringStream.prototype.eatSpace = function () {\n        var start = this.pos;\n        while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n            ++this.pos;\n        }\n        return this.pos > start;\n    };\n    StringStream.prototype.skipToEnd = function () {\n        this.pos = this.string.length;\n    };\n    StringStream.prototype.skipTo = function (ch) {\n        var found = this.string.indexOf(ch, this.pos);\n        if (found > -1) {\n            this.pos = found;return true;\n        }\n    };\n    StringStream.prototype.backUp = function (n) {\n        this.pos -= n;\n    };\n    StringStream.prototype.column = function () {\n        if (this.lastColumnPos < this.start) {\n            this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n            this.lastColumnPos = this.start;\n        }\n        return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    };\n    StringStream.prototype.indentation = function () {\n        return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    };\n    StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n        if (typeof pattern == \"string\") {\n            var cased = function cased(str) {\n                return caseInsensitive ? str.toLowerCase() : str;\n            };\n            var substr = this.string.substr(this.pos, pattern.length);\n            if (cased(substr) == cased(pattern)) {\n                if (consume !== false) {\n                    this.pos += pattern.length;\n                }\n                return true;\n            }\n        } else {\n            var match = this.string.slice(this.pos).match(pattern);\n            if (match && match.index > 0) {\n                return null;\n            }\n            if (match && consume !== false) {\n                this.pos += match[0].length;\n            }\n            return match;\n        }\n    };\n    StringStream.prototype.current = function () {\n        return this.string.slice(this.start, this.pos);\n    };\n    StringStream.prototype.hideFirstChars = function (n, inner) {\n        this.lineStart += n;\n        try {\n            return inner();\n        } finally {\n            this.lineStart -= n;\n        }\n    };\n    StringStream.prototype.lookAhead = function (n) {\n        var oracle = this.lineOracle;\n        return oracle && oracle.lookAhead(n);\n    };\n    StringStream.prototype.baseToken = function () {\n        var oracle = this.lineOracle;\n        return oracle && oracle.baseToken(this.pos);\n    };\n\n    // Find the line object corresponding to the given line number.\n    function getLine(doc, n) {\n        n -= doc.first;\n        if (n < 0 || n >= doc.size) {\n            throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n        }\n        var chunk = doc;\n        while (!chunk.lines) {\n            for (var i = 0;; ++i) {\n                var child = chunk.children[i],\n                    sz = child.chunkSize();\n                if (n < sz) {\n                    chunk = child;break;\n                }\n                n -= sz;\n            }\n        }\n        return chunk.lines[n];\n    }\n\n    // Get the part of a document between two positions, as an array of\n    // strings.\n    function getBetween(doc, start, end) {\n        var out = [],\n            n = start.line;\n        doc.iter(start.line, end.line + 1, function (line) {\n            var text = line.text;\n            if (n == end.line) {\n                text = text.slice(0, end.ch);\n            }\n            if (n == start.line) {\n                text = text.slice(start.ch);\n            }\n            out.push(text);\n            ++n;\n        });\n        return out;\n    }\n    // Get the lines between from and to, as array of strings.\n    function getLines(doc, from, to) {\n        var out = [];\n        doc.iter(from, to, function (line) {\n            out.push(line.text);\n        }); // iter aborts when callback returns truthy value\n        return out;\n    }\n\n    // Update the height of a line, propagating the height change\n    // upwards to parent nodes.\n    function updateLineHeight(line, height) {\n        var diff = height - line.height;\n        if (diff) {\n            for (var n = line; n; n = n.parent) {\n                n.height += diff;\n            }\n        }\n    }\n\n    // Given a line object, find its line number by walking up through\n    // its parent links.\n    function lineNo(line) {\n        if (line.parent == null) {\n            return null;\n        }\n        var cur = line.parent,\n            no = indexOf(cur.lines, line);\n        for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n            for (var i = 0;; ++i) {\n                if (chunk.children[i] == cur) {\n                    break;\n                }\n                no += chunk.children[i].chunkSize();\n            }\n        }\n        return no + cur.first;\n    }\n\n    // Find the line at the given vertical position, using the height\n    // information in the document tree.\n    function _lineAtHeight(chunk, h) {\n        var n = chunk.first;\n        outer: do {\n            for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n                var child = chunk.children[i$1],\n                    ch = child.height;\n                if (h < ch) {\n                    chunk = child;continue outer;\n                }\n                h -= ch;\n                n += child.chunkSize();\n            }\n            return n;\n        } while (!chunk.lines);\n        var i = 0;\n        for (; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i],\n                lh = line.height;\n            if (h < lh) {\n                break;\n            }\n            h -= lh;\n        }\n        return n + i;\n    }\n\n    function isLine(doc, l) {\n        return l >= doc.first && l < doc.first + doc.size;\n    }\n\n    function lineNumberFor(options, i) {\n        return String(options.lineNumberFormatter(i + options.firstLineNumber));\n    }\n\n    // A Pos instance represents a position within the text.\n    function Pos(line, ch, sticky) {\n        if (sticky === void 0) sticky = null;\n\n        if (!(this instanceof Pos)) {\n            return new Pos(line, ch, sticky);\n        }\n        this.line = line;\n        this.ch = ch;\n        this.sticky = sticky;\n    }\n\n    // Compare two positions, return 0 if they are the same, a negative\n    // number when a is less, and a positive number otherwise.\n    function cmp(a, b) {\n        return a.line - b.line || a.ch - b.ch;\n    }\n\n    function equalCursorPos(a, b) {\n        return a.sticky == b.sticky && cmp(a, b) == 0;\n    }\n\n    function copyPos(x) {\n        return Pos(x.line, x.ch);\n    }\n    function maxPos(a, b) {\n        return cmp(a, b) < 0 ? b : a;\n    }\n    function minPos(a, b) {\n        return cmp(a, b) < 0 ? a : b;\n    }\n\n    // Most of the external API clips given positions to make sure they\n    // actually exist within the document.\n    function clipLine(doc, n) {\n        return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n    }\n    function _clipPos(doc, pos) {\n        if (pos.line < doc.first) {\n            return Pos(doc.first, 0);\n        }\n        var last = doc.first + doc.size - 1;\n        if (pos.line > last) {\n            return Pos(last, getLine(doc, last).text.length);\n        }\n        return clipToLen(pos, getLine(doc, pos.line).text.length);\n    }\n    function clipToLen(pos, linelen) {\n        var ch = pos.ch;\n        if (ch == null || ch > linelen) {\n            return Pos(pos.line, linelen);\n        } else if (ch < 0) {\n            return Pos(pos.line, 0);\n        } else {\n            return pos;\n        }\n    }\n    function clipPosArray(doc, array) {\n        var out = [];\n        for (var i = 0; i < array.length; i++) {\n            out[i] = _clipPos(doc, array[i]);\n        }\n        return out;\n    }\n\n    var SavedContext = function SavedContext(state, lookAhead) {\n        this.state = state;\n        this.lookAhead = lookAhead;\n    };\n\n    var Context = function Context(doc, state, line, lookAhead) {\n        this.state = state;\n        this.doc = doc;\n        this.line = line;\n        this.maxLookAhead = lookAhead || 0;\n        this.baseTokens = null;\n        this.baseTokenPos = 1;\n    };\n\n    Context.prototype.lookAhead = function (n) {\n        var line = this.doc.getLine(this.line + n);\n        if (line != null && n > this.maxLookAhead) {\n            this.maxLookAhead = n;\n        }\n        return line;\n    };\n\n    Context.prototype.baseToken = function (n) {\n        if (!this.baseTokens) {\n            return null;\n        }\n        while (this.baseTokens[this.baseTokenPos] <= n) {\n            this.baseTokenPos += 2;\n        }\n        var type = this.baseTokens[this.baseTokenPos + 1];\n        return { type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n };\n    };\n\n    Context.prototype.nextLine = function () {\n        this.line++;\n        if (this.maxLookAhead > 0) {\n            this.maxLookAhead--;\n        }\n    };\n\n    Context.fromSaved = function (doc, saved, line) {\n        if (saved instanceof SavedContext) {\n            return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n        } else {\n            return new Context(doc, copyState(doc.mode, saved), line);\n        }\n    };\n\n    Context.prototype.save = function (copy) {\n        var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n        return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n    };\n\n    // Compute a style array (an array starting with a mode generation\n    // -- for invalidation -- followed by pairs of end positions and\n    // style strings), which is used to highlight the tokens on the\n    // line.\n    function highlightLine(cm, line, context, forceToEnd) {\n        // A styles array always starts with a number identifying the\n        // mode/overlays that it is based on (for easy invalidation).\n        var st = [cm.state.modeGen],\n            lineClasses = {};\n        // Compute the base array of styles\n        runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n            return st.push(end, style);\n        }, lineClasses, forceToEnd);\n        var state = context.state;\n\n        // Run overlays, adjust style array.\n        var loop = function loop(o) {\n            context.baseTokens = st;\n            var overlay = cm.state.overlays[o],\n                i = 1,\n                at = 0;\n            context.state = true;\n            runMode(cm, line.text, overlay.mode, context, function (end, style) {\n                var start = i;\n                // Ensure there's a token end at the current position, and that i points at it\n                while (at < end) {\n                    var i_end = st[i];\n                    if (i_end > end) {\n                        st.splice(i, 1, end, st[i + 1], i_end);\n                    }\n                    i += 2;\n                    at = Math.min(end, i_end);\n                }\n                if (!style) {\n                    return;\n                }\n                if (overlay.opaque) {\n                    st.splice(start, i - start, end, \"overlay \" + style);\n                    i = start + 2;\n                } else {\n                    for (; start < i; start += 2) {\n                        var cur = st[start + 1];\n                        st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n                    }\n                }\n            }, lineClasses);\n            context.state = state;\n            context.baseTokens = null;\n            context.baseTokenPos = 1;\n        };\n\n        for (var o = 0; o < cm.state.overlays.length; ++o) {\n            loop(o);\n        }return { styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null };\n    }\n\n    function getLineStyles(cm, line, updateFrontier) {\n        if (!line.styles || line.styles[0] != cm.state.modeGen) {\n            var context = getContextBefore(cm, lineNo(line));\n            var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n            var result = highlightLine(cm, line, context);\n            if (resetState) {\n                context.state = resetState;\n            }\n            line.stateAfter = context.save(!resetState);\n            line.styles = result.styles;\n            if (result.classes) {\n                line.styleClasses = result.classes;\n            } else if (line.styleClasses) {\n                line.styleClasses = null;\n            }\n            if (updateFrontier === cm.doc.highlightFrontier) {\n                cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n            }\n        }\n        return line.styles;\n    }\n\n    function getContextBefore(cm, n, precise) {\n        var doc = cm.doc,\n            display = cm.display;\n        if (!doc.mode.startState) {\n            return new Context(doc, true, n);\n        }\n        var start = findStartLine(cm, n, precise);\n        var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n        var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n        doc.iter(start, n, function (line) {\n            processLine(cm, line.text, context);\n            var pos = context.line;\n            line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n            context.nextLine();\n        });\n        if (precise) {\n            doc.modeFrontier = context.line;\n        }\n        return context;\n    }\n\n    // Lightweight form of highlight -- proceed over this line and\n    // update state, but don't save a style array. Used for lines that\n    // aren't currently visible.\n    function processLine(cm, text, context, startAt) {\n        var mode = cm.doc.mode;\n        var stream = new StringStream(text, cm.options.tabSize, context);\n        stream.start = stream.pos = startAt || 0;\n        if (text == \"\") {\n            callBlankLine(mode, context.state);\n        }\n        while (!stream.eol()) {\n            readToken(mode, stream, context.state);\n            stream.start = stream.pos;\n        }\n    }\n\n    function callBlankLine(mode, state) {\n        if (mode.blankLine) {\n            return mode.blankLine(state);\n        }\n        if (!mode.innerMode) {\n            return;\n        }\n        var inner = innerMode(mode, state);\n        if (inner.mode.blankLine) {\n            return inner.mode.blankLine(inner.state);\n        }\n    }\n\n    function readToken(mode, stream, state, inner) {\n        for (var i = 0; i < 10; i++) {\n            if (inner) {\n                inner[0] = innerMode(mode, state).mode;\n            }\n            var style = mode.token(stream, state);\n            if (stream.pos > stream.start) {\n                return style;\n            }\n        }\n        throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n    }\n\n    var Token = function Token(stream, type, state) {\n        this.start = stream.start;this.end = stream.pos;\n        this.string = stream.current();\n        this.type = type || null;\n        this.state = state;\n    };\n\n    // Utility for getTokenAt and getLineTokens\n    function takeToken(cm, pos, precise, asArray) {\n        var doc = cm.doc,\n            mode = doc.mode,\n            style;\n        pos = _clipPos(doc, pos);\n        var line = getLine(doc, pos.line),\n            context = getContextBefore(cm, pos.line, precise);\n        var stream = new StringStream(line.text, cm.options.tabSize, context),\n            tokens;\n        if (asArray) {\n            tokens = [];\n        }\n        while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n            stream.start = stream.pos;\n            style = readToken(mode, stream, context.state);\n            if (asArray) {\n                tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n            }\n        }\n        return asArray ? tokens : new Token(stream, style, context.state);\n    }\n\n    function extractLineClasses(type, output) {\n        if (type) {\n            for (;;) {\n                var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n                if (!lineClass) {\n                    break;\n                }\n                type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n                var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n                if (output[prop] == null) {\n                    output[prop] = lineClass[2];\n                } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n                    output[prop] += \" \" + lineClass[2];\n                }\n            }\n        }\n        return type;\n    }\n\n    // Run the given mode's parser over a line, calling f for each token.\n    function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n        var flattenSpans = mode.flattenSpans;\n        if (flattenSpans == null) {\n            flattenSpans = cm.options.flattenSpans;\n        }\n        var curStart = 0,\n            curStyle = null;\n        var stream = new StringStream(text, cm.options.tabSize, context),\n            style;\n        var inner = cm.options.addModeClass && [null];\n        if (text == \"\") {\n            extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n        }\n        while (!stream.eol()) {\n            if (stream.pos > cm.options.maxHighlightLength) {\n                flattenSpans = false;\n                if (forceToEnd) {\n                    processLine(cm, text, context, stream.pos);\n                }\n                stream.pos = text.length;\n                style = null;\n            } else {\n                style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n            }\n            if (inner) {\n                var mName = inner[0].name;\n                if (mName) {\n                    style = \"m-\" + (style ? mName + \" \" + style : mName);\n                }\n            }\n            if (!flattenSpans || curStyle != style) {\n                while (curStart < stream.start) {\n                    curStart = Math.min(stream.start, curStart + 5000);\n                    f(curStart, curStyle);\n                }\n                curStyle = style;\n            }\n            stream.start = stream.pos;\n        }\n        while (curStart < stream.pos) {\n            // Webkit seems to refuse to render text nodes longer than 57444\n            // characters, and returns inaccurate measurements in nodes\n            // starting around 5000 chars.\n            var pos = Math.min(stream.pos, curStart + 5000);\n            f(pos, curStyle);\n            curStart = pos;\n        }\n    }\n\n    // Finds the line to start with when starting a parse. Tries to\n    // find a line with a stateAfter, so that it can start with a\n    // valid state. If that fails, it returns the line with the\n    // smallest indentation, which tends to need the least context to\n    // parse correctly.\n    function findStartLine(cm, n, precise) {\n        var minindent,\n            minline,\n            doc = cm.doc;\n        var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n        for (var search = n; search > lim; --search) {\n            if (search <= doc.first) {\n                return doc.first;\n            }\n            var line = getLine(doc, search - 1),\n                after = line.stateAfter;\n            if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n                return search;\n            }\n            var indented = countColumn(line.text, null, cm.options.tabSize);\n            if (minline == null || minindent > indented) {\n                minline = search - 1;\n                minindent = indented;\n            }\n        }\n        return minline;\n    }\n\n    function retreatFrontier(doc, n) {\n        doc.modeFrontier = Math.min(doc.modeFrontier, n);\n        if (doc.highlightFrontier < n - 10) {\n            return;\n        }\n        var start = doc.first;\n        for (var line = n - 1; line > start; line--) {\n            var saved = getLine(doc, line).stateAfter;\n            // change is on 3\n            // state on line 1 looked ahead 2 -- so saw 3\n            // test 1 + 2 < 3 should cover this\n            if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n                start = line + 1;\n                break;\n            }\n        }\n        doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n    }\n\n    // Optimize some code when these features are not used.\n    var sawReadOnlySpans = false,\n        sawCollapsedSpans = false;\n\n    function seeReadOnlySpans() {\n        sawReadOnlySpans = true;\n    }\n\n    function seeCollapsedSpans() {\n        sawCollapsedSpans = true;\n    }\n\n    // TEXTMARKER SPANS\n\n    function MarkedSpan(marker, from, to) {\n        this.marker = marker;\n        this.from = from;this.to = to;\n    }\n\n    // Search an array of spans for a span matching the given marker.\n    function getMarkedSpanFor(spans, marker) {\n        if (spans) {\n            for (var i = 0; i < spans.length; ++i) {\n                var span = spans[i];\n                if (span.marker == marker) {\n                    return span;\n                }\n            }\n        }\n    }\n    // Remove a span from an array, returning undefined if no spans are\n    // left (we don't store arrays for lines without spans).\n    function removeMarkedSpan(spans, span) {\n        var r;\n        for (var i = 0; i < spans.length; ++i) {\n            if (spans[i] != span) {\n                (r || (r = [])).push(spans[i]);\n            }\n        }\n        return r;\n    }\n    // Add a span to a line.\n    function addMarkedSpan(line, span) {\n        line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n        span.marker.attachLine(line);\n    }\n\n    // Used for the algorithm that adjusts markers for a change in the\n    // document. These functions cut an array of spans at a given\n    // character position, returning an array of remaining chunks (or\n    // undefined if nothing remains).\n    function markedSpansBefore(old, startCh, isInsert) {\n        var nw;\n        if (old) {\n            for (var i = 0; i < old.length; ++i) {\n                var span = old[i],\n                    marker = span.marker;\n                var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n                if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n                    var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n                }\n            }\n        }\n        return nw;\n    }\n    function markedSpansAfter(old, endCh, isInsert) {\n        var nw;\n        if (old) {\n            for (var i = 0; i < old.length; ++i) {\n                var span = old[i],\n                    marker = span.marker;\n                var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n                if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n                    var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n                }\n            }\n        }\n        return nw;\n    }\n\n    // Given a change object, compute the new set of marker spans that\n    // cover the line in which the change took place. Removes spans\n    // entirely within the change, reconnects spans belonging to the\n    // same marker that appear on both sides of the change, and cuts off\n    // spans partially within the change. Returns an array of span\n    // arrays with one element for each line in (after) the change.\n    function stretchSpansOverChange(doc, change) {\n        if (change.full) {\n            return null;\n        }\n        var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n        var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n        if (!oldFirst && !oldLast) {\n            return null;\n        }\n\n        var startCh = change.from.ch,\n            endCh = change.to.ch,\n            isInsert = cmp(change.from, change.to) == 0;\n        // Get the spans that 'stick out' on both sides\n        var first = markedSpansBefore(oldFirst, startCh, isInsert);\n        var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n        // Next, merge those two ends\n        var sameLine = change.text.length == 1,\n            offset = lst(change.text).length + (sameLine ? startCh : 0);\n        if (first) {\n            // Fix up .to properties of first\n            for (var i = 0; i < first.length; ++i) {\n                var span = first[i];\n                if (span.to == null) {\n                    var found = getMarkedSpanFor(last, span.marker);\n                    if (!found) {\n                        span.to = startCh;\n                    } else if (sameLine) {\n                        span.to = found.to == null ? null : found.to + offset;\n                    }\n                }\n            }\n        }\n        if (last) {\n            // Fix up .from in last (or move them into first in case of sameLine)\n            for (var i$1 = 0; i$1 < last.length; ++i$1) {\n                var span$1 = last[i$1];\n                if (span$1.to != null) {\n                    span$1.to += offset;\n                }\n                if (span$1.from == null) {\n                    var found$1 = getMarkedSpanFor(first, span$1.marker);\n                    if (!found$1) {\n                        span$1.from = offset;\n                        if (sameLine) {\n                            (first || (first = [])).push(span$1);\n                        }\n                    }\n                } else {\n                    span$1.from += offset;\n                    if (sameLine) {\n                        (first || (first = [])).push(span$1);\n                    }\n                }\n            }\n        }\n        // Make sure we didn't create any zero-length spans\n        if (first) {\n            first = clearEmptySpans(first);\n        }\n        if (last && last != first) {\n            last = clearEmptySpans(last);\n        }\n\n        var newMarkers = [first];\n        if (!sameLine) {\n            // Fill gap with whole-line-spans\n            var gap = change.text.length - 2,\n                gapMarkers;\n            if (gap > 0 && first) {\n                for (var i$2 = 0; i$2 < first.length; ++i$2) {\n                    if (first[i$2].to == null) {\n                        (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n                    }\n                }\n            }\n            for (var i$3 = 0; i$3 < gap; ++i$3) {\n                newMarkers.push(gapMarkers);\n            }\n            newMarkers.push(last);\n        }\n        return newMarkers;\n    }\n\n    // Remove spans that are empty and don't have a clearWhenEmpty\n    // option of false.\n    function clearEmptySpans(spans) {\n        for (var i = 0; i < spans.length; ++i) {\n            var span = spans[i];\n            if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n                spans.splice(i--, 1);\n            }\n        }\n        if (!spans.length) {\n            return null;\n        }\n        return spans;\n    }\n\n    // Used to 'clip' out readOnly ranges when making a change.\n    function removeReadOnlyRanges(doc, from, to) {\n        var markers = null;\n        doc.iter(from.line, to.line + 1, function (line) {\n            if (line.markedSpans) {\n                for (var i = 0; i < line.markedSpans.length; ++i) {\n                    var mark = line.markedSpans[i].marker;\n                    if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n                        (markers || (markers = [])).push(mark);\n                    }\n                }\n            }\n        });\n        if (!markers) {\n            return null;\n        }\n        var parts = [{ from: from, to: to }];\n        for (var i = 0; i < markers.length; ++i) {\n            var mk = markers[i],\n                m = mk.find(0);\n            for (var j = 0; j < parts.length; ++j) {\n                var p = parts[j];\n                if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n                    continue;\n                }\n                var newParts = [j, 1],\n                    dfrom = cmp(p.from, m.from),\n                    dto = cmp(p.to, m.to);\n                if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n                    newParts.push({ from: p.from, to: m.from });\n                }\n                if (dto > 0 || !mk.inclusiveRight && !dto) {\n                    newParts.push({ from: m.to, to: p.to });\n                }\n                parts.splice.apply(parts, newParts);\n                j += newParts.length - 3;\n            }\n        }\n        return parts;\n    }\n\n    // Connect or disconnect spans from a line.\n    function detachMarkedSpans(line) {\n        var spans = line.markedSpans;\n        if (!spans) {\n            return;\n        }\n        for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.detachLine(line);\n        }\n        line.markedSpans = null;\n    }\n    function attachMarkedSpans(line, spans) {\n        if (!spans) {\n            return;\n        }\n        for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.attachLine(line);\n        }\n        line.markedSpans = spans;\n    }\n\n    // Helpers used when computing which overlapping collapsed span\n    // counts as the larger one.\n    function extraLeft(marker) {\n        return marker.inclusiveLeft ? -1 : 0;\n    }\n    function extraRight(marker) {\n        return marker.inclusiveRight ? 1 : 0;\n    }\n\n    // Returns a number indicating which of two overlapping collapsed\n    // spans is larger (and thus includes the other). Falls back to\n    // comparing ids when the spans cover exactly the same range.\n    function compareCollapsedMarkers(a, b) {\n        var lenDiff = a.lines.length - b.lines.length;\n        if (lenDiff != 0) {\n            return lenDiff;\n        }\n        var aPos = a.find(),\n            bPos = b.find();\n        var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n        if (fromCmp) {\n            return -fromCmp;\n        }\n        var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n        if (toCmp) {\n            return toCmp;\n        }\n        return b.id - a.id;\n    }\n\n    // Find out whether a line ends or starts in a collapsed span. If\n    // so, return the marker for that span.\n    function collapsedSpanAtSide(line, start) {\n        var sps = sawCollapsedSpans && line.markedSpans,\n            found;\n        if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n                sp = sps[i];\n                if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n                    found = sp.marker;\n                }\n            }\n        }\n        return found;\n    }\n    function collapsedSpanAtStart(line) {\n        return collapsedSpanAtSide(line, true);\n    }\n    function collapsedSpanAtEnd(line) {\n        return collapsedSpanAtSide(line, false);\n    }\n\n    function collapsedSpanAround(line, ch) {\n        var sps = sawCollapsedSpans && line.markedSpans,\n            found;\n        if (sps) {\n            for (var i = 0; i < sps.length; ++i) {\n                var sp = sps[i];\n                if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n                    found = sp.marker;\n                }\n            }\n        }\n        return found;\n    }\n\n    // Test whether there exists a collapsed span that partially\n    // overlaps (covers the start or end, but not both) of a new span.\n    // Such overlap is not allowed.\n    function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n        var line = getLine(doc, lineNo);\n        var sps = sawCollapsedSpans && line.markedSpans;\n        if (sps) {\n            for (var i = 0; i < sps.length; ++i) {\n                var sp = sps[i];\n                if (!sp.marker.collapsed) {\n                    continue;\n                }\n                var found = sp.marker.find(0);\n                var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n                var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n                if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n                    continue;\n                }\n                if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n                    return true;\n                }\n            }\n        }\n    }\n\n    // A visual line is a line as drawn on the screen. Folding, for\n    // example, can cause multiple logical lines to appear on the same\n    // visual line. This finds the start of the visual line that the\n    // given line is part of (usually that is the line itself).\n    function visualLine(line) {\n        var merged;\n        while (merged = collapsedSpanAtStart(line)) {\n            line = merged.find(-1, true).line;\n        }\n        return line;\n    }\n\n    function visualLineEnd(line) {\n        var merged;\n        while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n        }\n        return line;\n    }\n\n    // Returns an array of logical lines that continue the visual line\n    // started by the argument, or undefined if there are no such lines.\n    function visualLineContinued(line) {\n        var merged, lines;\n        while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;(lines || (lines = [])).push(line);\n        }\n        return lines;\n    }\n\n    // Get the line number of the start of the visual line that the\n    // given line number is part of.\n    function visualLineNo(doc, lineN) {\n        var line = getLine(doc, lineN),\n            vis = visualLine(line);\n        if (line == vis) {\n            return lineN;\n        }\n        return lineNo(vis);\n    }\n\n    // Get the line number of the start of the next visual line after\n    // the given line.\n    function visualLineEndNo(doc, lineN) {\n        if (lineN > doc.lastLine()) {\n            return lineN;\n        }\n        var line = getLine(doc, lineN),\n            merged;\n        if (!lineIsHidden(doc, line)) {\n            return lineN;\n        }\n        while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n        }\n        return lineNo(line) + 1;\n    }\n\n    // Compute whether a line is hidden. Lines count as hidden when they\n    // are part of a visual line that starts with another line, or when\n    // they are entirely covered by collapsed, non-widget span.\n    function lineIsHidden(doc, line) {\n        var sps = sawCollapsedSpans && line.markedSpans;\n        if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n                sp = sps[i];\n                if (!sp.marker.collapsed) {\n                    continue;\n                }\n                if (sp.from == null) {\n                    return true;\n                }\n                if (sp.marker.widgetNode) {\n                    continue;\n                }\n                if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n                    return true;\n                }\n            }\n        }\n    }\n    function lineIsHiddenInner(doc, line, span) {\n        if (span.to == null) {\n            var end = span.marker.find(1, true);\n            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n        }\n        if (span.marker.inclusiveRight && span.to == line.text.length) {\n            return true;\n        }\n        for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n            sp = line.markedSpans[i];\n            if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n                return true;\n            }\n        }\n    }\n\n    // Find the height above the given line.\n    function _heightAtLine(lineObj) {\n        lineObj = visualLine(lineObj);\n\n        var h = 0,\n            chunk = lineObj.parent;\n        for (var i = 0; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i];\n            if (line == lineObj) {\n                break;\n            } else {\n                h += line.height;\n            }\n        }\n        for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n            for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n                var cur = p.children[i$1];\n                if (cur == chunk) {\n                    break;\n                } else {\n                    h += cur.height;\n                }\n            }\n        }\n        return h;\n    }\n\n    // Compute the character length of a line, taking into account\n    // collapsed ranges (see markText) that might hide parts, and join\n    // other lines onto it.\n    function lineLength(line) {\n        if (line.height == 0) {\n            return 0;\n        }\n        var len = line.text.length,\n            merged,\n            cur = line;\n        while (merged = collapsedSpanAtStart(cur)) {\n            var found = merged.find(0, true);\n            cur = found.from.line;\n            len += found.from.ch - found.to.ch;\n        }\n        cur = line;\n        while (merged = collapsedSpanAtEnd(cur)) {\n            var found$1 = merged.find(0, true);\n            len -= cur.text.length - found$1.from.ch;\n            cur = found$1.to.line;\n            len += cur.text.length - found$1.to.ch;\n        }\n        return len;\n    }\n\n    // Find the longest line in the document.\n    function findMaxLine(cm) {\n        var d = cm.display,\n            doc = cm.doc;\n        d.maxLine = getLine(doc, doc.first);\n        d.maxLineLength = lineLength(d.maxLine);\n        d.maxLineChanged = true;\n        doc.iter(function (line) {\n            var len = lineLength(line);\n            if (len > d.maxLineLength) {\n                d.maxLineLength = len;\n                d.maxLine = line;\n            }\n        });\n    }\n\n    // LINE DATA STRUCTURE\n\n    // Line objects. These hold state related to a line, including\n    // highlighting info (the styles array).\n    var Line = function Line(text, markedSpans, estimateHeight) {\n        this.text = text;\n        attachMarkedSpans(this, markedSpans);\n        this.height = estimateHeight ? estimateHeight(this) : 1;\n    };\n\n    Line.prototype.lineNo = function () {\n        return lineNo(this);\n    };\n    eventMixin(Line);\n\n    // Change the content (text, markers) of a line. Automatically\n    // invalidates cached information and tries to re-estimate the\n    // line's height.\n    function updateLine(line, text, markedSpans, estimateHeight) {\n        line.text = text;\n        if (line.stateAfter) {\n            line.stateAfter = null;\n        }\n        if (line.styles) {\n            line.styles = null;\n        }\n        if (line.order != null) {\n            line.order = null;\n        }\n        detachMarkedSpans(line);\n        attachMarkedSpans(line, markedSpans);\n        var estHeight = estimateHeight ? estimateHeight(line) : 1;\n        if (estHeight != line.height) {\n            updateLineHeight(line, estHeight);\n        }\n    }\n\n    // Detach a line from the document tree and its markers.\n    function cleanUpLine(line) {\n        line.parent = null;\n        detachMarkedSpans(line);\n    }\n\n    // Convert a style as returned by a mode (either null, or a string\n    // containing one or more styles) to a CSS style. This is cached,\n    // and also looks for line-wide styles.\n    var styleToClassCache = {},\n        styleToClassCacheWithMode = {};\n    function interpretTokenStyle(style, options) {\n        if (!style || /^\\s*$/.test(style)) {\n            return null;\n        }\n        var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n        return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n    }\n\n    // Render the DOM representation of the text of a line. Also builds\n    // up a 'line map', which points at the DOM nodes that represent\n    // specific stretches of text, and is used by the measuring code.\n    // The returned object contains the DOM node, this map, and\n    // information about line-wide styles that were set by the mode.\n    function buildLineContent(cm, lineView) {\n        // The padding-right forces the element to have a 'border', which\n        // is needed on Webkit to be able to get line-level bounding\n        // rectangles for it (in measureChar).\n        var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n        var builder = { pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n            col: 0, pos: 0, cm: cm,\n            trailingSpace: false,\n            splitSpaces: cm.getOption(\"lineWrapping\") };\n        lineView.measure = {};\n\n        // Iterate over the logical lines that make up this visual line.\n        for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n            var line = i ? lineView.rest[i - 1] : lineView.line,\n                order = void 0;\n            builder.pos = 0;\n            builder.addToken = buildToken;\n            // Optionally wire in some hacks into the token-rendering\n            // algorithm, to deal with browser quirks.\n            if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n                builder.addToken = buildTokenBadBidi(builder.addToken, order);\n            }\n            builder.map = [];\n            var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n            insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n            if (line.styleClasses) {\n                if (line.styleClasses.bgClass) {\n                    builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n                }\n                if (line.styleClasses.textClass) {\n                    builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n                }\n            }\n\n            // Ensure at least a single node is present, for measuring.\n            if (builder.map.length == 0) {\n                builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n            }\n\n            // Store the map and a cache object for the current logical line\n            if (i == 0) {\n                lineView.measure.map = builder.map;\n                lineView.measure.cache = {};\n            } else {\n                (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n            }\n        }\n\n        // See issue #2901\n        if (webkit) {\n            var last = builder.content.lastChild;\n            if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n                builder.content.className = \"cm-tab-wrap-hack\";\n            }\n        }\n\n        signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n        if (builder.pre.className) {\n            builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n        }\n\n        return builder;\n    }\n\n    function defaultSpecialCharPlaceholder(ch) {\n        var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n        token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n        token.setAttribute(\"aria-label\", token.title);\n        return token;\n    }\n\n    // Build up the DOM representation for a single token, and add it to\n    // the line map. Takes care to render special characters separately.\n    function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n        if (!text) {\n            return;\n        }\n        var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n        var special = builder.cm.state.specialChars,\n            mustWrap = false;\n        var content;\n        if (!special.test(text)) {\n            builder.col += text.length;\n            content = document.createTextNode(displayText);\n            builder.map.push(builder.pos, builder.pos + text.length, content);\n            if (ie && ie_version < 9) {\n                mustWrap = true;\n            }\n            builder.pos += text.length;\n        } else {\n            content = document.createDocumentFragment();\n            var pos = 0;\n            while (true) {\n                special.lastIndex = pos;\n                var m = special.exec(text);\n                var skipped = m ? m.index - pos : text.length - pos;\n                if (skipped) {\n                    var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n                    if (ie && ie_version < 9) {\n                        content.appendChild(elt(\"span\", [txt]));\n                    } else {\n                        content.appendChild(txt);\n                    }\n                    builder.map.push(builder.pos, builder.pos + skipped, txt);\n                    builder.col += skipped;\n                    builder.pos += skipped;\n                }\n                if (!m) {\n                    break;\n                }\n                pos += skipped + 1;\n                var txt$1 = void 0;\n                if (m[0] == \"\\t\") {\n                    var tabSize = builder.cm.options.tabSize,\n                        tabWidth = tabSize - builder.col % tabSize;\n                    txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n                    txt$1.setAttribute(\"role\", \"presentation\");\n                    txt$1.setAttribute(\"cm-text\", \"\\t\");\n                    builder.col += tabWidth;\n                } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n                    txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n                    txt$1.setAttribute(\"cm-text\", m[0]);\n                    builder.col += 1;\n                } else {\n                    txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n                    txt$1.setAttribute(\"cm-text\", m[0]);\n                    if (ie && ie_version < 9) {\n                        content.appendChild(elt(\"span\", [txt$1]));\n                    } else {\n                        content.appendChild(txt$1);\n                    }\n                    builder.col += 1;\n                }\n                builder.map.push(builder.pos, builder.pos + 1, txt$1);\n                builder.pos++;\n            }\n        }\n        builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n        if (style || startStyle || endStyle || mustWrap || css) {\n            var fullStyle = style || \"\";\n            if (startStyle) {\n                fullStyle += startStyle;\n            }\n            if (endStyle) {\n                fullStyle += endStyle;\n            }\n            var token = elt(\"span\", [content], fullStyle, css);\n            if (attributes) {\n                for (var attr in attributes) {\n                    if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\") {\n                        token.setAttribute(attr, attributes[attr]);\n                    }\n                }\n            }\n            return builder.content.appendChild(token);\n        }\n        builder.content.appendChild(content);\n    }\n\n    // Change some spaces to NBSP to prevent the browser from collapsing\n    // trailing spaces at the end of a line when rendering text (issue #1362).\n    function splitSpaces(text, trailingBefore) {\n        if (text.length > 1 && !/  /.test(text)) {\n            return text;\n        }\n        var spaceBefore = trailingBefore,\n            result = \"\";\n        for (var i = 0; i < text.length; i++) {\n            var ch = text.charAt(i);\n            if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n                ch = \"\\xA0\";\n            }\n            result += ch;\n            spaceBefore = ch == \" \";\n        }\n        return result;\n    }\n\n    // Work around nonsense dimensions being reported for stretches of\n    // right-to-left text.\n    function buildTokenBadBidi(inner, order) {\n        return function (builder, text, style, startStyle, endStyle, css, attributes) {\n            style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n            var start = builder.pos,\n                end = start + text.length;\n            for (;;) {\n                // Find the part that overlaps with the start of this text\n                var part = void 0;\n                for (var i = 0; i < order.length; i++) {\n                    part = order[i];\n                    if (part.to > start && part.from <= start) {\n                        break;\n                    }\n                }\n                if (part.to >= end) {\n                    return inner(builder, text, style, startStyle, endStyle, css, attributes);\n                }\n                inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n                startStyle = null;\n                text = text.slice(part.to - start);\n                start = part.to;\n            }\n        };\n    }\n\n    function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n        var widget = !ignoreWidget && marker.widgetNode;\n        if (widget) {\n            builder.map.push(builder.pos, builder.pos + size, widget);\n        }\n        if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n            if (!widget) {\n                widget = builder.content.appendChild(document.createElement(\"span\"));\n            }\n            widget.setAttribute(\"cm-marker\", marker.id);\n        }\n        if (widget) {\n            builder.cm.display.input.setUneditable(widget);\n            builder.content.appendChild(widget);\n        }\n        builder.pos += size;\n        builder.trailingSpace = false;\n    }\n\n    // Outputs a number of spans to make up a line, taking highlighting\n    // and marked text into account.\n    function insertLineContent(line, builder, styles) {\n        var spans = line.markedSpans,\n            allText = line.text,\n            at = 0;\n        if (!spans) {\n            for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n                builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n            }\n            return;\n        }\n\n        var len = allText.length,\n            pos = 0,\n            i = 1,\n            text = \"\",\n            style,\n            css;\n        var nextChange = 0,\n            spanStyle,\n            spanEndStyle,\n            spanStartStyle,\n            collapsed,\n            attributes;\n        for (;;) {\n            if (nextChange == pos) {\n                // Update current marker set\n                spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n                attributes = null;\n                collapsed = null;nextChange = Infinity;\n                var foundBookmarks = [],\n                    endStyles = void 0;\n                for (var j = 0; j < spans.length; ++j) {\n                    var sp = spans[j],\n                        m = sp.marker;\n                    if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n                        foundBookmarks.push(m);\n                    } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n                        if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n                            nextChange = sp.to;\n                            spanEndStyle = \"\";\n                        }\n                        if (m.className) {\n                            spanStyle += \" \" + m.className;\n                        }\n                        if (m.css) {\n                            css = (css ? css + \";\" : \"\") + m.css;\n                        }\n                        if (m.startStyle && sp.from == pos) {\n                            spanStartStyle += \" \" + m.startStyle;\n                        }\n                        if (m.endStyle && sp.to == nextChange) {\n                            (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n                        }\n                        // support for the old title property\n                        // https://github.com/codemirror/CodeMirror/pull/5673\n                        if (m.title) {\n                            (attributes || (attributes = {})).title = m.title;\n                        }\n                        if (m.attributes) {\n                            for (var attr in m.attributes) {\n                                (attributes || (attributes = {}))[attr] = m.attributes[attr];\n                            }\n                        }\n                        if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n                            collapsed = sp;\n                        }\n                    } else if (sp.from > pos && nextChange > sp.from) {\n                        nextChange = sp.from;\n                    }\n                }\n                if (endStyles) {\n                    for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n                        if (endStyles[j$1 + 1] == nextChange) {\n                            spanEndStyle += \" \" + endStyles[j$1];\n                        }\n                    }\n                }\n\n                if (!collapsed || collapsed.from == pos) {\n                    for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n                        buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n                    }\n                }\n                if (collapsed && (collapsed.from || 0) == pos) {\n                    buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n                    if (collapsed.to == null) {\n                        return;\n                    }\n                    if (collapsed.to == pos) {\n                        collapsed = false;\n                    }\n                }\n            }\n            if (pos >= len) {\n                break;\n            }\n\n            var upto = Math.min(len, nextChange);\n            while (true) {\n                if (text) {\n                    var end = pos + text.length;\n                    if (!collapsed) {\n                        var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n                        builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n                    }\n                    if (end >= upto) {\n                        text = text.slice(upto - pos);pos = upto;break;\n                    }\n                    pos = end;\n                    spanStartStyle = \"\";\n                }\n                text = allText.slice(at, at = styles[i++]);\n                style = interpretTokenStyle(styles[i++], builder.cm.options);\n            }\n        }\n    }\n\n    // These objects are used to represent the visible (currently drawn)\n    // part of the document. A LineView may correspond to multiple\n    // logical lines, if those are connected by collapsed ranges.\n    function LineView(doc, line, lineN) {\n        // The starting line\n        this.line = line;\n        // Continuing lines, if any\n        this.rest = visualLineContinued(line);\n        // Number of logical lines in this visual line\n        this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n        this.node = this.text = null;\n        this.hidden = lineIsHidden(doc, line);\n    }\n\n    // Create a range of LineView objects for the given lines.\n    function buildViewArray(cm, from, to) {\n        var array = [],\n            nextPos;\n        for (var pos = from; pos < to; pos = nextPos) {\n            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n            nextPos = pos + view.size;\n            array.push(view);\n        }\n        return array;\n    }\n\n    var operationGroup = null;\n\n    function pushOperation(op) {\n        if (operationGroup) {\n            operationGroup.ops.push(op);\n        } else {\n            op.ownsGroup = operationGroup = {\n                ops: [op],\n                delayedCallbacks: []\n            };\n        }\n    }\n\n    function fireCallbacksForOps(group) {\n        // Calls delayed callbacks and cursorActivity handlers until no\n        // new ones appear\n        var callbacks = group.delayedCallbacks,\n            i = 0;\n        do {\n            for (; i < callbacks.length; i++) {\n                callbacks[i].call(null);\n            }\n            for (var j = 0; j < group.ops.length; j++) {\n                var op = group.ops[j];\n                if (op.cursorActivityHandlers) {\n                    while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n                        op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n                    }\n                }\n            }\n        } while (i < callbacks.length);\n    }\n\n    function finishOperation(op, endCb) {\n        var group = op.ownsGroup;\n        if (!group) {\n            return;\n        }\n\n        try {\n            fireCallbacksForOps(group);\n        } finally {\n            operationGroup = null;\n            endCb(group);\n        }\n    }\n\n    var orphanDelayedCallbacks = null;\n\n    // Often, we want to signal events at a point where we are in the\n    // middle of some work, but don't want the handler to start calling\n    // other methods on the editor, which might be in an inconsistent\n    // state or simply not expect any other events to happen.\n    // signalLater looks whether there are any handlers, and schedules\n    // them to be executed when the last operation ends, or, if no\n    // operation is active, when a timeout fires.\n    function signalLater(emitter, type /*, values...*/) {\n        var arr = getHandlers(emitter, type);\n        if (!arr.length) {\n            return;\n        }\n        var args = Array.prototype.slice.call(arguments, 2),\n            list;\n        if (operationGroup) {\n            list = operationGroup.delayedCallbacks;\n        } else if (orphanDelayedCallbacks) {\n            list = orphanDelayedCallbacks;\n        } else {\n            list = orphanDelayedCallbacks = [];\n            setTimeout(fireOrphanDelayed, 0);\n        }\n        var loop = function loop(i) {\n            list.push(function () {\n                return arr[i].apply(null, args);\n            });\n        };\n\n        for (var i = 0; i < arr.length; ++i) {\n            loop(i);\n        }\n    }\n\n    function fireOrphanDelayed() {\n        var delayed = orphanDelayedCallbacks;\n        orphanDelayedCallbacks = null;\n        for (var i = 0; i < delayed.length; ++i) {\n            delayed[i]();\n        }\n    }\n\n    // When an aspect of a line changes, a string is added to\n    // lineView.changes. This updates the relevant part of the line's\n    // DOM structure.\n    function updateLineForChanges(cm, lineView, lineN, dims) {\n        for (var j = 0; j < lineView.changes.length; j++) {\n            var type = lineView.changes[j];\n            if (type == \"text\") {\n                updateLineText(cm, lineView);\n            } else if (type == \"gutter\") {\n                updateLineGutter(cm, lineView, lineN, dims);\n            } else if (type == \"class\") {\n                updateLineClasses(cm, lineView);\n            } else if (type == \"widget\") {\n                updateLineWidgets(cm, lineView, dims);\n            }\n        }\n        lineView.changes = null;\n    }\n\n    // Lines with gutter elements, widgets or a background class need to\n    // be wrapped, and have the extra elements added to the wrapper div\n    function ensureLineWrapped(lineView) {\n        if (lineView.node == lineView.text) {\n            lineView.node = elt(\"div\", null, null, \"position: relative\");\n            if (lineView.text.parentNode) {\n                lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n            }\n            lineView.node.appendChild(lineView.text);\n            if (ie && ie_version < 8) {\n                lineView.node.style.zIndex = 2;\n            }\n        }\n        return lineView.node;\n    }\n\n    function updateLineBackground(cm, lineView) {\n        var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n        if (cls) {\n            cls += \" CodeMirror-linebackground\";\n        }\n        if (lineView.background) {\n            if (cls) {\n                lineView.background.className = cls;\n            } else {\n                lineView.background.parentNode.removeChild(lineView.background);lineView.background = null;\n            }\n        } else if (cls) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n            cm.display.input.setUneditable(lineView.background);\n        }\n    }\n\n    // Wrapper around buildLineContent which will reuse the structure\n    // in display.externalMeasured when possible.\n    function getLineContent(cm, lineView) {\n        var ext = cm.display.externalMeasured;\n        if (ext && ext.line == lineView.line) {\n            cm.display.externalMeasured = null;\n            lineView.measure = ext.measure;\n            return ext.built;\n        }\n        return buildLineContent(cm, lineView);\n    }\n\n    // Redraw the line's text. Interacts with the background and text\n    // classes because the mode may output tokens that influence these\n    // classes.\n    function updateLineText(cm, lineView) {\n        var cls = lineView.text.className;\n        var built = getLineContent(cm, lineView);\n        if (lineView.text == lineView.node) {\n            lineView.node = built.pre;\n        }\n        lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n        lineView.text = built.pre;\n        if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n            lineView.bgClass = built.bgClass;\n            lineView.textClass = built.textClass;\n            updateLineClasses(cm, lineView);\n        } else if (cls) {\n            lineView.text.className = cls;\n        }\n    }\n\n    function updateLineClasses(cm, lineView) {\n        updateLineBackground(cm, lineView);\n        if (lineView.line.wrapClass) {\n            ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n        } else if (lineView.node != lineView.text) {\n            lineView.node.className = \"\";\n        }\n        var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n        lineView.text.className = textClass || \"\";\n    }\n\n    function updateLineGutter(cm, lineView, lineN, dims) {\n        if (lineView.gutter) {\n            lineView.node.removeChild(lineView.gutter);\n            lineView.gutter = null;\n        }\n        if (lineView.gutterBackground) {\n            lineView.node.removeChild(lineView.gutterBackground);\n            lineView.gutterBackground = null;\n        }\n        if (lineView.line.gutterClass) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n            cm.display.input.setUneditable(lineView.gutterBackground);\n            wrap.insertBefore(lineView.gutterBackground, lineView.text);\n        }\n        var markers = lineView.line.gutterMarkers;\n        if (cm.options.lineNumbers || markers) {\n            var wrap$1 = ensureLineWrapped(lineView);\n            var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n            cm.display.input.setUneditable(gutterWrap);\n            wrap$1.insertBefore(gutterWrap, lineView.text);\n            if (lineView.line.gutterClass) {\n                gutterWrap.className += \" \" + lineView.line.gutterClass;\n            }\n            if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n                lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n            }\n            if (markers) {\n                for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n                    var id = cm.display.gutterSpecs[k].className,\n                        found = markers.hasOwnProperty(id) && markers[id];\n                    if (found) {\n                        gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n                    }\n                }\n            }\n        }\n    }\n\n    function updateLineWidgets(cm, lineView, dims) {\n        if (lineView.alignable) {\n            lineView.alignable = null;\n        }\n        var isWidget = classTest(\"CodeMirror-linewidget\");\n        for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n            next = node.nextSibling;\n            if (isWidget.test(node.className)) {\n                lineView.node.removeChild(node);\n            }\n        }\n        insertLineWidgets(cm, lineView, dims);\n    }\n\n    // Build a line's DOM representation from scratch\n    function buildLineElement(cm, lineView, lineN, dims) {\n        var built = getLineContent(cm, lineView);\n        lineView.text = lineView.node = built.pre;\n        if (built.bgClass) {\n            lineView.bgClass = built.bgClass;\n        }\n        if (built.textClass) {\n            lineView.textClass = built.textClass;\n        }\n\n        updateLineClasses(cm, lineView);\n        updateLineGutter(cm, lineView, lineN, dims);\n        insertLineWidgets(cm, lineView, dims);\n        return lineView.node;\n    }\n\n    // A lineView may contain multiple logical lines (when merged by\n    // collapsed spans). The widgets for all of them need to be drawn.\n    function insertLineWidgets(cm, lineView, dims) {\n        insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n        if (lineView.rest) {\n            for (var i = 0; i < lineView.rest.length; i++) {\n                insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n            }\n        }\n    }\n\n    function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n        if (!line.widgets) {\n            return;\n        }\n        var wrap = ensureLineWrapped(lineView);\n        for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n            var widget = ws[i],\n                node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n            if (!widget.handleMouseEvents) {\n                node.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            positionLineWidget(widget, node, lineView, dims);\n            cm.display.input.setUneditable(node);\n            if (allowAbove && widget.above) {\n                wrap.insertBefore(node, lineView.gutter || lineView.text);\n            } else {\n                wrap.appendChild(node);\n            }\n            signalLater(widget, \"redraw\");\n        }\n    }\n\n    function positionLineWidget(widget, node, lineView, dims) {\n        if (widget.noHScroll) {\n            (lineView.alignable || (lineView.alignable = [])).push(node);\n            var width = dims.wrapperWidth;\n            node.style.left = dims.fixedPos + \"px\";\n            if (!widget.coverGutter) {\n                width -= dims.gutterTotalWidth;\n                node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n            }\n            node.style.width = width + \"px\";\n        }\n        if (widget.coverGutter) {\n            node.style.zIndex = 5;\n            node.style.position = \"relative\";\n            if (!widget.noHScroll) {\n                node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n            }\n        }\n    }\n\n    function widgetHeight(widget) {\n        if (widget.height != null) {\n            return widget.height;\n        }\n        var cm = widget.doc.cm;\n        if (!cm) {\n            return 0;\n        }\n        if (!contains(document.body, widget.node)) {\n            var parentStyle = \"position: relative;\";\n            if (widget.coverGutter) {\n                parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n            }\n            if (widget.noHScroll) {\n                parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n            }\n            removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n        }\n        return widget.height = widget.node.parentNode.offsetHeight;\n    }\n\n    // Return true when the given mouse event happened in a widget\n    function eventInWidget(display, e) {\n        for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n            if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n                return true;\n            }\n        }\n    }\n\n    // POSITION MEASUREMENT\n\n    function paddingTop(display) {\n        return display.lineSpace.offsetTop;\n    }\n    function paddingVert(display) {\n        return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n    }\n    function paddingH(display) {\n        if (display.cachedPaddingH) {\n            return display.cachedPaddingH;\n        }\n        var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n        var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n        var data = { left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight) };\n        if (!isNaN(data.left) && !isNaN(data.right)) {\n            display.cachedPaddingH = data;\n        }\n        return data;\n    }\n\n    function scrollGap(cm) {\n        return scrollerGap - cm.display.nativeBarWidth;\n    }\n    function displayWidth(cm) {\n        return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n    }\n    function displayHeight(cm) {\n        return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n    }\n\n    // Ensure the lineView.wrapping.heights array is populated. This is\n    // an array of bottom offsets for the lines that make up a drawn\n    // line. When lineWrapping is on, there might be more than one\n    // height.\n    function ensureLineHeights(cm, lineView, rect) {\n        var wrapping = cm.options.lineWrapping;\n        var curWidth = wrapping && displayWidth(cm);\n        if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n            var heights = lineView.measure.heights = [];\n            if (wrapping) {\n                lineView.measure.width = curWidth;\n                var rects = lineView.text.firstChild.getClientRects();\n                for (var i = 0; i < rects.length - 1; i++) {\n                    var cur = rects[i],\n                        next = rects[i + 1];\n                    if (Math.abs(cur.bottom - next.bottom) > 2) {\n                        heights.push((cur.bottom + next.top) / 2 - rect.top);\n                    }\n                }\n            }\n            heights.push(rect.bottom - rect.top);\n        }\n    }\n\n    // Find a line map (mapping character offsets to text nodes) and a\n    // measurement cache for the given line number. (A line view might\n    // contain multiple lines when collapsed ranges are present.)\n    function mapFromLineView(lineView, line, lineN) {\n        if (lineView.line == line) {\n            return { map: lineView.measure.map, cache: lineView.measure.cache };\n        }\n        for (var i = 0; i < lineView.rest.length; i++) {\n            if (lineView.rest[i] == line) {\n                return { map: lineView.measure.maps[i], cache: lineView.measure.caches[i] };\n            }\n        }\n        for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n            if (lineNo(lineView.rest[i$1]) > lineN) {\n                return { map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true };\n            }\n        }\n    }\n\n    // Render a line into the hidden node display.externalMeasured. Used\n    // when measurement is needed for a line that's not in the viewport.\n    function updateExternalMeasurement(cm, line) {\n        line = visualLine(line);\n        var lineN = lineNo(line);\n        var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n        view.lineN = lineN;\n        var built = view.built = buildLineContent(cm, view);\n        view.text = built.pre;\n        removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n        return view;\n    }\n\n    // Get a {top, bottom, left, right} box (in line-local coordinates)\n    // for a given character.\n    function measureChar(cm, line, ch, bias) {\n        return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n    }\n\n    // Find a line view that corresponds to the given line number.\n    function findViewForLine(cm, lineN) {\n        if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n            return cm.display.view[findViewIndex(cm, lineN)];\n        }\n        var ext = cm.display.externalMeasured;\n        if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n            return ext;\n        }\n    }\n\n    // Measurement can be split in two steps, the set-up work that\n    // applies to the whole line, and the measurement of the actual\n    // character. Functions like coordsChar, that need to do a lot of\n    // measurements in a row, can thus ensure that the set-up work is\n    // only done once.\n    function prepareMeasureForLine(cm, line) {\n        var lineN = lineNo(line);\n        var view = findViewForLine(cm, lineN);\n        if (view && !view.text) {\n            view = null;\n        } else if (view && view.changes) {\n            updateLineForChanges(cm, view, lineN, getDimensions(cm));\n            cm.curOp.forceUpdate = true;\n        }\n        if (!view) {\n            view = updateExternalMeasurement(cm, line);\n        }\n\n        var info = mapFromLineView(view, line, lineN);\n        return {\n            line: line, view: view, rect: null,\n            map: info.map, cache: info.cache, before: info.before,\n            hasHeights: false\n        };\n    }\n\n    // Given a prepared measurement object, measures the position of an\n    // actual character (or fetches it from the cache).\n    function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n        if (prepared.before) {\n            ch = -1;\n        }\n        var key = ch + (bias || \"\"),\n            found;\n        if (prepared.cache.hasOwnProperty(key)) {\n            found = prepared.cache[key];\n        } else {\n            if (!prepared.rect) {\n                prepared.rect = prepared.view.text.getBoundingClientRect();\n            }\n            if (!prepared.hasHeights) {\n                ensureLineHeights(cm, prepared.view, prepared.rect);\n                prepared.hasHeights = true;\n            }\n            found = measureCharInner(cm, prepared, ch, bias);\n            if (!found.bogus) {\n                prepared.cache[key] = found;\n            }\n        }\n        return { left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom };\n    }\n\n    var nullRect = { left: 0, right: 0, top: 0, bottom: 0 };\n\n    function nodeAndOffsetInLineMap(map, ch, bias) {\n        var node, start, end, collapse, mStart, mEnd;\n        // First, search the line map for the text node corresponding to,\n        // or closest to, the target character.\n        for (var i = 0; i < map.length; i += 3) {\n            mStart = map[i];\n            mEnd = map[i + 1];\n            if (ch < mStart) {\n                start = 0;end = 1;\n                collapse = \"left\";\n            } else if (ch < mEnd) {\n                start = ch - mStart;\n                end = start + 1;\n            } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n                end = mEnd - mStart;\n                start = end - 1;\n                if (ch >= mEnd) {\n                    collapse = \"right\";\n                }\n            }\n            if (start != null) {\n                node = map[i + 2];\n                if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n                    collapse = bias;\n                }\n                if (bias == \"left\" && start == 0) {\n                    while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n                        node = map[(i -= 3) + 2];\n                        collapse = \"left\";\n                    }\n                }\n                if (bias == \"right\" && start == mEnd - mStart) {\n                    while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n                        node = map[(i += 3) + 2];\n                        collapse = \"right\";\n                    }\n                }\n                break;\n            }\n        }\n        return { node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd };\n    }\n\n    function getUsefulRect(rects, bias) {\n        var rect = nullRect;\n        if (bias == \"left\") {\n            for (var i = 0; i < rects.length; i++) {\n                if ((rect = rects[i]).left != rect.right) {\n                    break;\n                }\n            }\n        } else {\n            for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n                if ((rect = rects[i$1]).left != rect.right) {\n                    break;\n                }\n            }\n        }\n        return rect;\n    }\n\n    function measureCharInner(cm, prepared, ch, bias) {\n        var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n        var node = place.node,\n            start = place.start,\n            end = place.end,\n            collapse = place.collapse;\n\n        var rect;\n        if (node.nodeType == 3) {\n            // If it is a text node, use a range to retrieve the coordinates.\n            for (var i$1 = 0; i$1 < 4; i$1++) {\n                // Retry a maximum of 4 times when nonsense rectangles are returned\n                while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n                    --start;\n                }\n                while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n                    ++end;\n                }\n                if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n                    rect = node.parentNode.getBoundingClientRect();\n                } else {\n                    rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n                }\n                if (rect.left || rect.right || start == 0) {\n                    break;\n                }\n                end = start;\n                start = start - 1;\n                collapse = \"right\";\n            }\n            if (ie && ie_version < 11) {\n                rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n            }\n        } else {\n            // If it is a widget, simply get the box for the whole widget.\n            if (start > 0) {\n                collapse = bias = \"right\";\n            }\n            var rects;\n            if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n                rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n            } else {\n                rect = node.getBoundingClientRect();\n            }\n        }\n        if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n            var rSpan = node.parentNode.getClientRects()[0];\n            if (rSpan) {\n                rect = { left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom };\n            } else {\n                rect = nullRect;\n            }\n        }\n\n        var rtop = rect.top - prepared.rect.top,\n            rbot = rect.bottom - prepared.rect.top;\n        var mid = (rtop + rbot) / 2;\n        var heights = prepared.view.measure.heights;\n        var i = 0;\n        for (; i < heights.length - 1; i++) {\n            if (mid < heights[i]) {\n                break;\n            }\n        }\n        var top = i ? heights[i - 1] : 0,\n            bot = heights[i];\n        var result = { left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n            right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n            top: top, bottom: bot };\n        if (!rect.left && !rect.right) {\n            result.bogus = true;\n        }\n        if (!cm.options.singleCursorHeightPerLine) {\n            result.rtop = rtop;result.rbottom = rbot;\n        }\n\n        return result;\n    }\n\n    // Work around problem with bounding client rects on ranges being\n    // returned incorrectly when zoomed on IE10 and below.\n    function maybeUpdateRectForZooming(measure, rect) {\n        if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n            return rect;\n        }\n        var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n        var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n        return { left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY };\n    }\n\n    function clearLineMeasurementCacheFor(lineView) {\n        if (lineView.measure) {\n            lineView.measure.cache = {};\n            lineView.measure.heights = null;\n            if (lineView.rest) {\n                for (var i = 0; i < lineView.rest.length; i++) {\n                    lineView.measure.caches[i] = {};\n                }\n            }\n        }\n    }\n\n    function clearLineMeasurementCache(cm) {\n        cm.display.externalMeasure = null;\n        removeChildren(cm.display.lineMeasure);\n        for (var i = 0; i < cm.display.view.length; i++) {\n            clearLineMeasurementCacheFor(cm.display.view[i]);\n        }\n    }\n\n    function clearCaches(cm) {\n        clearLineMeasurementCache(cm);\n        cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n        if (!cm.options.lineWrapping) {\n            cm.display.maxLineChanged = true;\n        }\n        cm.display.lineNumChars = null;\n    }\n\n    function pageScrollX() {\n        // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n        // which causes page_Offset and bounding client rects to use\n        // different reference viewports and invalidate our calculations.\n        if (chrome && android) {\n            return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n        }\n        return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n    }\n    function pageScrollY() {\n        if (chrome && android) {\n            return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n        }\n        return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n    }\n\n    function widgetTopHeight(lineObj) {\n        var height = 0;\n        if (lineObj.widgets) {\n            for (var i = 0; i < lineObj.widgets.length; ++i) {\n                if (lineObj.widgets[i].above) {\n                    height += widgetHeight(lineObj.widgets[i]);\n                }\n            }\n        }\n        return height;\n    }\n\n    // Converts a {top, bottom, left, right} box from line-local\n    // coordinates into another coordinate system. Context may be one of\n    // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n    // or \"page\".\n    function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n        if (!includeWidgets) {\n            var height = widgetTopHeight(lineObj);\n            rect.top += height;rect.bottom += height;\n        }\n        if (context == \"line\") {\n            return rect;\n        }\n        if (!context) {\n            context = \"local\";\n        }\n        var yOff = _heightAtLine(lineObj);\n        if (context == \"local\") {\n            yOff += paddingTop(cm.display);\n        } else {\n            yOff -= cm.display.viewOffset;\n        }\n        if (context == \"page\" || context == \"window\") {\n            var lOff = cm.display.lineSpace.getBoundingClientRect();\n            yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n            var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n            rect.left += xOff;rect.right += xOff;\n        }\n        rect.top += yOff;rect.bottom += yOff;\n        return rect;\n    }\n\n    // Coverts a box from \"div\" coords to another coordinate system.\n    // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n    function fromCoordSystem(cm, coords, context) {\n        if (context == \"div\") {\n            return coords;\n        }\n        var left = coords.left,\n            top = coords.top;\n        // First move into \"page\" coordinate system\n        if (context == \"page\") {\n            left -= pageScrollX();\n            top -= pageScrollY();\n        } else if (context == \"local\" || !context) {\n            var localBox = cm.display.sizer.getBoundingClientRect();\n            left += localBox.left;\n            top += localBox.top;\n        }\n\n        var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n        return { left: left - lineSpaceBox.left, top: top - lineSpaceBox.top };\n    }\n\n    function _charCoords(cm, pos, context, lineObj, bias) {\n        if (!lineObj) {\n            lineObj = getLine(cm.doc, pos.line);\n        }\n        return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n    }\n\n    // Returns a box for a given cursor position, which may have an\n    // 'other' property containing the position of the secondary cursor\n    // on a bidi boundary.\n    // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n    // and after `char - 1` in writing order of `char - 1`\n    // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n    // and before `char` in writing order of `char`\n    // Examples (upper-case letters are RTL, lower-case are LTR):\n    //     Pos(0, 1, ...)\n    //     before   after\n    // ab     a|b     a|b\n    // aB     a|B     aB|\n    // Ab     |Ab     A|b\n    // AB     B|A     B|A\n    // Every position after the last character on a line is considered to stick\n    // to the last character on the line.\n    function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n        lineObj = lineObj || getLine(cm.doc, pos.line);\n        if (!preparedMeasure) {\n            preparedMeasure = prepareMeasureForLine(cm, lineObj);\n        }\n        function get$$1(ch, right) {\n            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n            if (right) {\n                m.left = m.right;\n            } else {\n                m.right = m.left;\n            }\n            return intoCoordSystem(cm, lineObj, m, context);\n        }\n        var order = getOrder(lineObj, cm.doc.direction),\n            ch = pos.ch,\n            sticky = pos.sticky;\n        if (ch >= lineObj.text.length) {\n            ch = lineObj.text.length;\n            sticky = \"before\";\n        } else if (ch <= 0) {\n            ch = 0;\n            sticky = \"after\";\n        }\n        if (!order) {\n            return get$$1(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n        }\n\n        function getBidi(ch, partPos, invert) {\n            var part = order[partPos],\n                right = part.level == 1;\n            return get$$1(invert ? ch - 1 : ch, right != invert);\n        }\n        var partPos = getBidiPartAt(order, ch, sticky);\n        var other = bidiOther;\n        var val = getBidi(ch, partPos, sticky == \"before\");\n        if (other != null) {\n            val.other = getBidi(ch, other, sticky != \"before\");\n        }\n        return val;\n    }\n\n    // Used to cheaply estimate the coordinates for a position. Used for\n    // intermediate scroll updates.\n    function estimateCoords(cm, pos) {\n        var left = 0;\n        pos = _clipPos(cm.doc, pos);\n        if (!cm.options.lineWrapping) {\n            left = charWidth(cm.display) * pos.ch;\n        }\n        var lineObj = getLine(cm.doc, pos.line);\n        var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n        return { left: left, right: left, top: top, bottom: top + lineObj.height };\n    }\n\n    // Positions returned by coordsChar contain some extra information.\n    // xRel is the relative x position of the input coordinates compared\n    // to the found position (so xRel > 0 means the coordinates are to\n    // the right of the character position, for example). When outside\n    // is true, that means the coordinates lie outside the line's\n    // vertical range.\n    function PosWithInfo(line, ch, sticky, outside, xRel) {\n        var pos = Pos(line, ch, sticky);\n        pos.xRel = xRel;\n        if (outside) {\n            pos.outside = outside;\n        }\n        return pos;\n    }\n\n    // Compute the character position closest to the given coordinates.\n    // Input must be lineSpace-local (\"div\" coordinate system).\n    function _coordsChar(cm, x, y) {\n        var doc = cm.doc;\n        y += cm.display.viewOffset;\n        if (y < 0) {\n            return PosWithInfo(doc.first, 0, null, -1, -1);\n        }\n        var lineN = _lineAtHeight(doc, y),\n            last = doc.first + doc.size - 1;\n        if (lineN > last) {\n            return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);\n        }\n        if (x < 0) {\n            x = 0;\n        }\n\n        var lineObj = getLine(doc, lineN);\n        for (;;) {\n            var found = coordsCharInner(cm, lineObj, lineN, x, y);\n            var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n            if (!collapsed) {\n                return found;\n            }\n            var rangeEnd = collapsed.find(1);\n            if (rangeEnd.line == lineN) {\n                return rangeEnd;\n            }\n            lineObj = getLine(doc, lineN = rangeEnd.line);\n        }\n    }\n\n    function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n        y -= widgetTopHeight(lineObj);\n        var end = lineObj.text.length;\n        var begin = findFirst(function (ch) {\n            return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;\n        }, end, 0);\n        end = findFirst(function (ch) {\n            return measureCharPrepared(cm, preparedMeasure, ch).top > y;\n        }, begin, end);\n        return { begin: begin, end: end };\n    }\n\n    function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n        if (!preparedMeasure) {\n            preparedMeasure = prepareMeasureForLine(cm, lineObj);\n        }\n        var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n        return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n    }\n\n    // Returns true if the given side of a box is after the given\n    // coordinates, in top-to-bottom, left-to-right order.\n    function boxIsAfter(box, x, y, left) {\n        return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;\n    }\n\n    function coordsCharInner(cm, lineObj, lineNo, x, y) {\n        // Move y into line-local coordinate space\n        y -= _heightAtLine(lineObj);\n        var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n        // When directly calling `measureCharPrepared`, we have to adjust\n        // for the widgets at this line.\n        var widgetHeight = widgetTopHeight(lineObj);\n        var begin = 0,\n            end = lineObj.text.length,\n            ltr = true;\n\n        var order = getOrder(lineObj, cm.doc.direction);\n        // If the line isn't plain left-to-right text, first figure out\n        // which bidi section the coordinates fall into.\n        if (order) {\n            var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo, preparedMeasure, order, x, y);\n            ltr = part.level != 1;\n            // The awkward -1 offsets are needed because findFirst (called\n            // on these below) will treat its first bound as inclusive,\n            // second as exclusive, but we want to actually address the\n            // characters in the part's range\n            begin = ltr ? part.from : part.to - 1;\n            end = ltr ? part.to : part.from - 1;\n        }\n\n        // A binary search to find the first character whose bounding box\n        // starts after the coordinates. If we run across any whose box wrap\n        // the coordinates, store that.\n        var chAround = null,\n            boxAround = null;\n        var ch = findFirst(function (ch) {\n            var box = measureCharPrepared(cm, preparedMeasure, ch);\n            box.top += widgetHeight;box.bottom += widgetHeight;\n            if (!boxIsAfter(box, x, y, false)) {\n                return false;\n            }\n            if (box.top <= y && box.left <= x) {\n                chAround = ch;\n                boxAround = box;\n            }\n            return true;\n        }, begin, end);\n\n        var baseX,\n            sticky,\n            outside = false;\n        // If a box around the coordinates was found, use that\n        if (boxAround) {\n            // Distinguish coordinates nearer to the left or right side of the box\n            var atLeft = x - boxAround.left < boxAround.right - x,\n                atStart = atLeft == ltr;\n            ch = chAround + (atStart ? 0 : 1);\n            sticky = atStart ? \"after\" : \"before\";\n            baseX = atLeft ? boxAround.left : boxAround.right;\n        } else {\n            // (Adjust for extended bound, if necessary.)\n            if (!ltr && (ch == end || ch == begin)) {\n                ch++;\n            }\n            // To determine which side to associate with, get the box to the\n            // left of the character and compare it's vertical position to the\n            // coordinates\n            sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y == ltr ? \"after\" : \"before\";\n            // Now get accurate coordinates for this place, in order to get a\n            // base X position\n            var coords = _cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n            baseX = coords.left;\n            outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n        }\n\n        ch = skipExtendingChars(lineObj.text, ch, 1);\n        return PosWithInfo(lineNo, ch, sticky, outside, x - baseX);\n    }\n\n    function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n        // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n        // situation, we can take this ordering to correspond to the visual\n        // ordering. This finds the first part whose end is after the given\n        // coordinates.\n        var index = findFirst(function (i) {\n            var part = order[i],\n                ltr = part.level != 1;\n            return boxIsAfter(_cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"), \"line\", lineObj, preparedMeasure), x, y, true);\n        }, 0, order.length - 1);\n        var part = order[index];\n        // If this isn't the first part, the part's start is also after\n        // the coordinates, and the coordinates aren't on the same line as\n        // that start, move one part back.\n        if (index > 0) {\n            var ltr = part.level != 1;\n            var start = _cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"), \"line\", lineObj, preparedMeasure);\n            if (boxIsAfter(start, x, y, true) && start.top > y) {\n                part = order[index - 1];\n            }\n        }\n        return part;\n    }\n\n    function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n        // In a wrapped line, rtl text on wrapping boundaries can do things\n        // that don't correspond to the ordering in our `order` array at\n        // all, so a binary search doesn't work, and we want to return a\n        // part that only spans one line so that the binary search in\n        // coordsCharInner is safe. As such, we first find the extent of the\n        // wrapped line, and then do a flat search in which we discard any\n        // spans that aren't on the line.\n        var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n        var begin = ref.begin;\n        var end = ref.end;\n        if (/\\s/.test(lineObj.text.charAt(end - 1))) {\n            end--;\n        }\n        var part = null,\n            closestDist = null;\n        for (var i = 0; i < order.length; i++) {\n            var p = order[i];\n            if (p.from >= end || p.to <= begin) {\n                continue;\n            }\n            var ltr = p.level != 1;\n            var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n            // Weigh against spans ending before this, so that they are only\n            // picked if nothing ends after\n            var dist = endX < x ? x - endX + 1e9 : endX - x;\n            if (!part || closestDist > dist) {\n                part = p;\n                closestDist = dist;\n            }\n        }\n        if (!part) {\n            part = order[order.length - 1];\n        }\n        // Clip the part to the wrapped line.\n        if (part.from < begin) {\n            part = { from: begin, to: part.to, level: part.level };\n        }\n        if (part.to > end) {\n            part = { from: part.from, to: end, level: part.level };\n        }\n        return part;\n    }\n\n    var measureText;\n    // Compute the default text height.\n    function textHeight(display) {\n        if (display.cachedTextHeight != null) {\n            return display.cachedTextHeight;\n        }\n        if (measureText == null) {\n            measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n            // Measure a bunch of lines, for browsers that compute\n            // fractional heights.\n            for (var i = 0; i < 49; ++i) {\n                measureText.appendChild(document.createTextNode(\"x\"));\n                measureText.appendChild(elt(\"br\"));\n            }\n            measureText.appendChild(document.createTextNode(\"x\"));\n        }\n        removeChildrenAndAdd(display.measure, measureText);\n        var height = measureText.offsetHeight / 50;\n        if (height > 3) {\n            display.cachedTextHeight = height;\n        }\n        removeChildren(display.measure);\n        return height || 1;\n    }\n\n    // Compute the default character width.\n    function charWidth(display) {\n        if (display.cachedCharWidth != null) {\n            return display.cachedCharWidth;\n        }\n        var anchor = elt(\"span\", \"xxxxxxxxxx\");\n        var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n        removeChildrenAndAdd(display.measure, pre);\n        var rect = anchor.getBoundingClientRect(),\n            width = (rect.right - rect.left) / 10;\n        if (width > 2) {\n            display.cachedCharWidth = width;\n        }\n        return width || 10;\n    }\n\n    // Do a bulk-read of the DOM positions and sizes needed to draw the\n    // view, so that we don't interleave reading and writing to the DOM.\n    function getDimensions(cm) {\n        var d = cm.display,\n            left = {},\n            width = {};\n        var gutterLeft = d.gutters.clientLeft;\n        for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n            var id = cm.display.gutterSpecs[i].className;\n            left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n            width[id] = n.clientWidth;\n        }\n        return { fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth };\n    }\n\n    // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n    // but using getBoundingClientRect to get a sub-pixel-accurate\n    // result.\n    function compensateForHScroll(display) {\n        return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n    }\n\n    // Returns a function that estimates the height of a line, to use as\n    // first approximation until the line becomes visible (and is thus\n    // properly measurable).\n    function estimateHeight(cm) {\n        var th = textHeight(cm.display),\n            wrapping = cm.options.lineWrapping;\n        var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n        return function (line) {\n            if (lineIsHidden(cm.doc, line)) {\n                return 0;\n            }\n\n            var widgetsHeight = 0;\n            if (line.widgets) {\n                for (var i = 0; i < line.widgets.length; i++) {\n                    if (line.widgets[i].height) {\n                        widgetsHeight += line.widgets[i].height;\n                    }\n                }\n            }\n\n            if (wrapping) {\n                return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n            } else {\n                return widgetsHeight + th;\n            }\n        };\n    }\n\n    function estimateLineHeights(cm) {\n        var doc = cm.doc,\n            est = estimateHeight(cm);\n        doc.iter(function (line) {\n            var estHeight = est(line);\n            if (estHeight != line.height) {\n                updateLineHeight(line, estHeight);\n            }\n        });\n    }\n\n    // Given a mouse event, find the corresponding position. If liberal\n    // is false, it checks whether a gutter or scrollbar was clicked,\n    // and returns null if it was. forRect is used by rectangular\n    // selections, and tries to estimate a character position even for\n    // coordinates beyond the right of the text.\n    function posFromMouse(cm, e, liberal, forRect) {\n        var display = cm.display;\n        if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n            return null;\n        }\n\n        var x,\n            y,\n            space = display.lineSpace.getBoundingClientRect();\n        // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n        try {\n            x = e.clientX - space.left;y = e.clientY - space.top;\n        } catch (e) {\n            return null;\n        }\n        var coords = _coordsChar(cm, x, y),\n            line;\n        if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n        }\n        return coords;\n    }\n\n    // Find the view element corresponding to a given line. Return null\n    // when the line isn't visible.\n    function findViewIndex(cm, n) {\n        if (n >= cm.display.viewTo) {\n            return null;\n        }\n        n -= cm.display.viewFrom;\n        if (n < 0) {\n            return null;\n        }\n        var view = cm.display.view;\n        for (var i = 0; i < view.length; i++) {\n            n -= view[i].size;\n            if (n < 0) {\n                return i;\n            }\n        }\n    }\n\n    // Updates the display.view data structure for a given change to the\n    // document. From and to are in pre-change coordinates. Lendiff is\n    // the amount of lines added or subtracted by the change. This is\n    // used for changes that span multiple lines, or change the way\n    // lines are divided into visual lines. regLineChange (below)\n    // registers single-line changes.\n    function regChange(cm, from, to, lendiff) {\n        if (from == null) {\n            from = cm.doc.first;\n        }\n        if (to == null) {\n            to = cm.doc.first + cm.doc.size;\n        }\n        if (!lendiff) {\n            lendiff = 0;\n        }\n\n        var display = cm.display;\n        if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n            display.updateLineNumbers = from;\n        }\n\n        cm.curOp.viewChanged = true;\n\n        if (from >= display.viewTo) {\n            // Change after\n            if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n                resetView(cm);\n            }\n        } else if (to <= display.viewFrom) {\n            // Change before\n            if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n                resetView(cm);\n            } else {\n                display.viewFrom += lendiff;\n                display.viewTo += lendiff;\n            }\n        } else if (from <= display.viewFrom && to >= display.viewTo) {\n            // Full overlap\n            resetView(cm);\n        } else if (from <= display.viewFrom) {\n            // Top overlap\n            var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cut) {\n                display.view = display.view.slice(cut.index);\n                display.viewFrom = cut.lineN;\n                display.viewTo += lendiff;\n            } else {\n                resetView(cm);\n            }\n        } else if (to >= display.viewTo) {\n            // Bottom overlap\n            var cut$1 = viewCuttingPoint(cm, from, from, -1);\n            if (cut$1) {\n                display.view = display.view.slice(0, cut$1.index);\n                display.viewTo = cut$1.lineN;\n            } else {\n                resetView(cm);\n            }\n        } else {\n            // Gap in the middle\n            var cutTop = viewCuttingPoint(cm, from, from, -1);\n            var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cutTop && cutBot) {\n                display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n                display.viewTo += lendiff;\n            } else {\n                resetView(cm);\n            }\n        }\n\n        var ext = display.externalMeasured;\n        if (ext) {\n            if (to < ext.lineN) {\n                ext.lineN += lendiff;\n            } else if (from < ext.lineN + ext.size) {\n                display.externalMeasured = null;\n            }\n        }\n    }\n\n    // Register a change to a single line. Type must be one of \"text\",\n    // \"gutter\", \"class\", \"widget\"\n    function regLineChange(cm, line, type) {\n        cm.curOp.viewChanged = true;\n        var display = cm.display,\n            ext = cm.display.externalMeasured;\n        if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n            display.externalMeasured = null;\n        }\n\n        if (line < display.viewFrom || line >= display.viewTo) {\n            return;\n        }\n        var lineView = display.view[findViewIndex(cm, line)];\n        if (lineView.node == null) {\n            return;\n        }\n        var arr = lineView.changes || (lineView.changes = []);\n        if (indexOf(arr, type) == -1) {\n            arr.push(type);\n        }\n    }\n\n    // Clear the view.\n    function resetView(cm) {\n        cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n        cm.display.view = [];\n        cm.display.viewOffset = 0;\n    }\n\n    function viewCuttingPoint(cm, oldN, newN, dir) {\n        var index = findViewIndex(cm, oldN),\n            diff,\n            view = cm.display.view;\n        if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n            return { index: index, lineN: newN };\n        }\n        var n = cm.display.viewFrom;\n        for (var i = 0; i < index; i++) {\n            n += view[i].size;\n        }\n        if (n != oldN) {\n            if (dir > 0) {\n                if (index == view.length - 1) {\n                    return null;\n                }\n                diff = n + view[index].size - oldN;\n                index++;\n            } else {\n                diff = n - oldN;\n            }\n            oldN += diff;newN += diff;\n        }\n        while (visualLineNo(cm.doc, newN) != newN) {\n            if (index == (dir < 0 ? 0 : view.length - 1)) {\n                return null;\n            }\n            newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n            index += dir;\n        }\n        return { index: index, lineN: newN };\n    }\n\n    // Force the view to cover a given range, adding empty view element\n    // or clipping off existing ones as needed.\n    function adjustView(cm, from, to) {\n        var display = cm.display,\n            view = display.view;\n        if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n            display.view = buildViewArray(cm, from, to);\n            display.viewFrom = from;\n        } else {\n            if (display.viewFrom > from) {\n                display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n            } else if (display.viewFrom < from) {\n                display.view = display.view.slice(findViewIndex(cm, from));\n            }\n            display.viewFrom = from;\n            if (display.viewTo < to) {\n                display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n            } else if (display.viewTo > to) {\n                display.view = display.view.slice(0, findViewIndex(cm, to));\n            }\n        }\n        display.viewTo = to;\n    }\n\n    // Count the number of lines in the view whose DOM representation is\n    // out of date (or nonexistent).\n    function countDirtyView(cm) {\n        var view = cm.display.view,\n            dirty = 0;\n        for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n                ++dirty;\n            }\n        }\n        return dirty;\n    }\n\n    function updateSelection(cm) {\n        cm.display.input.showSelection(cm.display.input.prepareSelection());\n    }\n\n    function prepareSelection(cm, primary) {\n        if (primary === void 0) primary = true;\n\n        var doc = cm.doc,\n            result = {};\n        var curFragment = result.cursors = document.createDocumentFragment();\n        var selFragment = result.selection = document.createDocumentFragment();\n\n        for (var i = 0; i < doc.sel.ranges.length; i++) {\n            if (!primary && i == doc.sel.primIndex) {\n                continue;\n            }\n            var range = doc.sel.ranges[i];\n            if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) {\n                continue;\n            }\n            var collapsed = range.empty();\n            if (collapsed || cm.options.showCursorWhenSelecting) {\n                drawSelectionCursor(cm, range.head, curFragment);\n            }\n            if (!collapsed) {\n                drawSelectionRange(cm, range, selFragment);\n            }\n        }\n        return result;\n    }\n\n    // Draws a cursor for the given range\n    function drawSelectionCursor(cm, head, output) {\n        var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n        var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n        cursor.style.left = pos.left + \"px\";\n        cursor.style.top = pos.top + \"px\";\n        cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n        if (pos.other) {\n            // Secondary cursor, shown when on a 'jump' in bi-directional text\n            var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n            otherCursor.style.display = \"\";\n            otherCursor.style.left = pos.other.left + \"px\";\n            otherCursor.style.top = pos.other.top + \"px\";\n            otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n        }\n    }\n\n    function cmpCoords(a, b) {\n        return a.top - b.top || a.left - b.left;\n    }\n\n    // Draws the given range as a highlighted selection\n    function drawSelectionRange(cm, range, output) {\n        var display = cm.display,\n            doc = cm.doc;\n        var fragment = document.createDocumentFragment();\n        var padding = paddingH(cm.display),\n            leftSide = padding.left;\n        var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n        var docLTR = doc.direction == \"ltr\";\n\n        function add(left, top, width, bottom) {\n            if (top < 0) {\n                top = 0;\n            }\n            top = Math.round(top);\n            bottom = Math.round(bottom);\n            fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n        }\n\n        function drawForLine(line, fromArg, toArg) {\n            var lineObj = getLine(doc, line);\n            var lineLen = lineObj.text.length;\n            var start, end;\n            function coords(ch, bias) {\n                return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n            }\n\n            function wrapX(pos, dir, side) {\n                var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n                var prop = dir == \"ltr\" == (side == \"after\") ? \"left\" : \"right\";\n                var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n                return coords(ch, prop)[prop];\n            }\n\n            var order = getOrder(lineObj, doc.direction);\n            iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n                var ltr = dir == \"ltr\";\n                var fromPos = coords(from, ltr ? \"left\" : \"right\");\n                var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n                var openStart = fromArg == null && from == 0,\n                    openEnd = toArg == null && to == lineLen;\n                var first = i == 0,\n                    last = !order || i == order.length - 1;\n                if (toPos.top - fromPos.top <= 3) {\n                    // Single line\n                    var openLeft = (docLTR ? openStart : openEnd) && first;\n                    var openRight = (docLTR ? openEnd : openStart) && last;\n                    var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n                    var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n                    add(left, fromPos.top, right - left, fromPos.bottom);\n                } else {\n                    // Multiple lines\n                    var topLeft, topRight, botLeft, botRight;\n                    if (ltr) {\n                        topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n                        topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n                        botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n                        botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n                    } else {\n                        topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n                        topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n                        botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n                        botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n                    }\n                    add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n                    if (fromPos.bottom < toPos.top) {\n                        add(leftSide, fromPos.bottom, null, toPos.top);\n                    }\n                    add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n                }\n\n                if (!start || cmpCoords(fromPos, start) < 0) {\n                    start = fromPos;\n                }\n                if (cmpCoords(toPos, start) < 0) {\n                    start = toPos;\n                }\n                if (!end || cmpCoords(fromPos, end) < 0) {\n                    end = fromPos;\n                }\n                if (cmpCoords(toPos, end) < 0) {\n                    end = toPos;\n                }\n            });\n            return { start: start, end: end };\n        }\n\n        var sFrom = range.from(),\n            sTo = range.to();\n        if (sFrom.line == sTo.line) {\n            drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n        } else {\n            var fromLine = getLine(doc, sFrom.line),\n                toLine = getLine(doc, sTo.line);\n            var singleVLine = visualLine(fromLine) == visualLine(toLine);\n            var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n            var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n            if (singleVLine) {\n                if (leftEnd.top < rightStart.top - 2) {\n                    add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n                    add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n                } else {\n                    add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n                }\n            }\n            if (leftEnd.bottom < rightStart.top) {\n                add(leftSide, leftEnd.bottom, null, rightStart.top);\n            }\n        }\n\n        output.appendChild(fragment);\n    }\n\n    // Cursor-blinking\n    function restartBlink(cm) {\n        if (!cm.state.focused) {\n            return;\n        }\n        var display = cm.display;\n        clearInterval(display.blinker);\n        var on = true;\n        display.cursorDiv.style.visibility = \"\";\n        if (cm.options.cursorBlinkRate > 0) {\n            display.blinker = setInterval(function () {\n                return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n            }, cm.options.cursorBlinkRate);\n        } else if (cm.options.cursorBlinkRate < 0) {\n            display.cursorDiv.style.visibility = \"hidden\";\n        }\n    }\n\n    function ensureFocus(cm) {\n        if (!cm.state.focused) {\n            cm.display.input.focus();onFocus(cm);\n        }\n    }\n\n    function delayBlurEvent(cm) {\n        cm.state.delayingBlurEvent = true;\n        setTimeout(function () {\n            if (cm.state.delayingBlurEvent) {\n                cm.state.delayingBlurEvent = false;\n                onBlur(cm);\n            }\n        }, 100);\n    }\n\n    function onFocus(cm, e) {\n        if (cm.state.delayingBlurEvent) {\n            cm.state.delayingBlurEvent = false;\n        }\n\n        if (cm.options.readOnly == \"nocursor\") {\n            return;\n        }\n        if (!cm.state.focused) {\n            signal(cm, \"focus\", cm, e);\n            cm.state.focused = true;\n            addClass(cm.display.wrapper, \"CodeMirror-focused\");\n            // This test prevents this from firing when a context\n            // menu is closed (since the input reset would kill the\n            // select-all detection hack)\n            if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n                cm.display.input.reset();\n                if (webkit) {\n                    setTimeout(function () {\n                        return cm.display.input.reset(true);\n                    }, 20);\n                } // Issue #1730\n            }\n            cm.display.input.receivedFocus();\n        }\n        restartBlink(cm);\n    }\n    function onBlur(cm, e) {\n        if (cm.state.delayingBlurEvent) {\n            return;\n        }\n\n        if (cm.state.focused) {\n            signal(cm, \"blur\", cm, e);\n            cm.state.focused = false;\n            rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n        }\n        clearInterval(cm.display.blinker);\n        setTimeout(function () {\n            if (!cm.state.focused) {\n                cm.display.shift = false;\n            }\n        }, 150);\n    }\n\n    // Read the actual heights of the rendered lines, and update their\n    // stored heights to match.\n    function updateHeightsInViewport(cm) {\n        var display = cm.display;\n        var prevBottom = display.lineDiv.offsetTop;\n        for (var i = 0; i < display.view.length; i++) {\n            var cur = display.view[i],\n                wrapping = cm.options.lineWrapping;\n            var height = void 0,\n                width = 0;\n            if (cur.hidden) {\n                continue;\n            }\n            if (ie && ie_version < 8) {\n                var bot = cur.node.offsetTop + cur.node.offsetHeight;\n                height = bot - prevBottom;\n                prevBottom = bot;\n            } else {\n                var box = cur.node.getBoundingClientRect();\n                height = box.bottom - box.top;\n                // Check that lines don't extend past the right of the current\n                // editor width\n                if (!wrapping && cur.text.firstChild) {\n                    width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;\n                }\n            }\n            var diff = cur.line.height - height;\n            if (diff > .005 || diff < -.005) {\n                updateLineHeight(cur.line, height);\n                updateWidgetHeight(cur.line);\n                if (cur.rest) {\n                    for (var j = 0; j < cur.rest.length; j++) {\n                        updateWidgetHeight(cur.rest[j]);\n                    }\n                }\n            }\n            if (width > cm.display.sizerWidth) {\n                var chWidth = Math.ceil(width / charWidth(cm.display));\n                if (chWidth > cm.display.maxLineLength) {\n                    cm.display.maxLineLength = chWidth;\n                    cm.display.maxLine = cur.line;\n                    cm.display.maxLineChanged = true;\n                }\n            }\n        }\n    }\n\n    // Read and store the height of line widgets associated with the\n    // given line.\n    function updateWidgetHeight(line) {\n        if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; ++i) {\n                var w = line.widgets[i],\n                    parent = w.node.parentNode;\n                if (parent) {\n                    w.height = parent.offsetHeight;\n                }\n            }\n        }\n    }\n\n    // Compute the lines that are visible in a given viewport (defaults\n    // the the current scroll position). viewport may contain top,\n    // height, and ensure (see op.scrollToPos) properties.\n    function visibleLines(display, doc, viewport) {\n        var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n        top = Math.floor(top - paddingTop(display));\n        var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n        var from = _lineAtHeight(doc, top),\n            to = _lineAtHeight(doc, bottom);\n        // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n        // forces those lines into the viewport (if possible).\n        if (viewport && viewport.ensure) {\n            var ensureFrom = viewport.ensure.from.line,\n                ensureTo = viewport.ensure.to.line;\n            if (ensureFrom < from) {\n                from = ensureFrom;\n                to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n            } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n                from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n                to = ensureTo;\n            }\n        }\n        return { from: from, to: Math.max(to, from + 1) };\n    }\n\n    // SCROLLING THINGS INTO VIEW\n\n    // If an editor sits on the top or bottom of the window, partially\n    // scrolled out of view, this ensures that the cursor is visible.\n    function maybeScrollWindow(cm, rect) {\n        if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n            return;\n        }\n\n        var display = cm.display,\n            box = display.sizer.getBoundingClientRect(),\n            doScroll = null;\n        if (rect.top + box.top < 0) {\n            doScroll = true;\n        } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n            doScroll = false;\n        }\n        if (doScroll != null && !phantom) {\n            var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n            cm.display.lineSpace.appendChild(scrollNode);\n            scrollNode.scrollIntoView(doScroll);\n            cm.display.lineSpace.removeChild(scrollNode);\n        }\n    }\n\n    // Scroll a given position into view (immediately), verifying that\n    // it actually became visible (as line heights are accurately\n    // measured, the position of something may 'drift' during drawing).\n    function scrollPosIntoView(cm, pos, end, margin) {\n        if (margin == null) {\n            margin = 0;\n        }\n        var rect;\n        if (!cm.options.lineWrapping && pos == end) {\n            // Set pos and end to the cursor positions around the character pos sticks to\n            // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n            // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n            pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n            end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n        }\n        for (var limit = 0; limit < 5; limit++) {\n            var changed = false;\n            var coords = _cursorCoords(cm, pos);\n            var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n            rect = { left: Math.min(coords.left, endCoords.left),\n                top: Math.min(coords.top, endCoords.top) - margin,\n                right: Math.max(coords.left, endCoords.left),\n                bottom: Math.max(coords.bottom, endCoords.bottom) + margin };\n            var scrollPos = calculateScrollPos(cm, rect);\n            var startTop = cm.doc.scrollTop,\n                startLeft = cm.doc.scrollLeft;\n            if (scrollPos.scrollTop != null) {\n                updateScrollTop(cm, scrollPos.scrollTop);\n                if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n                    changed = true;\n                }\n            }\n            if (scrollPos.scrollLeft != null) {\n                setScrollLeft(cm, scrollPos.scrollLeft);\n                if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n                    changed = true;\n                }\n            }\n            if (!changed) {\n                break;\n            }\n        }\n        return rect;\n    }\n\n    // Scroll a given set of coordinates into view (immediately).\n    function scrollIntoView(cm, rect) {\n        var scrollPos = calculateScrollPos(cm, rect);\n        if (scrollPos.scrollTop != null) {\n            updateScrollTop(cm, scrollPos.scrollTop);\n        }\n        if (scrollPos.scrollLeft != null) {\n            setScrollLeft(cm, scrollPos.scrollLeft);\n        }\n    }\n\n    // Calculate a new scroll position needed to scroll the given\n    // rectangle into view. Returns an object with scrollTop and\n    // scrollLeft properties. When these are undefined, the\n    // vertical/horizontal position does not need to be adjusted.\n    function calculateScrollPos(cm, rect) {\n        var display = cm.display,\n            snapMargin = textHeight(cm.display);\n        if (rect.top < 0) {\n            rect.top = 0;\n        }\n        var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n        var screen = displayHeight(cm),\n            result = {};\n        if (rect.bottom - rect.top > screen) {\n            rect.bottom = rect.top + screen;\n        }\n        var docBottom = cm.doc.height + paddingVert(display);\n        var atTop = rect.top < snapMargin,\n            atBottom = rect.bottom > docBottom - snapMargin;\n        if (rect.top < screentop) {\n            result.scrollTop = atTop ? 0 : rect.top;\n        } else if (rect.bottom > screentop + screen) {\n            var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n            if (newTop != screentop) {\n                result.scrollTop = newTop;\n            }\n        }\n\n        var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n        var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n        var tooWide = rect.right - rect.left > screenw;\n        if (tooWide) {\n            rect.right = rect.left + screenw;\n        }\n        if (rect.left < 10) {\n            result.scrollLeft = 0;\n        } else if (rect.left < screenleft) {\n            result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n        } else if (rect.right > screenw + screenleft - 3) {\n            result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n        }\n        return result;\n    }\n\n    // Store a relative adjustment to the scroll position in the current\n    // operation (to be applied when the operation finishes).\n    function addToScrollTop(cm, top) {\n        if (top == null) {\n            return;\n        }\n        resolveScrollToPos(cm);\n        cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n    }\n\n    // Make sure that at the end of the operation the current cursor is\n    // shown.\n    function ensureCursorVisible(cm) {\n        resolveScrollToPos(cm);\n        var cur = cm.getCursor();\n        cm.curOp.scrollToPos = { from: cur, to: cur, margin: cm.options.cursorScrollMargin };\n    }\n\n    function scrollToCoords(cm, x, y) {\n        if (x != null || y != null) {\n            resolveScrollToPos(cm);\n        }\n        if (x != null) {\n            cm.curOp.scrollLeft = x;\n        }\n        if (y != null) {\n            cm.curOp.scrollTop = y;\n        }\n    }\n\n    function scrollToRange(cm, range) {\n        resolveScrollToPos(cm);\n        cm.curOp.scrollToPos = range;\n    }\n\n    // When an operation has its scrollToPos property set, and another\n    // scroll action is applied before the end of the operation, this\n    // 'simulates' scrolling that position into view in a cheap way, so\n    // that the effect of intermediate scroll commands is not ignored.\n    function resolveScrollToPos(cm) {\n        var range = cm.curOp.scrollToPos;\n        if (range) {\n            cm.curOp.scrollToPos = null;\n            var from = estimateCoords(cm, range.from),\n                to = estimateCoords(cm, range.to);\n            scrollToCoordsRange(cm, from, to, range.margin);\n        }\n    }\n\n    function scrollToCoordsRange(cm, from, to, margin) {\n        var sPos = calculateScrollPos(cm, {\n            left: Math.min(from.left, to.left),\n            top: Math.min(from.top, to.top) - margin,\n            right: Math.max(from.right, to.right),\n            bottom: Math.max(from.bottom, to.bottom) + margin\n        });\n        scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n    }\n\n    // Sync the scrollable area and scrollbars, ensure the viewport\n    // covers the visible area.\n    function updateScrollTop(cm, val) {\n        if (Math.abs(cm.doc.scrollTop - val) < 2) {\n            return;\n        }\n        if (!gecko) {\n            updateDisplaySimple(cm, { top: val });\n        }\n        setScrollTop(cm, val, true);\n        if (gecko) {\n            updateDisplaySimple(cm);\n        }\n        startWorker(cm, 100);\n    }\n\n    function setScrollTop(cm, val, forceScroll) {\n        val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n        if (cm.display.scroller.scrollTop == val && !forceScroll) {\n            return;\n        }\n        cm.doc.scrollTop = val;\n        cm.display.scrollbars.setScrollTop(val);\n        if (cm.display.scroller.scrollTop != val) {\n            cm.display.scroller.scrollTop = val;\n        }\n    }\n\n    // Sync scroller and scrollbar, ensure the gutter elements are\n    // aligned.\n    function setScrollLeft(cm, val, isScroller, forceScroll) {\n        val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n        if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n            return;\n        }\n        cm.doc.scrollLeft = val;\n        alignHorizontally(cm);\n        if (cm.display.scroller.scrollLeft != val) {\n            cm.display.scroller.scrollLeft = val;\n        }\n        cm.display.scrollbars.setScrollLeft(val);\n    }\n\n    // SCROLLBARS\n\n    // Prepare DOM reads needed to update the scrollbars. Done in one\n    // shot to minimize update/measure roundtrips.\n    function measureForScrollbars(cm) {\n        var d = cm.display,\n            gutterW = d.gutters.offsetWidth;\n        var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n        return {\n            clientHeight: d.scroller.clientHeight,\n            viewHeight: d.wrapper.clientHeight,\n            scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n            viewWidth: d.wrapper.clientWidth,\n            barLeft: cm.options.fixedGutter ? gutterW : 0,\n            docHeight: docH,\n            scrollHeight: docH + scrollGap(cm) + d.barHeight,\n            nativeBarWidth: d.nativeBarWidth,\n            gutterWidth: gutterW\n        };\n    }\n\n    var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n        this.cm = cm;\n        var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n        var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n        vert.tabIndex = horiz.tabIndex = -1;\n        place(vert);place(horiz);\n\n        on(vert, \"scroll\", function () {\n            if (vert.clientHeight) {\n                scroll(vert.scrollTop, \"vertical\");\n            }\n        });\n        on(horiz, \"scroll\", function () {\n            if (horiz.clientWidth) {\n                scroll(horiz.scrollLeft, \"horizontal\");\n            }\n        });\n\n        this.checkedZeroWidth = false;\n        // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n        if (ie && ie_version < 8) {\n            this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n        }\n    };\n\n    NativeScrollbars.prototype.update = function (measure) {\n        var needsH = measure.scrollWidth > measure.clientWidth + 1;\n        var needsV = measure.scrollHeight > measure.clientHeight + 1;\n        var sWidth = measure.nativeBarWidth;\n\n        if (needsV) {\n            this.vert.style.display = \"block\";\n            this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n            var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n            // A bug in IE8 can cause this value to be negative, so guard it.\n            this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n        } else {\n            this.vert.style.display = \"\";\n            this.vert.firstChild.style.height = \"0\";\n        }\n\n        if (needsH) {\n            this.horiz.style.display = \"block\";\n            this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n            this.horiz.style.left = measure.barLeft + \"px\";\n            var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n            this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n        } else {\n            this.horiz.style.display = \"\";\n            this.horiz.firstChild.style.width = \"0\";\n        }\n\n        if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n            if (sWidth == 0) {\n                this.zeroWidthHack();\n            }\n            this.checkedZeroWidth = true;\n        }\n\n        return { right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0 };\n    };\n\n    NativeScrollbars.prototype.setScrollLeft = function (pos) {\n        if (this.horiz.scrollLeft != pos) {\n            this.horiz.scrollLeft = pos;\n        }\n        if (this.disableHoriz) {\n            this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n        }\n    };\n\n    NativeScrollbars.prototype.setScrollTop = function (pos) {\n        if (this.vert.scrollTop != pos) {\n            this.vert.scrollTop = pos;\n        }\n        if (this.disableVert) {\n            this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n        }\n    };\n\n    NativeScrollbars.prototype.zeroWidthHack = function () {\n        var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n        this.horiz.style.height = this.vert.style.width = w;\n        this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n        this.disableHoriz = new Delayed();\n        this.disableVert = new Delayed();\n    };\n\n    NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n        bar.style.pointerEvents = \"auto\";\n        function maybeDisable() {\n            // To find out whether the scrollbar is still visible, we\n            // check whether the element under the pixel in the bottom\n            // right corner of the scrollbar box is the scrollbar box\n            // itself (when the bar is still visible) or its filler child\n            // (when the bar is hidden). If it is still visible, we keep\n            // it enabled, if it's hidden, we disable pointer events.\n            var box = bar.getBoundingClientRect();\n            var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n            if (elt != bar) {\n                bar.style.pointerEvents = \"none\";\n            } else {\n                delay.set(1000, maybeDisable);\n            }\n        }\n        delay.set(1000, maybeDisable);\n    };\n\n    NativeScrollbars.prototype.clear = function () {\n        var parent = this.horiz.parentNode;\n        parent.removeChild(this.horiz);\n        parent.removeChild(this.vert);\n    };\n\n    var NullScrollbars = function NullScrollbars() {};\n\n    NullScrollbars.prototype.update = function () {\n        return { bottom: 0, right: 0 };\n    };\n    NullScrollbars.prototype.setScrollLeft = function () {};\n    NullScrollbars.prototype.setScrollTop = function () {};\n    NullScrollbars.prototype.clear = function () {};\n\n    function updateScrollbars(cm, measure) {\n        if (!measure) {\n            measure = measureForScrollbars(cm);\n        }\n        var startWidth = cm.display.barWidth,\n            startHeight = cm.display.barHeight;\n        updateScrollbarsInner(cm, measure);\n        for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n            if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n                updateHeightsInViewport(cm);\n            }\n            updateScrollbarsInner(cm, measureForScrollbars(cm));\n            startWidth = cm.display.barWidth;startHeight = cm.display.barHeight;\n        }\n    }\n\n    // Re-synchronize the fake scrollbars with the actual size of the\n    // content.\n    function updateScrollbarsInner(cm, measure) {\n        var d = cm.display;\n        var sizes = d.scrollbars.update(measure);\n\n        d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n        d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n        d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n        if (sizes.right && sizes.bottom) {\n            d.scrollbarFiller.style.display = \"block\";\n            d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n            d.scrollbarFiller.style.width = sizes.right + \"px\";\n        } else {\n            d.scrollbarFiller.style.display = \"\";\n        }\n        if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n            d.gutterFiller.style.display = \"block\";\n            d.gutterFiller.style.height = sizes.bottom + \"px\";\n            d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n        } else {\n            d.gutterFiller.style.display = \"\";\n        }\n    }\n\n    var scrollbarModel = { \"native\": NativeScrollbars, \"null\": NullScrollbars };\n\n    function initScrollbars(cm) {\n        if (cm.display.scrollbars) {\n            cm.display.scrollbars.clear();\n            if (cm.display.scrollbars.addClass) {\n                rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n            }\n        }\n\n        cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n            // Prevent clicks in the scrollbars from killing focus\n            on(node, \"mousedown\", function () {\n                if (cm.state.focused) {\n                    setTimeout(function () {\n                        return cm.display.input.focus();\n                    }, 0);\n                }\n            });\n            node.setAttribute(\"cm-not-content\", \"true\");\n        }, function (pos, axis) {\n            if (axis == \"horizontal\") {\n                setScrollLeft(cm, pos);\n            } else {\n                updateScrollTop(cm, pos);\n            }\n        }, cm);\n        if (cm.display.scrollbars.addClass) {\n            addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n        }\n    }\n\n    // Operations are used to wrap a series of changes to the editor\n    // state in such a way that each change won't have to update the\n    // cursor and display (which would be awkward, slow, and\n    // error-prone). Instead, display updates are batched and then all\n    // combined and executed at once.\n\n    var nextOpId = 0;\n    // Start a new operation.\n    function _startOperation(cm) {\n        cm.curOp = {\n            cm: cm,\n            viewChanged: false, // Flag that indicates that lines might need to be redrawn\n            startHeight: cm.doc.height, // Used to detect need to update scrollbar\n            forceUpdate: false, // Used to force a redraw\n            updateInput: 0, // Whether to reset the input textarea\n            typing: false, // Whether this reset should be careful to leave existing text (for compositing)\n            changeObjs: null, // Accumulated changes, for firing change events\n            cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n            cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n            selectionChanged: false, // Whether the selection needs to be redrawn\n            updateMaxLine: false, // Set when the widest line needs to be determined anew\n            scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n            scrollToPos: null, // Used to scroll to a specific position\n            focus: false,\n            id: ++nextOpId // Unique ID\n        };\n        pushOperation(cm.curOp);\n    }\n\n    // Finish an operation, updating the display and signalling delayed events\n    function _endOperation(cm) {\n        var op = cm.curOp;\n        if (op) {\n            finishOperation(op, function (group) {\n                for (var i = 0; i < group.ops.length; i++) {\n                    group.ops[i].cm.curOp = null;\n                }\n                endOperations(group);\n            });\n        }\n    }\n\n    // The DOM updates done when an operation finishes are batched so\n    // that the minimum number of relayouts are required.\n    function endOperations(group) {\n        var ops = group.ops;\n        for (var i = 0; i < ops.length; i++) // Read DOM\n        {\n            endOperation_R1(ops[i]);\n        }\n        for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n        {\n            endOperation_W1(ops[i$1]);\n        }\n        for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n        {\n            endOperation_R2(ops[i$2]);\n        }\n        for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n        {\n            endOperation_W2(ops[i$3]);\n        }\n        for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n        {\n            endOperation_finish(ops[i$4]);\n        }\n    }\n\n    function endOperation_R1(op) {\n        var cm = op.cm,\n            display = cm.display;\n        maybeClipScrollbars(cm);\n        if (op.updateMaxLine) {\n            findMaxLine(cm);\n        }\n\n        op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n        op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && { top: op.scrollTop, ensure: op.scrollToPos }, op.forceUpdate);\n    }\n\n    function endOperation_W1(op) {\n        op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n    }\n\n    function endOperation_R2(op) {\n        var cm = op.cm,\n            display = cm.display;\n        if (op.updatedDisplay) {\n            updateHeightsInViewport(cm);\n        }\n\n        op.barMeasure = measureForScrollbars(cm);\n\n        // If the max line changed since it was last measured, measure it,\n        // and ensure the document's width matches it.\n        // updateDisplay_W2 will use these properties to do the actual resizing\n        if (display.maxLineChanged && !cm.options.lineWrapping) {\n            op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n            cm.display.sizerWidth = op.adjustWidthTo;\n            op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n            op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n        }\n\n        if (op.updatedDisplay || op.selectionChanged) {\n            op.preparedSelection = display.input.prepareSelection();\n        }\n    }\n\n    function endOperation_W2(op) {\n        var cm = op.cm;\n\n        if (op.adjustWidthTo != null) {\n            cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n            if (op.maxScrollLeft < cm.doc.scrollLeft) {\n                setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n            }\n            cm.display.maxLineChanged = false;\n        }\n\n        var takeFocus = op.focus && op.focus == activeElt();\n        if (op.preparedSelection) {\n            cm.display.input.showSelection(op.preparedSelection, takeFocus);\n        }\n        if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n            updateScrollbars(cm, op.barMeasure);\n        }\n        if (op.updatedDisplay) {\n            setDocumentHeight(cm, op.barMeasure);\n        }\n\n        if (op.selectionChanged) {\n            restartBlink(cm);\n        }\n\n        if (cm.state.focused && op.updateInput) {\n            cm.display.input.reset(op.typing);\n        }\n        if (takeFocus) {\n            ensureFocus(op.cm);\n        }\n    }\n\n    function endOperation_finish(op) {\n        var cm = op.cm,\n            display = cm.display,\n            doc = cm.doc;\n\n        if (op.updatedDisplay) {\n            postUpdateDisplay(cm, op.update);\n        }\n\n        // Abort mouse wheel delta measurement, when scrolling explicitly\n        if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n            display.wheelStartX = display.wheelStartY = null;\n        }\n\n        // Propagate the scroll position to the actual DOM scroller\n        if (op.scrollTop != null) {\n            setScrollTop(cm, op.scrollTop, op.forceScroll);\n        }\n\n        if (op.scrollLeft != null) {\n            setScrollLeft(cm, op.scrollLeft, true, true);\n        }\n        // If we need to scroll a specific position into view, do so.\n        if (op.scrollToPos) {\n            var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n            maybeScrollWindow(cm, rect);\n        }\n\n        // Fire events for markers that are hidden/unidden by editing or\n        // undoing\n        var hidden = op.maybeHiddenMarkers,\n            unhidden = op.maybeUnhiddenMarkers;\n        if (hidden) {\n            for (var i = 0; i < hidden.length; ++i) {\n                if (!hidden[i].lines.length) {\n                    signal(hidden[i], \"hide\");\n                }\n            }\n        }\n        if (unhidden) {\n            for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n                if (unhidden[i$1].lines.length) {\n                    signal(unhidden[i$1], \"unhide\");\n                }\n            }\n        }\n\n        if (display.wrapper.offsetHeight) {\n            doc.scrollTop = cm.display.scroller.scrollTop;\n        }\n\n        // Fire change events, and delayed event handlers\n        if (op.changeObjs) {\n            signal(cm, \"changes\", cm, op.changeObjs);\n        }\n        if (op.update) {\n            op.update.finish();\n        }\n    }\n\n    // Run the given function in an operation\n    function runInOp(cm, f) {\n        if (cm.curOp) {\n            return f();\n        }\n        _startOperation(cm);\n        try {\n            return f();\n        } finally {\n            _endOperation(cm);\n        }\n    }\n    // Wraps a function in an operation. Returns the wrapped function.\n    function operation(cm, f) {\n        return function () {\n            if (cm.curOp) {\n                return f.apply(cm, arguments);\n            }\n            _startOperation(cm);\n            try {\n                return f.apply(cm, arguments);\n            } finally {\n                _endOperation(cm);\n            }\n        };\n    }\n    // Used to add methods to editor and doc instances, wrapping them in\n    // operations.\n    function methodOp(f) {\n        return function () {\n            if (this.curOp) {\n                return f.apply(this, arguments);\n            }\n            _startOperation(this);\n            try {\n                return f.apply(this, arguments);\n            } finally {\n                _endOperation(this);\n            }\n        };\n    }\n    function docMethodOp(f) {\n        return function () {\n            var cm = this.cm;\n            if (!cm || cm.curOp) {\n                return f.apply(this, arguments);\n            }\n            _startOperation(cm);\n            try {\n                return f.apply(this, arguments);\n            } finally {\n                _endOperation(cm);\n            }\n        };\n    }\n\n    // HIGHLIGHT WORKER\n\n    function startWorker(cm, time) {\n        if (cm.doc.highlightFrontier < cm.display.viewTo) {\n            cm.state.highlight.set(time, bind(highlightWorker, cm));\n        }\n    }\n\n    function highlightWorker(cm) {\n        var doc = cm.doc;\n        if (doc.highlightFrontier >= cm.display.viewTo) {\n            return;\n        }\n        var end = +new Date() + cm.options.workTime;\n        var context = getContextBefore(cm, doc.highlightFrontier);\n        var changedLines = [];\n\n        doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n            if (context.line >= cm.display.viewFrom) {\n                // Visible\n                var oldStyles = line.styles;\n                var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n                var highlighted = highlightLine(cm, line, context, true);\n                if (resetState) {\n                    context.state = resetState;\n                }\n                line.styles = highlighted.styles;\n                var oldCls = line.styleClasses,\n                    newCls = highlighted.classes;\n                if (newCls) {\n                    line.styleClasses = newCls;\n                } else if (oldCls) {\n                    line.styleClasses = null;\n                }\n                var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n                for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n                    ischange = oldStyles[i] != line.styles[i];\n                }\n                if (ischange) {\n                    changedLines.push(context.line);\n                }\n                line.stateAfter = context.save();\n                context.nextLine();\n            } else {\n                if (line.text.length <= cm.options.maxHighlightLength) {\n                    processLine(cm, line.text, context);\n                }\n                line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n                context.nextLine();\n            }\n            if (+new Date() > end) {\n                startWorker(cm, cm.options.workDelay);\n                return true;\n            }\n        });\n        doc.highlightFrontier = context.line;\n        doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n        if (changedLines.length) {\n            runInOp(cm, function () {\n                for (var i = 0; i < changedLines.length; i++) {\n                    regLineChange(cm, changedLines[i], \"text\");\n                }\n            });\n        }\n    }\n\n    // DISPLAY DRAWING\n\n    var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n        var display = cm.display;\n\n        this.viewport = viewport;\n        // Store some values that we'll need later (but don't want to force a relayout for)\n        this.visible = visibleLines(display, cm.doc, viewport);\n        this.editorIsHidden = !display.wrapper.offsetWidth;\n        this.wrapperHeight = display.wrapper.clientHeight;\n        this.wrapperWidth = display.wrapper.clientWidth;\n        this.oldDisplayWidth = displayWidth(cm);\n        this.force = force;\n        this.dims = getDimensions(cm);\n        this.events = [];\n    };\n\n    DisplayUpdate.prototype.signal = function (emitter, type) {\n        if (hasHandler(emitter, type)) {\n            this.events.push(arguments);\n        }\n    };\n    DisplayUpdate.prototype.finish = function () {\n        for (var i = 0; i < this.events.length; i++) {\n            signal.apply(null, this.events[i]);\n        }\n    };\n\n    function maybeClipScrollbars(cm) {\n        var display = cm.display;\n        if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n            display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n            display.heightForcer.style.height = scrollGap(cm) + \"px\";\n            display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n            display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n            display.scrollbarsClipped = true;\n        }\n    }\n\n    function selectionSnapshot(cm) {\n        if (cm.hasFocus()) {\n            return null;\n        }\n        var active = activeElt();\n        if (!active || !contains(cm.display.lineDiv, active)) {\n            return null;\n        }\n        var result = { activeElt: active };\n        if (window.getSelection) {\n            var sel = window.getSelection();\n            if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n                result.anchorNode = sel.anchorNode;\n                result.anchorOffset = sel.anchorOffset;\n                result.focusNode = sel.focusNode;\n                result.focusOffset = sel.focusOffset;\n            }\n        }\n        return result;\n    }\n\n    function restoreSelection(snapshot) {\n        if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n            return;\n        }\n        snapshot.activeElt.focus();\n        if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n            var sel = window.getSelection(),\n                range = document.createRange();\n            range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n            range.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range);\n            sel.extend(snapshot.focusNode, snapshot.focusOffset);\n        }\n    }\n\n    // Does the actual updating of the line display. Bails out\n    // (returning false) when there is nothing to be done and forced is\n    // false.\n    function updateDisplayIfNeeded(cm, update) {\n        var display = cm.display,\n            doc = cm.doc;\n\n        if (update.editorIsHidden) {\n            resetView(cm);\n            return false;\n        }\n\n        // Bail out if the visible area is already rendered and nothing changed.\n        if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n            return false;\n        }\n\n        if (maybeUpdateLineNumberWidth(cm)) {\n            resetView(cm);\n            update.dims = getDimensions(cm);\n        }\n\n        // Compute a suitable new viewport (from & to)\n        var end = doc.first + doc.size;\n        var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n        var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n        if (display.viewFrom < from && from - display.viewFrom < 20) {\n            from = Math.max(doc.first, display.viewFrom);\n        }\n        if (display.viewTo > to && display.viewTo - to < 20) {\n            to = Math.min(end, display.viewTo);\n        }\n        if (sawCollapsedSpans) {\n            from = visualLineNo(cm.doc, from);\n            to = visualLineEndNo(cm.doc, to);\n        }\n\n        var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n        adjustView(cm, from, to);\n\n        display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom));\n        // Position the mover div to align with the current scroll position\n        cm.display.mover.style.top = display.viewOffset + \"px\";\n\n        var toUpdate = countDirtyView(cm);\n        if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n            return false;\n        }\n\n        // For big changes, we hide the enclosing element during the\n        // update, since that speeds up the operations on most browsers.\n        var selSnapshot = selectionSnapshot(cm);\n        if (toUpdate > 4) {\n            display.lineDiv.style.display = \"none\";\n        }\n        patchDisplay(cm, display.updateLineNumbers, update.dims);\n        if (toUpdate > 4) {\n            display.lineDiv.style.display = \"\";\n        }\n        display.renderedView = display.view;\n        // There might have been a widget with a focused element that got\n        // hidden or updated, if so re-focus it.\n        restoreSelection(selSnapshot);\n\n        // Prevent selection and cursors from interfering with the scroll\n        // width and height.\n        removeChildren(display.cursorDiv);\n        removeChildren(display.selectionDiv);\n        display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n        if (different) {\n            display.lastWrapHeight = update.wrapperHeight;\n            display.lastWrapWidth = update.wrapperWidth;\n            startWorker(cm, 400);\n        }\n\n        display.updateLineNumbers = null;\n\n        return true;\n    }\n\n    function postUpdateDisplay(cm, update) {\n        var viewport = update.viewport;\n\n        for (var first = true;; first = false) {\n            if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n                // Clip forced viewport to actual scrollable area.\n                if (viewport && viewport.top != null) {\n                    viewport = { top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top) };\n                }\n                // Updated line heights might result in the drawn area not\n                // actually covering the viewport. Keep looping until it does.\n                update.visible = visibleLines(cm.display, cm.doc, viewport);\n                if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n                    break;\n                }\n            }\n            if (!updateDisplayIfNeeded(cm, update)) {\n                break;\n            }\n            updateHeightsInViewport(cm);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.force = false;\n        }\n\n        update.signal(cm, \"update\", cm);\n        if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n            update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n            cm.display.reportedViewFrom = cm.display.viewFrom;cm.display.reportedViewTo = cm.display.viewTo;\n        }\n    }\n\n    function updateDisplaySimple(cm, viewport) {\n        var update = new DisplayUpdate(cm, viewport);\n        if (updateDisplayIfNeeded(cm, update)) {\n            updateHeightsInViewport(cm);\n            postUpdateDisplay(cm, update);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.finish();\n        }\n    }\n\n    // Sync the actual display DOM structure with display.view, removing\n    // nodes for lines that are no longer in view, and creating the ones\n    // that are not there yet, and updating the ones that are out of\n    // date.\n    function patchDisplay(cm, updateNumbersFrom, dims) {\n        var display = cm.display,\n            lineNumbers = cm.options.lineNumbers;\n        var container = display.lineDiv,\n            cur = container.firstChild;\n\n        function rm(node) {\n            var next = node.nextSibling;\n            // Works around a throw-scroll bug in OS X Webkit\n            if (webkit && mac && cm.display.currentWheelTarget == node) {\n                node.style.display = \"none\";\n            } else {\n                node.parentNode.removeChild(node);\n            }\n            return next;\n        }\n\n        var view = display.view,\n            lineN = display.viewFrom;\n        // Loop over the elements in the view, syncing cur (the DOM nodes\n        // in display.lineDiv) with the view as we go.\n        for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (lineView.hidden) ;else if (!lineView.node || lineView.node.parentNode != container) {\n                // Not drawn yet\n                var node = buildLineElement(cm, lineView, lineN, dims);\n                container.insertBefore(node, cur);\n            } else {\n                // Already drawn\n                while (cur != lineView.node) {\n                    cur = rm(cur);\n                }\n                var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n                if (lineView.changes) {\n                    if (indexOf(lineView.changes, \"gutter\") > -1) {\n                        updateNumber = false;\n                    }\n                    updateLineForChanges(cm, lineView, lineN, dims);\n                }\n                if (updateNumber) {\n                    removeChildren(lineView.lineNumber);\n                    lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n                }\n                cur = lineView.node.nextSibling;\n            }\n            lineN += lineView.size;\n        }\n        while (cur) {\n            cur = rm(cur);\n        }\n    }\n\n    function updateGutterSpace(display) {\n        var width = display.gutters.offsetWidth;\n        display.sizer.style.marginLeft = width + \"px\";\n    }\n\n    function setDocumentHeight(cm, measure) {\n        cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n        cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n        cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n    }\n\n    // Re-align line numbers and gutter marks to compensate for\n    // horizontal scrolling.\n    function alignHorizontally(cm) {\n        var display = cm.display,\n            view = display.view;\n        if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n            return;\n        }\n        var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n        var gutterW = display.gutters.offsetWidth,\n            left = comp + \"px\";\n        for (var i = 0; i < view.length; i++) {\n            if (!view[i].hidden) {\n                if (cm.options.fixedGutter) {\n                    if (view[i].gutter) {\n                        view[i].gutter.style.left = left;\n                    }\n                    if (view[i].gutterBackground) {\n                        view[i].gutterBackground.style.left = left;\n                    }\n                }\n                var align = view[i].alignable;\n                if (align) {\n                    for (var j = 0; j < align.length; j++) {\n                        align[j].style.left = left;\n                    }\n                }\n            }\n        }\n        if (cm.options.fixedGutter) {\n            display.gutters.style.left = comp + gutterW + \"px\";\n        }\n    }\n\n    // Used to ensure that the line number gutter is still the right\n    // size for the current document size. Returns true when an update\n    // is needed.\n    function maybeUpdateLineNumberWidth(cm) {\n        if (!cm.options.lineNumbers) {\n            return false;\n        }\n        var doc = cm.doc,\n            last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n            display = cm.display;\n        if (last.length != display.lineNumChars) {\n            var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n            var innerW = test.firstChild.offsetWidth,\n                padding = test.offsetWidth - innerW;\n            display.lineGutter.style.width = \"\";\n            display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n            display.lineNumWidth = display.lineNumInnerWidth + padding;\n            display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n            display.lineGutter.style.width = display.lineNumWidth + \"px\";\n            updateGutterSpace(cm.display);\n            return true;\n        }\n        return false;\n    }\n\n    function getGutters(gutters, lineNumbers) {\n        var result = [],\n            sawLineNumbers = false;\n        for (var i = 0; i < gutters.length; i++) {\n            var name = gutters[i],\n                style = null;\n            if (typeof name != \"string\") {\n                style = name.style;name = name.className;\n            }\n            if (name == \"CodeMirror-linenumbers\") {\n                if (!lineNumbers) {\n                    continue;\n                } else {\n                    sawLineNumbers = true;\n                }\n            }\n            result.push({ className: name, style: style });\n        }\n        if (lineNumbers && !sawLineNumbers) {\n            result.push({ className: \"CodeMirror-linenumbers\", style: null });\n        }\n        return result;\n    }\n\n    // Rebuild the gutter elements, ensure the margin to the left of the\n    // code matches their width.\n    function renderGutters(display) {\n        var gutters = display.gutters,\n            specs = display.gutterSpecs;\n        removeChildren(gutters);\n        display.lineGutter = null;\n        for (var i = 0; i < specs.length; ++i) {\n            var ref = specs[i];\n            var className = ref.className;\n            var style = ref.style;\n            var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n            if (style) {\n                gElt.style.cssText = style;\n            }\n            if (className == \"CodeMirror-linenumbers\") {\n                display.lineGutter = gElt;\n                gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n            }\n        }\n        gutters.style.display = specs.length ? \"\" : \"none\";\n        updateGutterSpace(display);\n    }\n\n    function updateGutters(cm) {\n        renderGutters(cm.display);\n        regChange(cm);\n        alignHorizontally(cm);\n    }\n\n    // The display handles the DOM integration, both for input reading\n    // and content drawing. It holds references to DOM nodes and\n    // display-related state.\n\n    function Display(place, doc, input, options) {\n        var d = this;\n        this.input = input;\n\n        // Covers bottom-right square when both scrollbars are present.\n        d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n        d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n        // Covers bottom of gutter when coverGutterNextToScrollbar is on\n        // and h scrollbar is present.\n        d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n        d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n        // Will contain the actual code, positioned to cover the viewport.\n        d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n        // Elements are added to these to represent selection and cursors.\n        d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n        d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n        // A visibility: hidden element used to find the size of things.\n        d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n        // When lines outside of the viewport are measured, they are drawn in this.\n        d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n        // Wraps everything that needs to exist inside the vertically-padded coordinate system\n        d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n        var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n        // Moved around its parent to cover visible view.\n        d.mover = elt(\"div\", [lines], null, \"position: relative\");\n        // Set to the height of the document, allowing scrolling.\n        d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n        d.sizerWidth = null;\n        // Behavior of elts with overflow: auto and padding is\n        // inconsistent across browsers. This is used to ensure the\n        // scrollable area is big enough.\n        d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n        // Will contain the gutters, if any.\n        d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n        d.lineGutter = null;\n        // Actual scrollable element.\n        d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n        d.scroller.setAttribute(\"tabIndex\", \"-1\");\n        // The element in which the editor lives.\n        d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n        // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n        if (ie && ie_version < 8) {\n            d.gutters.style.zIndex = -1;d.scroller.style.paddingRight = 0;\n        }\n        if (!webkit && !(gecko && mobile)) {\n            d.scroller.draggable = true;\n        }\n\n        if (place) {\n            if (place.appendChild) {\n                place.appendChild(d.wrapper);\n            } else {\n                place(d.wrapper);\n            }\n        }\n\n        // Current rendered range (may be bigger than the view window).\n        d.viewFrom = d.viewTo = doc.first;\n        d.reportedViewFrom = d.reportedViewTo = doc.first;\n        // Information about the rendered lines.\n        d.view = [];\n        d.renderedView = null;\n        // Holds info about a single rendered line when it was rendered\n        // for measurement, while not in view.\n        d.externalMeasured = null;\n        // Empty space (in pixels) above the view\n        d.viewOffset = 0;\n        d.lastWrapHeight = d.lastWrapWidth = 0;\n        d.updateLineNumbers = null;\n\n        d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n        d.scrollbarsClipped = false;\n\n        // Used to only resize the line number gutter when necessary (when\n        // the amount of lines crosses a boundary that makes its width change)\n        d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n        // Set to true when a non-horizontal-scrolling line widget is\n        // added. As an optimization, line widget aligning is skipped when\n        // this is false.\n        d.alignWidgets = false;\n\n        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n        // Tracks the maximum line length so that the horizontal scrollbar\n        // can be kept static when scrolling.\n        d.maxLine = null;\n        d.maxLineLength = 0;\n        d.maxLineChanged = false;\n\n        // Used for measuring wheel scrolling granularity\n        d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n        // True when shift is held down.\n        d.shift = false;\n\n        // Used to track whether anything happened since the context menu\n        // was opened.\n        d.selForContextMenu = null;\n\n        d.activeTouch = null;\n\n        d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n        renderGutters(d);\n\n        input.init(d);\n    }\n\n    // Since the delta values reported on mouse wheel events are\n    // unstandardized between browsers and even browser versions, and\n    // generally horribly unpredictable, this code starts by measuring\n    // the scroll effect that the first few mouse wheel events have,\n    // and, from that, detects the way it can convert deltas to pixel\n    // offsets afterwards.\n    //\n    // The reason we want to know the amount a wheel event will scroll\n    // is that it gives us a chance to update the display before the\n    // actual scrolling happens, reducing flickering.\n\n    var wheelSamples = 0,\n        wheelPixelsPerUnit = null;\n    // Fill in a browser-detected starting value on browsers where we\n    // know one. These don't have to be accurate -- the result of them\n    // being wrong would just be a slight flicker on the first wheel\n    // scroll (if it is large enough).\n    if (ie) {\n        wheelPixelsPerUnit = -.53;\n    } else if (gecko) {\n        wheelPixelsPerUnit = 15;\n    } else if (chrome) {\n        wheelPixelsPerUnit = -.7;\n    } else if (safari) {\n        wheelPixelsPerUnit = -1 / 3;\n    }\n\n    function wheelEventDelta(e) {\n        var dx = e.wheelDeltaX,\n            dy = e.wheelDeltaY;\n        if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n            dx = e.detail;\n        }\n        if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n            dy = e.detail;\n        } else if (dy == null) {\n            dy = e.wheelDelta;\n        }\n        return { x: dx, y: dy };\n    }\n    function wheelEventPixels(e) {\n        var delta = wheelEventDelta(e);\n        delta.x *= wheelPixelsPerUnit;\n        delta.y *= wheelPixelsPerUnit;\n        return delta;\n    }\n\n    function onScrollWheel(cm, e) {\n        var delta = wheelEventDelta(e),\n            dx = delta.x,\n            dy = delta.y;\n\n        var display = cm.display,\n            scroll = display.scroller;\n        // Quit if there's nothing to scroll here\n        var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n        var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n        if (!(dx && canScrollX || dy && canScrollY)) {\n            return;\n        }\n\n        // Webkit browsers on OS X abort momentum scrolls when the target\n        // of the scroll event is removed from the scrollable element.\n        // This hack (see related code in patchDisplay) makes sure the\n        // element is kept around.\n        if (dy && mac && webkit) {\n            outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n                for (var i = 0; i < view.length; i++) {\n                    if (view[i].node == cur) {\n                        cm.display.currentWheelTarget = cur;\n                        break outer;\n                    }\n                }\n            }\n        }\n\n        // On some browsers, horizontal scrolling will cause redraws to\n        // happen before the gutter has been realigned, causing it to\n        // wriggle around in a most unseemly way. When we have an\n        // estimated pixels/delta value, we just handle horizontal\n        // scrolling entirely here. It'll be slightly off from native, but\n        // better than glitching out.\n        if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n            if (dy && canScrollY) {\n                updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n            }\n            setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n            // Only prevent default scrolling if vertical scrolling is\n            // actually possible. Otherwise, it causes vertical scroll\n            // jitter on OSX trackpads when deltaX is small and deltaY\n            // is large (issue #3579)\n            if (!dy || dy && canScrollY) {\n                e_preventDefault(e);\n            }\n            display.wheelStartX = null; // Abort measurement, if in progress\n            return;\n        }\n\n        // 'Project' the visible viewport to cover the area that is being\n        // scrolled into view (if we know enough to estimate it).\n        if (dy && wheelPixelsPerUnit != null) {\n            var pixels = dy * wheelPixelsPerUnit;\n            var top = cm.doc.scrollTop,\n                bot = top + display.wrapper.clientHeight;\n            if (pixels < 0) {\n                top = Math.max(0, top + pixels - 50);\n            } else {\n                bot = Math.min(cm.doc.height, bot + pixels + 50);\n            }\n            updateDisplaySimple(cm, { top: top, bottom: bot });\n        }\n\n        if (wheelSamples < 20) {\n            if (display.wheelStartX == null) {\n                display.wheelStartX = scroll.scrollLeft;display.wheelStartY = scroll.scrollTop;\n                display.wheelDX = dx;display.wheelDY = dy;\n                setTimeout(function () {\n                    if (display.wheelStartX == null) {\n                        return;\n                    }\n                    var movedX = scroll.scrollLeft - display.wheelStartX;\n                    var movedY = scroll.scrollTop - display.wheelStartY;\n                    var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n                    display.wheelStartX = display.wheelStartY = null;\n                    if (!sample) {\n                        return;\n                    }\n                    wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n                    ++wheelSamples;\n                }, 200);\n            } else {\n                display.wheelDX += dx;display.wheelDY += dy;\n            }\n        }\n    }\n\n    // Selection objects are immutable. A new one is created every time\n    // the selection changes. A selection is one or more non-overlapping\n    // (and non-touching) ranges, sorted, and an integer that indicates\n    // which one is the primary selection (the one that's scrolled into\n    // view, that getCursor returns, etc).\n    var Selection = function Selection(ranges, primIndex) {\n        this.ranges = ranges;\n        this.primIndex = primIndex;\n    };\n\n    Selection.prototype.primary = function () {\n        return this.ranges[this.primIndex];\n    };\n\n    Selection.prototype.equals = function (other) {\n        if (other == this) {\n            return true;\n        }\n        if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n            return false;\n        }\n        for (var i = 0; i < this.ranges.length; i++) {\n            var here = this.ranges[i],\n                there = other.ranges[i];\n            if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n                return false;\n            }\n        }\n        return true;\n    };\n\n    Selection.prototype.deepCopy = function () {\n        var out = [];\n        for (var i = 0; i < this.ranges.length; i++) {\n            out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n        }\n        return new Selection(out, this.primIndex);\n    };\n\n    Selection.prototype.somethingSelected = function () {\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (!this.ranges[i].empty()) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    Selection.prototype.contains = function (pos, end) {\n        if (!end) {\n            end = pos;\n        }\n        for (var i = 0; i < this.ranges.length; i++) {\n            var range = this.ranges[i];\n            if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    var Range = function Range(anchor, head) {\n        this.anchor = anchor;this.head = head;\n    };\n\n    Range.prototype.from = function () {\n        return minPos(this.anchor, this.head);\n    };\n    Range.prototype.to = function () {\n        return maxPos(this.anchor, this.head);\n    };\n    Range.prototype.empty = function () {\n        return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n    };\n\n    // Take an unsorted, potentially overlapping set of ranges, and\n    // build a selection out of it. 'Consumes' ranges array (modifying\n    // it).\n    function normalizeSelection(cm, ranges, primIndex) {\n        var mayTouch = cm && cm.options.selectionsMayTouch;\n        var prim = ranges[primIndex];\n        ranges.sort(function (a, b) {\n            return cmp(a.from(), b.from());\n        });\n        primIndex = indexOf(ranges, prim);\n        for (var i = 1; i < ranges.length; i++) {\n            var cur = ranges[i],\n                prev = ranges[i - 1];\n            var diff = cmp(prev.to(), cur.from());\n            if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n                var from = minPos(prev.from(), cur.from()),\n                    to = maxPos(prev.to(), cur.to());\n                var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n                if (i <= primIndex) {\n                    --primIndex;\n                }\n                ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n            }\n        }\n        return new Selection(ranges, primIndex);\n    }\n\n    function simpleSelection(anchor, head) {\n        return new Selection([new Range(anchor, head || anchor)], 0);\n    }\n\n    // Compute the position of the end of a change (its 'to' property\n    // refers to the pre-change end).\n    function changeEnd(change) {\n        if (!change.text) {\n            return change.to;\n        }\n        return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n    }\n\n    // Adjust a position to refer to the post-change position of the\n    // same text, or the end of the change if the change covers it.\n    function adjustForChange(pos, change) {\n        if (cmp(pos, change.from) < 0) {\n            return pos;\n        }\n        if (cmp(pos, change.to) <= 0) {\n            return changeEnd(change);\n        }\n\n        var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n            ch = pos.ch;\n        if (pos.line == change.to.line) {\n            ch += changeEnd(change).ch - change.to.ch;\n        }\n        return Pos(line, ch);\n    }\n\n    function computeSelAfterChange(doc, change) {\n        var out = [];\n        for (var i = 0; i < doc.sel.ranges.length; i++) {\n            var range = doc.sel.ranges[i];\n            out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n        }\n        return normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    }\n\n    function offsetPos(pos, old, nw) {\n        if (pos.line == old.line) {\n            return Pos(nw.line, pos.ch - old.ch + nw.ch);\n        } else {\n            return Pos(nw.line + (pos.line - old.line), pos.ch);\n        }\n    }\n\n    // Used by replaceSelections to allow moving the selection to the\n    // start or around the replaced test. Hint may be \"start\" or \"around\".\n    function computeReplacedSel(doc, changes, hint) {\n        var out = [];\n        var oldPrev = Pos(doc.first, 0),\n            newPrev = oldPrev;\n        for (var i = 0; i < changes.length; i++) {\n            var change = changes[i];\n            var from = offsetPos(change.from, oldPrev, newPrev);\n            var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n            oldPrev = change.to;\n            newPrev = to;\n            if (hint == \"around\") {\n                var range = doc.sel.ranges[i],\n                    inv = cmp(range.head, range.anchor) < 0;\n                out[i] = new Range(inv ? to : from, inv ? from : to);\n            } else {\n                out[i] = new Range(from, from);\n            }\n        }\n        return new Selection(out, doc.sel.primIndex);\n    }\n\n    // Used to get the editor into a consistent state again when options change.\n\n    function loadMode(cm) {\n        cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n        resetModeState(cm);\n    }\n\n    function resetModeState(cm) {\n        cm.doc.iter(function (line) {\n            if (line.stateAfter) {\n                line.stateAfter = null;\n            }\n            if (line.styles) {\n                line.styles = null;\n            }\n        });\n        cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n        startWorker(cm, 100);\n        cm.state.modeGen++;\n        if (cm.curOp) {\n            regChange(cm);\n        }\n    }\n\n    // DOCUMENT DATA STRUCTURE\n\n    // By default, updates that start and end at the beginning of a line\n    // are treated specially, in order to make the association of line\n    // widgets and marker elements with the text behave more intuitive.\n    function isWholeLineUpdate(doc, change) {\n        return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n    }\n\n    // Perform a change on the document data structure.\n    function updateDoc(doc, change, markedSpans, estimateHeight) {\n        function spansFor(n) {\n            return markedSpans ? markedSpans[n] : null;\n        }\n        function update(line, text, spans) {\n            updateLine(line, text, spans, estimateHeight);\n            signalLater(line, \"change\", line, change);\n        }\n        function linesFor(start, end) {\n            var result = [];\n            for (var i = start; i < end; ++i) {\n                result.push(new Line(text[i], spansFor(i), estimateHeight));\n            }\n            return result;\n        }\n\n        var from = change.from,\n            to = change.to,\n            text = change.text;\n        var firstLine = getLine(doc, from.line),\n            lastLine = getLine(doc, to.line);\n        var lastText = lst(text),\n            lastSpans = spansFor(text.length - 1),\n            nlines = to.line - from.line;\n\n        // Adjust the line structure\n        if (change.full) {\n            doc.insert(0, linesFor(0, text.length));\n            doc.remove(text.length, doc.size - text.length);\n        } else if (isWholeLineUpdate(doc, change)) {\n            // This is a whole-line replace. Treated specially to make\n            // sure line objects move the way they are supposed to.\n            var added = linesFor(0, text.length - 1);\n            update(lastLine, lastLine.text, lastSpans);\n            if (nlines) {\n                doc.remove(from.line, nlines);\n            }\n            if (added.length) {\n                doc.insert(from.line, added);\n            }\n        } else if (firstLine == lastLine) {\n            if (text.length == 1) {\n                update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n            } else {\n                var added$1 = linesFor(1, text.length - 1);\n                added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n                update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n                doc.insert(from.line + 1, added$1);\n            }\n        } else if (text.length == 1) {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n            doc.remove(from.line + 1, nlines);\n        } else {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n            update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n            var added$2 = linesFor(1, text.length - 1);\n            if (nlines > 1) {\n                doc.remove(from.line + 1, nlines - 1);\n            }\n            doc.insert(from.line + 1, added$2);\n        }\n\n        signalLater(doc, \"change\", doc, change);\n    }\n\n    // Call f for all linked documents.\n    function linkedDocs(doc, f, sharedHistOnly) {\n        function propagate(doc, skip, sharedHist) {\n            if (doc.linked) {\n                for (var i = 0; i < doc.linked.length; ++i) {\n                    var rel = doc.linked[i];\n                    if (rel.doc == skip) {\n                        continue;\n                    }\n                    var shared = sharedHist && rel.sharedHist;\n                    if (sharedHistOnly && !shared) {\n                        continue;\n                    }\n                    f(rel.doc, shared);\n                    propagate(rel.doc, doc, shared);\n                }\n            }\n        }\n        propagate(doc, null, true);\n    }\n\n    // Attach a document to an editor.\n    function attachDoc(cm, doc) {\n        if (doc.cm) {\n            throw new Error(\"This document is already in use.\");\n        }\n        cm.doc = doc;\n        doc.cm = cm;\n        estimateLineHeights(cm);\n        loadMode(cm);\n        setDirectionClass(cm);\n        if (!cm.options.lineWrapping) {\n            findMaxLine(cm);\n        }\n        cm.options.mode = doc.modeOption;\n        regChange(cm);\n    }\n\n    function setDirectionClass(cm) {\n        (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n    }\n\n    function directionChanged(cm) {\n        runInOp(cm, function () {\n            setDirectionClass(cm);\n            regChange(cm);\n        });\n    }\n\n    function History(startGen) {\n        // Arrays of change events and selections. Doing something adds an\n        // event to done and clears undo. Undoing moves events from done\n        // to undone, redoing moves them in the other direction.\n        this.done = [];this.undone = [];\n        this.undoDepth = Infinity;\n        // Used to track when changes can be merged into a single undo\n        // event\n        this.lastModTime = this.lastSelTime = 0;\n        this.lastOp = this.lastSelOp = null;\n        this.lastOrigin = this.lastSelOrigin = null;\n        // Used by the isClean() method\n        this.generation = this.maxGeneration = startGen || 1;\n    }\n\n    // Create a history change event from an updateDoc-style change\n    // object.\n    function historyChangeFromChange(doc, change) {\n        var histChange = { from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to) };\n        attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n        linkedDocs(doc, function (doc) {\n            return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n        }, true);\n        return histChange;\n    }\n\n    // Pop all selection events off the end of a history array. Stop at\n    // a change event.\n    function clearSelectionEvents(array) {\n        while (array.length) {\n            var last = lst(array);\n            if (last.ranges) {\n                array.pop();\n            } else {\n                break;\n            }\n        }\n    }\n\n    // Find the top change event in the history. Pop off selection\n    // events that are in the way.\n    function lastChangeEvent(hist, force) {\n        if (force) {\n            clearSelectionEvents(hist.done);\n            return lst(hist.done);\n        } else if (hist.done.length && !lst(hist.done).ranges) {\n            return lst(hist.done);\n        } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n            hist.done.pop();\n            return lst(hist.done);\n        }\n    }\n\n    // Register a change in the history. Merges changes that are within\n    // a single operation, or are close together with an origin that\n    // allows merging (starting with \"+\") into a single event.\n    function addChangeToHistory(doc, change, selAfter, opId) {\n        var hist = doc.history;\n        hist.undone.length = 0;\n        var time = +new Date(),\n            cur;\n        var last;\n\n        if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n            // Merge this change into the last event\n            last = lst(cur.changes);\n            if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n                // Optimized case for simple insertion -- don't want to add\n                // new changesets for every character typed\n                last.to = changeEnd(change);\n            } else {\n                // Add new sub-event\n                cur.changes.push(historyChangeFromChange(doc, change));\n            }\n        } else {\n            // Can not be merged, start a new event.\n            var before = lst(hist.done);\n            if (!before || !before.ranges) {\n                pushSelectionToHistory(doc.sel, hist.done);\n            }\n            cur = { changes: [historyChangeFromChange(doc, change)],\n                generation: hist.generation };\n            hist.done.push(cur);\n            while (hist.done.length > hist.undoDepth) {\n                hist.done.shift();\n                if (!hist.done[0].ranges) {\n                    hist.done.shift();\n                }\n            }\n        }\n        hist.done.push(selAfter);\n        hist.generation = ++hist.maxGeneration;\n        hist.lastModTime = hist.lastSelTime = time;\n        hist.lastOp = hist.lastSelOp = opId;\n        hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n        if (!last) {\n            signal(doc, \"historyAdded\");\n        }\n    }\n\n    function selectionEventCanBeMerged(doc, origin, prev, sel) {\n        var ch = origin.charAt(0);\n        return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n    }\n\n    // Called whenever the selection changes, sets the new selection as\n    // the pending selection in the history, and pushes the old pending\n    // selection into the 'done' array when it was significantly\n    // different (in number of selected ranges, emptiness, or time).\n    function addSelectionToHistory(doc, sel, opId, options) {\n        var hist = doc.history,\n            origin = options && options.origin;\n\n        // A new event is started when the previous origin does not match\n        // the current, or the origins don't allow matching. Origins\n        // starting with * are always merged, those starting with + are\n        // merged when similar and close together in time.\n        if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n            hist.done[hist.done.length - 1] = sel;\n        } else {\n            pushSelectionToHistory(sel, hist.done);\n        }\n\n        hist.lastSelTime = +new Date();\n        hist.lastSelOrigin = origin;\n        hist.lastSelOp = opId;\n        if (options && options.clearRedo !== false) {\n            clearSelectionEvents(hist.undone);\n        }\n    }\n\n    function pushSelectionToHistory(sel, dest) {\n        var top = lst(dest);\n        if (!(top && top.ranges && top.equals(sel))) {\n            dest.push(sel);\n        }\n    }\n\n    // Used to store marked span information in the history.\n    function attachLocalSpans(doc, change, from, to) {\n        var existing = change[\"spans_\" + doc.id],\n            n = 0;\n        doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n            if (line.markedSpans) {\n                (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n            }\n            ++n;\n        });\n    }\n\n    // When un/re-doing restores text containing marked spans, those\n    // that have been explicitly cleared should not be restored.\n    function removeClearedSpans(spans) {\n        if (!spans) {\n            return null;\n        }\n        var out;\n        for (var i = 0; i < spans.length; ++i) {\n            if (spans[i].marker.explicitlyCleared) {\n                if (!out) {\n                    out = spans.slice(0, i);\n                }\n            } else if (out) {\n                out.push(spans[i]);\n            }\n        }\n        return !out ? spans : out.length ? out : null;\n    }\n\n    // Retrieve and filter the old marked spans stored in a change event.\n    function getOldSpans(doc, change) {\n        var found = change[\"spans_\" + doc.id];\n        if (!found) {\n            return null;\n        }\n        var nw = [];\n        for (var i = 0; i < change.text.length; ++i) {\n            nw.push(removeClearedSpans(found[i]));\n        }\n        return nw;\n    }\n\n    // Used for un/re-doing changes from the history. Combines the\n    // result of computing the existing spans with the set of spans that\n    // existed in the history (so that deleting around a span and then\n    // undoing brings back the span).\n    function mergeOldSpans(doc, change) {\n        var old = getOldSpans(doc, change);\n        var stretched = stretchSpansOverChange(doc, change);\n        if (!old) {\n            return stretched;\n        }\n        if (!stretched) {\n            return old;\n        }\n\n        for (var i = 0; i < old.length; ++i) {\n            var oldCur = old[i],\n                stretchCur = stretched[i];\n            if (oldCur && stretchCur) {\n                spans: for (var j = 0; j < stretchCur.length; ++j) {\n                    var span = stretchCur[j];\n                    for (var k = 0; k < oldCur.length; ++k) {\n                        if (oldCur[k].marker == span.marker) {\n                            continue spans;\n                        }\n                    }\n                    oldCur.push(span);\n                }\n            } else if (stretchCur) {\n                old[i] = stretchCur;\n            }\n        }\n        return old;\n    }\n\n    // Used both to provide a JSON-safe object in .getHistory, and, when\n    // detaching a document, to split the history in two\n    function copyHistoryArray(events, newGroup, instantiateSel) {\n        var copy = [];\n        for (var i = 0; i < events.length; ++i) {\n            var event = events[i];\n            if (event.ranges) {\n                copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n                continue;\n            }\n            var changes = event.changes,\n                newChanges = [];\n            copy.push({ changes: newChanges });\n            for (var j = 0; j < changes.length; ++j) {\n                var change = changes[j],\n                    m = void 0;\n                newChanges.push({ from: change.from, to: change.to, text: change.text });\n                if (newGroup) {\n                    for (var prop in change) {\n                        if (m = prop.match(/^spans_(\\d+)$/)) {\n                            if (indexOf(newGroup, Number(m[1])) > -1) {\n                                lst(newChanges)[prop] = change[prop];\n                                delete change[prop];\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return copy;\n    }\n\n    // The 'scroll' parameter given to many of these indicated whether\n    // the new cursor position should be scrolled into view after\n    // modifying the selection.\n\n    // If shift is held or the extend flag is set, extends a range to\n    // include a given position (and optionally a second position).\n    // Otherwise, simply returns the range between the given positions.\n    // Used for cursor motion and such.\n    function extendRange(range, head, other, extend) {\n        if (extend) {\n            var anchor = range.anchor;\n            if (other) {\n                var posBefore = cmp(head, anchor) < 0;\n                if (posBefore != cmp(other, anchor) < 0) {\n                    anchor = head;\n                    head = other;\n                } else if (posBefore != cmp(head, other) < 0) {\n                    head = other;\n                }\n            }\n            return new Range(anchor, head);\n        } else {\n            return new Range(other || head, head);\n        }\n    }\n\n    // Extend the primary selection range, discard the rest.\n    function extendSelection(doc, head, other, options, extend) {\n        if (extend == null) {\n            extend = doc.cm && (doc.cm.display.shift || doc.extend);\n        }\n        setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n    }\n\n    // Extend all selections (pos is an array of selections with length\n    // equal the number of selections)\n    function extendSelections(doc, heads, options) {\n        var out = [];\n        var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n        for (var i = 0; i < doc.sel.ranges.length; i++) {\n            out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n        }\n        var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n        setSelection(doc, newSel, options);\n    }\n\n    // Updates a single range in the selection.\n    function replaceOneSelection(doc, i, range, options) {\n        var ranges = doc.sel.ranges.slice(0);\n        ranges[i] = range;\n        setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n    }\n\n    // Reset the selection to a single range.\n    function setSimpleSelection(doc, anchor, head, options) {\n        setSelection(doc, simpleSelection(anchor, head), options);\n    }\n\n    // Give beforeSelectionChange handlers a change to influence a\n    // selection update.\n    function filterSelectionChange(doc, sel, options) {\n        var obj = {\n            ranges: sel.ranges,\n            update: function update(ranges) {\n                this.ranges = [];\n                for (var i = 0; i < ranges.length; i++) {\n                    this.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n                }\n            },\n            origin: options && options.origin\n        };\n        signal(doc, \"beforeSelectionChange\", doc, obj);\n        if (doc.cm) {\n            signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n        }\n        if (obj.ranges != sel.ranges) {\n            return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);\n        } else {\n            return sel;\n        }\n    }\n\n    function setSelectionReplaceHistory(doc, sel, options) {\n        var done = doc.history.done,\n            last = lst(done);\n        if (last && last.ranges) {\n            done[done.length - 1] = sel;\n            setSelectionNoUndo(doc, sel, options);\n        } else {\n            setSelection(doc, sel, options);\n        }\n    }\n\n    // Set a new selection.\n    function setSelection(doc, sel, options) {\n        setSelectionNoUndo(doc, sel, options);\n        addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n    }\n\n    function setSelectionNoUndo(doc, sel, options) {\n        if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n            sel = filterSelectionChange(doc, sel, options);\n        }\n\n        var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n        setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n        if (!(options && options.scroll === false) && doc.cm) {\n            ensureCursorVisible(doc.cm);\n        }\n    }\n\n    function setSelectionInner(doc, sel) {\n        if (sel.equals(doc.sel)) {\n            return;\n        }\n\n        doc.sel = sel;\n\n        if (doc.cm) {\n            doc.cm.curOp.updateInput = 1;\n            doc.cm.curOp.selectionChanged = true;\n            signalCursorActivity(doc.cm);\n        }\n        signalLater(doc, \"cursorActivity\", doc);\n    }\n\n    // Verify that the selection does not partially select any atomic\n    // marked ranges.\n    function reCheckSelection(doc) {\n        setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n    }\n\n    // Return a selection that does not partially select any atomic\n    // ranges.\n    function skipAtomicInSelection(doc, sel, bias, mayClear) {\n        var out;\n        for (var i = 0; i < sel.ranges.length; i++) {\n            var range = sel.ranges[i];\n            var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n            var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n            var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n            if (out || newAnchor != range.anchor || newHead != range.head) {\n                if (!out) {\n                    out = sel.ranges.slice(0, i);\n                }\n                out[i] = new Range(newAnchor, newHead);\n            }\n        }\n        return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;\n    }\n\n    function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n        var line = getLine(doc, pos.line);\n        if (line.markedSpans) {\n            for (var i = 0; i < line.markedSpans.length; ++i) {\n                var sp = line.markedSpans[i],\n                    m = sp.marker;\n\n                // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n                // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n                // is with selectLeft/Right\n                var preventCursorLeft = \"selectLeft\" in m ? !m.selectLeft : m.inclusiveLeft;\n                var preventCursorRight = \"selectRight\" in m ? !m.selectRight : m.inclusiveRight;\n\n                if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n                    if (mayClear) {\n                        signal(m, \"beforeCursorEnter\");\n                        if (m.explicitlyCleared) {\n                            if (!line.markedSpans) {\n                                break;\n                            } else {\n                                --i;continue;\n                            }\n                        }\n                    }\n                    if (!m.atomic) {\n                        continue;\n                    }\n\n                    if (oldPos) {\n                        var near = m.find(dir < 0 ? 1 : -1),\n                            diff = void 0;\n                        if (dir < 0 ? preventCursorRight : preventCursorLeft) {\n                            near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n                        }\n                        if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n                            return skipAtomicInner(doc, near, pos, dir, mayClear);\n                        }\n                    }\n\n                    var far = m.find(dir < 0 ? -1 : 1);\n                    if (dir < 0 ? preventCursorLeft : preventCursorRight) {\n                        far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n                    }\n                    return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n                }\n            }\n        }\n        return pos;\n    }\n\n    // Ensure a given position is not inside an atomic range.\n    function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n        var dir = bias || 1;\n        var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n        if (!found) {\n            doc.cantEdit = true;\n            return Pos(doc.first, 0);\n        }\n        return found;\n    }\n\n    function movePos(doc, pos, dir, line) {\n        if (dir < 0 && pos.ch == 0) {\n            if (pos.line > doc.first) {\n                return _clipPos(doc, Pos(pos.line - 1));\n            } else {\n                return null;\n            }\n        } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n            if (pos.line < doc.first + doc.size - 1) {\n                return Pos(pos.line + 1, 0);\n            } else {\n                return null;\n            }\n        } else {\n            return new Pos(pos.line, pos.ch + dir);\n        }\n    }\n\n    function selectAll(cm) {\n        cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n    }\n\n    // UPDATING\n\n    // Allow \"beforeChange\" event handlers to influence a change\n    function filterChange(doc, change, update) {\n        var obj = {\n            canceled: false,\n            from: change.from,\n            to: change.to,\n            text: change.text,\n            origin: change.origin,\n            cancel: function cancel() {\n                return obj.canceled = true;\n            }\n        };\n        if (update) {\n            obj.update = function (from, to, text, origin) {\n                if (from) {\n                    obj.from = _clipPos(doc, from);\n                }\n                if (to) {\n                    obj.to = _clipPos(doc, to);\n                }\n                if (text) {\n                    obj.text = text;\n                }\n                if (origin !== undefined) {\n                    obj.origin = origin;\n                }\n            };\n        }\n        signal(doc, \"beforeChange\", doc, obj);\n        if (doc.cm) {\n            signal(doc.cm, \"beforeChange\", doc.cm, obj);\n        }\n\n        if (obj.canceled) {\n            if (doc.cm) {\n                doc.cm.curOp.updateInput = 2;\n            }\n            return null;\n        }\n        return { from: obj.from, to: obj.to, text: obj.text, origin: obj.origin };\n    }\n\n    // Apply a change to a document, and add it to the document's\n    // history, and propagating it to all linked documents.\n    function makeChange(doc, change, ignoreReadOnly) {\n        if (doc.cm) {\n            if (!doc.cm.curOp) {\n                return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n            }\n            if (doc.cm.state.suppressEdits) {\n                return;\n            }\n        }\n\n        if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n            change = filterChange(doc, change, true);\n            if (!change) {\n                return;\n            }\n        }\n\n        // Possibly split or suppress the update based on the presence\n        // of read-only spans in its range.\n        var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n        if (split) {\n            for (var i = split.length - 1; i >= 0; --i) {\n                makeChangeInner(doc, { from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin });\n            }\n        } else {\n            makeChangeInner(doc, change);\n        }\n    }\n\n    function makeChangeInner(doc, change) {\n        if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n            return;\n        }\n        var selAfter = computeSelAfterChange(doc, change);\n        addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n        makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n        var rebased = [];\n\n        linkedDocs(doc, function (doc, sharedHist) {\n            if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n                rebaseHist(doc.history, change);\n                rebased.push(doc.history);\n            }\n            makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n        });\n    }\n\n    // Revert a change stored in a document's history.\n    function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n        var suppress = doc.cm && doc.cm.state.suppressEdits;\n        if (suppress && !allowSelectionOnly) {\n            return;\n        }\n\n        var hist = doc.history,\n            event,\n            selAfter = doc.sel;\n        var source = type == \"undo\" ? hist.done : hist.undone,\n            dest = type == \"undo\" ? hist.undone : hist.done;\n\n        // Verify that there is a useable event (so that ctrl-z won't\n        // needlessly clear selection events)\n        var i = 0;\n        for (; i < source.length; i++) {\n            event = source[i];\n            if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n                break;\n            }\n        }\n        if (i == source.length) {\n            return;\n        }\n        hist.lastOrigin = hist.lastSelOrigin = null;\n\n        for (;;) {\n            event = source.pop();\n            if (event.ranges) {\n                pushSelectionToHistory(event, dest);\n                if (allowSelectionOnly && !event.equals(doc.sel)) {\n                    setSelection(doc, event, { clearRedo: false });\n                    return;\n                }\n                selAfter = event;\n            } else if (suppress) {\n                source.push(event);\n                return;\n            } else {\n                break;\n            }\n        }\n\n        // Build up a reverse change object to add to the opposite history\n        // stack (redo when undoing, and vice versa).\n        var antiChanges = [];\n        pushSelectionToHistory(selAfter, dest);\n        dest.push({ changes: antiChanges, generation: hist.generation });\n        hist.generation = event.generation || ++hist.maxGeneration;\n\n        var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n        var loop = function loop(i) {\n            var change = event.changes[i];\n            change.origin = type;\n            if (filter && !filterChange(doc, change, false)) {\n                source.length = 0;\n                return {};\n            }\n\n            antiChanges.push(historyChangeFromChange(doc, change));\n\n            var after = i ? computeSelAfterChange(doc, change) : lst(source);\n            makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n            if (!i && doc.cm) {\n                doc.cm.scrollIntoView({ from: change.from, to: changeEnd(change) });\n            }\n            var rebased = [];\n\n            // Propagate to the linked documents\n            linkedDocs(doc, function (doc, sharedHist) {\n                if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n                    rebaseHist(doc.history, change);\n                    rebased.push(doc.history);\n                }\n                makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n            });\n        };\n\n        for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n            var returned = loop(i$1);\n\n            if (returned) return returned.v;\n        }\n    }\n\n    // Sub-views need their line numbers shifted when text is added\n    // above or below them in the parent document.\n    function shiftDoc(doc, distance) {\n        if (distance == 0) {\n            return;\n        }\n        doc.first += distance;\n        doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n            return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n        }), doc.sel.primIndex);\n        if (doc.cm) {\n            regChange(doc.cm, doc.first, doc.first - distance, distance);\n            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n                regLineChange(doc.cm, l, \"gutter\");\n            }\n        }\n    }\n\n    // More lower-level change function, handling only a single document\n    // (not linked ones).\n    function makeChangeSingleDoc(doc, change, selAfter, spans) {\n        if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n        }\n\n        if (change.to.line < doc.first) {\n            shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n            return;\n        }\n        if (change.from.line > doc.lastLine()) {\n            return;\n        }\n\n        // Clip the change to the size of this doc\n        if (change.from.line < doc.first) {\n            var shift = change.text.length - 1 - (doc.first - change.from.line);\n            shiftDoc(doc, shift);\n            change = { from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin };\n        }\n        var last = doc.lastLine();\n        if (change.to.line > last) {\n            change = { from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin };\n        }\n\n        change.removed = getBetween(doc, change.from, change.to);\n\n        if (!selAfter) {\n            selAfter = computeSelAfterChange(doc, change);\n        }\n        if (doc.cm) {\n            makeChangeSingleDocInEditor(doc.cm, change, spans);\n        } else {\n            updateDoc(doc, change, spans);\n        }\n        setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n        if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {\n            doc.cantEdit = false;\n        }\n    }\n\n    // Handle the interaction of a change to a document with the editor\n    // that this document is part of.\n    function makeChangeSingleDocInEditor(cm, change, spans) {\n        var doc = cm.doc,\n            display = cm.display,\n            from = change.from,\n            to = change.to;\n\n        var recomputeMaxLength = false,\n            checkWidthStart = from.line;\n        if (!cm.options.lineWrapping) {\n            checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n            doc.iter(checkWidthStart, to.line + 1, function (line) {\n                if (line == display.maxLine) {\n                    recomputeMaxLength = true;\n                    return true;\n                }\n            });\n        }\n\n        if (doc.sel.contains(change.from, change.to) > -1) {\n            signalCursorActivity(cm);\n        }\n\n        updateDoc(doc, change, spans, estimateHeight(cm));\n\n        if (!cm.options.lineWrapping) {\n            doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n                var len = lineLength(line);\n                if (len > display.maxLineLength) {\n                    display.maxLine = line;\n                    display.maxLineLength = len;\n                    display.maxLineChanged = true;\n                    recomputeMaxLength = false;\n                }\n            });\n            if (recomputeMaxLength) {\n                cm.curOp.updateMaxLine = true;\n            }\n        }\n\n        retreatFrontier(doc, from.line);\n        startWorker(cm, 400);\n\n        var lendiff = change.text.length - (to.line - from.line) - 1;\n        // Remember that these lines changed, for updating the display\n        if (change.full) {\n            regChange(cm);\n        } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n            regLineChange(cm, from.line, \"text\");\n        } else {\n            regChange(cm, from.line, to.line + 1, lendiff);\n        }\n\n        var changesHandler = hasHandler(cm, \"changes\"),\n            changeHandler = hasHandler(cm, \"change\");\n        if (changeHandler || changesHandler) {\n            var obj = {\n                from: from, to: to,\n                text: change.text,\n                removed: change.removed,\n                origin: change.origin\n            };\n            if (changeHandler) {\n                signalLater(cm, \"change\", cm, obj);\n            }\n            if (changesHandler) {\n                (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n            }\n        }\n        cm.display.selForContextMenu = null;\n    }\n\n    function _replaceRange(doc, code, from, to, origin) {\n        var assign;\n\n        if (!to) {\n            to = from;\n        }\n        if (cmp(to, from) < 0) {\n            assign = [to, from], from = assign[0], to = assign[1];\n        }\n        if (typeof code == \"string\") {\n            code = doc.splitLines(code);\n        }\n        makeChange(doc, { from: from, to: to, text: code, origin: origin });\n    }\n\n    // Rebasing/resetting history to deal with externally-sourced changes\n\n    function rebaseHistSelSingle(pos, from, to, diff) {\n        if (to < pos.line) {\n            pos.line += diff;\n        } else if (from < pos.line) {\n            pos.line = from;\n            pos.ch = 0;\n        }\n    }\n\n    // Tries to rebase an array of history events given a change in the\n    // document. If the change touches the same lines as the event, the\n    // event, and everything 'behind' it, is discarded. If the change is\n    // before the event, the event's positions are updated. Uses a\n    // copy-on-write scheme for the positions, to avoid having to\n    // reallocate them all on every rebase, but also avoid problems with\n    // shared position objects being unsafely updated.\n    function rebaseHistArray(array, from, to, diff) {\n        for (var i = 0; i < array.length; ++i) {\n            var sub = array[i],\n                ok = true;\n            if (sub.ranges) {\n                if (!sub.copied) {\n                    sub = array[i] = sub.deepCopy();sub.copied = true;\n                }\n                for (var j = 0; j < sub.ranges.length; j++) {\n                    rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n                    rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n                }\n                continue;\n            }\n            for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n                var cur = sub.changes[j$1];\n                if (to < cur.from.line) {\n                    cur.from = Pos(cur.from.line + diff, cur.from.ch);\n                    cur.to = Pos(cur.to.line + diff, cur.to.ch);\n                } else if (from <= cur.to.line) {\n                    ok = false;\n                    break;\n                }\n            }\n            if (!ok) {\n                array.splice(0, i + 1);\n                i = 0;\n            }\n        }\n    }\n\n    function rebaseHist(hist, change) {\n        var from = change.from.line,\n            to = change.to.line,\n            diff = change.text.length - (to - from) - 1;\n        rebaseHistArray(hist.done, from, to, diff);\n        rebaseHistArray(hist.undone, from, to, diff);\n    }\n\n    // Utility for applying a change to a line by handle or number,\n    // returning the number and optionally registering the line as\n    // changed.\n    function changeLine(doc, handle, changeType, op) {\n        var no = handle,\n            line = handle;\n        if (typeof handle == \"number\") {\n            line = getLine(doc, clipLine(doc, handle));\n        } else {\n            no = lineNo(handle);\n        }\n        if (no == null) {\n            return null;\n        }\n        if (op(line, no) && doc.cm) {\n            regLineChange(doc.cm, no, changeType);\n        }\n        return line;\n    }\n\n    // The document is represented as a BTree consisting of leaves, with\n    // chunk of lines in them, and branches, with up to ten leaves or\n    // other branch nodes below them. The top node is always a branch\n    // node, and is the document object itself (meaning it has\n    // additional methods and properties).\n    //\n    // All nodes have parent links. The tree is used both to go from\n    // line numbers to line objects, and to go from objects to numbers.\n    // It also indexes by height, and is used to convert between height\n    // and line object, and to find the total height of the document.\n    //\n    // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n    function LeafChunk(lines) {\n        this.lines = lines;\n        this.parent = null;\n        var height = 0;\n        for (var i = 0; i < lines.length; ++i) {\n            lines[i].parent = this;\n            height += lines[i].height;\n        }\n        this.height = height;\n    }\n\n    LeafChunk.prototype = {\n        chunkSize: function chunkSize() {\n            return this.lines.length;\n        },\n\n        // Remove the n lines at offset 'at'.\n        removeInner: function removeInner(at, n) {\n            for (var i = at, e = at + n; i < e; ++i) {\n                var line = this.lines[i];\n                this.height -= line.height;\n                cleanUpLine(line);\n                signalLater(line, \"delete\");\n            }\n            this.lines.splice(at, n);\n        },\n\n        // Helper used to collapse a small branch into a single leaf.\n        collapse: function collapse(lines) {\n            lines.push.apply(lines, this.lines);\n        },\n\n        // Insert the given array of lines at offset 'at', count them as\n        // having the given height.\n        insertInner: function insertInner(at, lines, height) {\n            this.height += height;\n            this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n            for (var i = 0; i < lines.length; ++i) {\n                lines[i].parent = this;\n            }\n        },\n\n        // Used to iterate over a part of the tree.\n        iterN: function iterN(at, n, op) {\n            for (var e = at + n; at < e; ++at) {\n                if (op(this.lines[at])) {\n                    return true;\n                }\n            }\n        }\n    };\n\n    function BranchChunk(children) {\n        this.children = children;\n        var size = 0,\n            height = 0;\n        for (var i = 0; i < children.length; ++i) {\n            var ch = children[i];\n            size += ch.chunkSize();height += ch.height;\n            ch.parent = this;\n        }\n        this.size = size;\n        this.height = height;\n        this.parent = null;\n    }\n\n    BranchChunk.prototype = {\n        chunkSize: function chunkSize() {\n            return this.size;\n        },\n\n        removeInner: function removeInner(at, n) {\n            this.size -= n;\n            for (var i = 0; i < this.children.length; ++i) {\n                var child = this.children[i],\n                    sz = child.chunkSize();\n                if (at < sz) {\n                    var rm = Math.min(n, sz - at),\n                        oldHeight = child.height;\n                    child.removeInner(at, rm);\n                    this.height -= oldHeight - child.height;\n                    if (sz == rm) {\n                        this.children.splice(i--, 1);child.parent = null;\n                    }\n                    if ((n -= rm) == 0) {\n                        break;\n                    }\n                    at = 0;\n                } else {\n                    at -= sz;\n                }\n            }\n            // If the result is smaller than 25 lines, ensure that it is a\n            // single leaf node.\n            if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n                var lines = [];\n                this.collapse(lines);\n                this.children = [new LeafChunk(lines)];\n                this.children[0].parent = this;\n            }\n        },\n\n        collapse: function collapse(lines) {\n            for (var i = 0; i < this.children.length; ++i) {\n                this.children[i].collapse(lines);\n            }\n        },\n\n        insertInner: function insertInner(at, lines, height) {\n            this.size += lines.length;\n            this.height += height;\n            for (var i = 0; i < this.children.length; ++i) {\n                var child = this.children[i],\n                    sz = child.chunkSize();\n                if (at <= sz) {\n                    child.insertInner(at, lines, height);\n                    if (child.lines && child.lines.length > 50) {\n                        // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n                        // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n                        var remaining = child.lines.length % 25 + 25;\n                        for (var pos = remaining; pos < child.lines.length;) {\n                            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n                            child.height -= leaf.height;\n                            this.children.splice(++i, 0, leaf);\n                            leaf.parent = this;\n                        }\n                        child.lines = child.lines.slice(0, remaining);\n                        this.maybeSpill();\n                    }\n                    break;\n                }\n                at -= sz;\n            }\n        },\n\n        // When a node has grown, check whether it should be split.\n        maybeSpill: function maybeSpill() {\n            if (this.children.length <= 10) {\n                return;\n            }\n            var me = this;\n            do {\n                var spilled = me.children.splice(me.children.length - 5, 5);\n                var sibling = new BranchChunk(spilled);\n                if (!me.parent) {\n                    // Become the parent node\n                    var copy = new BranchChunk(me.children);\n                    copy.parent = me;\n                    me.children = [copy, sibling];\n                    me = copy;\n                } else {\n                    me.size -= sibling.size;\n                    me.height -= sibling.height;\n                    var myIndex = indexOf(me.parent.children, me);\n                    me.parent.children.splice(myIndex + 1, 0, sibling);\n                }\n                sibling.parent = me.parent;\n            } while (me.children.length > 10);\n            me.parent.maybeSpill();\n        },\n\n        iterN: function iterN(at, n, op) {\n            for (var i = 0; i < this.children.length; ++i) {\n                var child = this.children[i],\n                    sz = child.chunkSize();\n                if (at < sz) {\n                    var used = Math.min(n, sz - at);\n                    if (child.iterN(at, used, op)) {\n                        return true;\n                    }\n                    if ((n -= used) == 0) {\n                        break;\n                    }\n                    at = 0;\n                } else {\n                    at -= sz;\n                }\n            }\n        }\n    };\n\n    // Line widgets are block elements displayed above or below a line.\n\n    var LineWidget = function LineWidget(doc, node, options) {\n        if (options) {\n            for (var opt in options) {\n                if (options.hasOwnProperty(opt)) {\n                    this[opt] = options[opt];\n                }\n            }\n        }\n        this.doc = doc;\n        this.node = node;\n    };\n\n    LineWidget.prototype.clear = function () {\n        var cm = this.doc.cm,\n            ws = this.line.widgets,\n            line = this.line,\n            no = lineNo(line);\n        if (no == null || !ws) {\n            return;\n        }\n        for (var i = 0; i < ws.length; ++i) {\n            if (ws[i] == this) {\n                ws.splice(i--, 1);\n            }\n        }\n        if (!ws.length) {\n            line.widgets = null;\n        }\n        var height = widgetHeight(this);\n        updateLineHeight(line, Math.max(0, line.height - height));\n        if (cm) {\n            runInOp(cm, function () {\n                adjustScrollWhenAboveVisible(cm, line, -height);\n                regLineChange(cm, no, \"widget\");\n            });\n            signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n        }\n    };\n\n    LineWidget.prototype.changed = function () {\n        var this$1 = this;\n\n        var oldH = this.height,\n            cm = this.doc.cm,\n            line = this.line;\n        this.height = null;\n        var diff = widgetHeight(this) - oldH;\n        if (!diff) {\n            return;\n        }\n        if (!lineIsHidden(this.doc, line)) {\n            updateLineHeight(line, line.height + diff);\n        }\n        if (cm) {\n            runInOp(cm, function () {\n                cm.curOp.forceUpdate = true;\n                adjustScrollWhenAboveVisible(cm, line, diff);\n                signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n            });\n        }\n    };\n    eventMixin(LineWidget);\n\n    function adjustScrollWhenAboveVisible(cm, line, diff) {\n        if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n            addToScrollTop(cm, diff);\n        }\n    }\n\n    function addLineWidget(doc, handle, node, options) {\n        var widget = new LineWidget(doc, node, options);\n        var cm = doc.cm;\n        if (cm && widget.noHScroll) {\n            cm.display.alignWidgets = true;\n        }\n        changeLine(doc, handle, \"widget\", function (line) {\n            var widgets = line.widgets || (line.widgets = []);\n            if (widget.insertAt == null) {\n                widgets.push(widget);\n            } else {\n                widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n            }\n            widget.line = line;\n            if (cm && !lineIsHidden(doc, line)) {\n                var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n                updateLineHeight(line, line.height + widgetHeight(widget));\n                if (aboveVisible) {\n                    addToScrollTop(cm, widget.height);\n                }\n                cm.curOp.forceUpdate = true;\n            }\n            return true;\n        });\n        if (cm) {\n            signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n        }\n        return widget;\n    }\n\n    // TEXTMARKERS\n\n    // Created with markText and setBookmark methods. A TextMarker is a\n    // handle that can be used to clear or find a marked position in the\n    // document. Line objects hold arrays (markedSpans) containing\n    // {from, to, marker} object pointing to such marker objects, and\n    // indicating that such a marker is present on that line. Multiple\n    // lines may point to the same marker when it spans across lines.\n    // The spans will have null for their from/to properties when the\n    // marker continues beyond the start/end of the line. Markers have\n    // links back to the lines they currently touch.\n\n    // Collapsed markers have unique ids, in order to be able to order\n    // them, which is needed for uniquely determining an outer marker\n    // when they overlap (they may nest, but not partially overlap).\n    var nextMarkerId = 0;\n\n    var TextMarker = function TextMarker(doc, type) {\n        this.lines = [];\n        this.type = type;\n        this.doc = doc;\n        this.id = ++nextMarkerId;\n    };\n\n    // Clear the marker.\n    TextMarker.prototype.clear = function () {\n        if (this.explicitlyCleared) {\n            return;\n        }\n        var cm = this.doc.cm,\n            withOp = cm && !cm.curOp;\n        if (withOp) {\n            _startOperation(cm);\n        }\n        if (hasHandler(this, \"clear\")) {\n            var found = this.find();\n            if (found) {\n                signalLater(this, \"clear\", found.from, found.to);\n            }\n        }\n        var min = null,\n            max = null;\n        for (var i = 0; i < this.lines.length; ++i) {\n            var line = this.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this);\n            if (cm && !this.collapsed) {\n                regLineChange(cm, lineNo(line), \"text\");\n            } else if (cm) {\n                if (span.to != null) {\n                    max = lineNo(line);\n                }\n                if (span.from != null) {\n                    min = lineNo(line);\n                }\n            }\n            line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n            if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {\n                updateLineHeight(line, textHeight(cm.display));\n            }\n        }\n        if (cm && this.collapsed && !cm.options.lineWrapping) {\n            for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n                var visual = visualLine(this.lines[i$1]),\n                    len = lineLength(visual);\n                if (len > cm.display.maxLineLength) {\n                    cm.display.maxLine = visual;\n                    cm.display.maxLineLength = len;\n                    cm.display.maxLineChanged = true;\n                }\n            }\n        }\n\n        if (min != null && cm && this.collapsed) {\n            regChange(cm, min, max + 1);\n        }\n        this.lines.length = 0;\n        this.explicitlyCleared = true;\n        if (this.atomic && this.doc.cantEdit) {\n            this.doc.cantEdit = false;\n            if (cm) {\n                reCheckSelection(cm.doc);\n            }\n        }\n        if (cm) {\n            signalLater(cm, \"markerCleared\", cm, this, min, max);\n        }\n        if (withOp) {\n            _endOperation(cm);\n        }\n        if (this.parent) {\n            this.parent.clear();\n        }\n    };\n\n    // Find the position of the marker in the document. Returns a {from,\n    // to} object by default. Side can be passed to get a specific side\n    // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n    // Pos objects returned contain a line object, rather than a line\n    // number (used to prevent looking up the same line twice).\n    TextMarker.prototype.find = function (side, lineObj) {\n        if (side == null && this.type == \"bookmark\") {\n            side = 1;\n        }\n        var from, to;\n        for (var i = 0; i < this.lines.length; ++i) {\n            var line = this.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this);\n            if (span.from != null) {\n                from = Pos(lineObj ? line : lineNo(line), span.from);\n                if (side == -1) {\n                    return from;\n                }\n            }\n            if (span.to != null) {\n                to = Pos(lineObj ? line : lineNo(line), span.to);\n                if (side == 1) {\n                    return to;\n                }\n            }\n        }\n        return from && { from: from, to: to };\n    };\n\n    // Signals that the marker's widget changed, and surrounding layout\n    // should be recomputed.\n    TextMarker.prototype.changed = function () {\n        var this$1 = this;\n\n        var pos = this.find(-1, true),\n            widget = this,\n            cm = this.doc.cm;\n        if (!pos || !cm) {\n            return;\n        }\n        runInOp(cm, function () {\n            var line = pos.line,\n                lineN = lineNo(pos.line);\n            var view = findViewForLine(cm, lineN);\n            if (view) {\n                clearLineMeasurementCacheFor(view);\n                cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n            }\n            cm.curOp.updateMaxLine = true;\n            if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n                var oldHeight = widget.height;\n                widget.height = null;\n                var dHeight = widgetHeight(widget) - oldHeight;\n                if (dHeight) {\n                    updateLineHeight(line, line.height + dHeight);\n                }\n            }\n            signalLater(cm, \"markerChanged\", cm, this$1);\n        });\n    };\n\n    TextMarker.prototype.attachLine = function (line) {\n        if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;\n            if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n                (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n            }\n        }\n        this.lines.push(line);\n    };\n\n    TextMarker.prototype.detachLine = function (line) {\n        this.lines.splice(indexOf(this.lines, line), 1);\n        if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n        }\n    };\n    eventMixin(TextMarker);\n\n    // Create a marker, wire it up to the right lines, and\n    function _markText(doc, from, to, options, type) {\n        // Shared markers (across linked documents) are handled separately\n        // (markTextShared will call out to this again, once per\n        // document).\n        if (options && options.shared) {\n            return markTextShared(doc, from, to, options, type);\n        }\n        // Ensure we are in an operation.\n        if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, _markText)(doc, from, to, options, type);\n        }\n\n        var marker = new TextMarker(doc, type),\n            diff = cmp(from, to);\n        if (options) {\n            copyObj(options, marker, false);\n        }\n        // Don't connect empty markers unless clearWhenEmpty is false\n        if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n            return marker;\n        }\n        if (marker.replacedWith) {\n            // Showing up as a widget implies collapsed (widget replaces text)\n            marker.collapsed = true;\n            marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n            if (!options.handleMouseEvents) {\n                marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            if (options.insertLeft) {\n                marker.widgetNode.insertLeft = true;\n            }\n        }\n        if (marker.collapsed) {\n            if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n                throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n            }\n            seeCollapsedSpans();\n        }\n\n        if (marker.addToHistory) {\n            addChangeToHistory(doc, { from: from, to: to, origin: \"markText\" }, doc.sel, NaN);\n        }\n\n        var curLine = from.line,\n            cm = doc.cm,\n            updateMaxLine;\n        doc.iter(curLine, to.line + 1, function (line) {\n            if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n                updateMaxLine = true;\n            }\n            if (marker.collapsed && curLine != from.line) {\n                updateLineHeight(line, 0);\n            }\n            addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n            ++curLine;\n        });\n        // lineIsHidden depends on the presence of the spans, so needs a second pass\n        if (marker.collapsed) {\n            doc.iter(from.line, to.line + 1, function (line) {\n                if (lineIsHidden(doc, line)) {\n                    updateLineHeight(line, 0);\n                }\n            });\n        }\n\n        if (marker.clearOnEnter) {\n            on(marker, \"beforeCursorEnter\", function () {\n                return marker.clear();\n            });\n        }\n\n        if (marker.readOnly) {\n            seeReadOnlySpans();\n            if (doc.history.done.length || doc.history.undone.length) {\n                doc.clearHistory();\n            }\n        }\n        if (marker.collapsed) {\n            marker.id = ++nextMarkerId;\n            marker.atomic = true;\n        }\n        if (cm) {\n            // Sync editor state\n            if (updateMaxLine) {\n                cm.curOp.updateMaxLine = true;\n            }\n            if (marker.collapsed) {\n                regChange(cm, from.line, to.line + 1);\n            } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {\n                for (var i = from.line; i <= to.line; i++) {\n                    regLineChange(cm, i, \"text\");\n                }\n            }\n            if (marker.atomic) {\n                reCheckSelection(cm.doc);\n            }\n            signalLater(cm, \"markerAdded\", cm, marker);\n        }\n        return marker;\n    }\n\n    // SHARED TEXTMARKERS\n\n    // A shared marker spans multiple linked documents. It is\n    // implemented as a meta-marker-object controlling multiple normal\n    // markers.\n    var SharedTextMarker = function SharedTextMarker(markers, primary) {\n        this.markers = markers;\n        this.primary = primary;\n        for (var i = 0; i < markers.length; ++i) {\n            markers[i].parent = this;\n        }\n    };\n\n    SharedTextMarker.prototype.clear = function () {\n        if (this.explicitlyCleared) {\n            return;\n        }\n        this.explicitlyCleared = true;\n        for (var i = 0; i < this.markers.length; ++i) {\n            this.markers[i].clear();\n        }\n        signalLater(this, \"clear\");\n    };\n\n    SharedTextMarker.prototype.find = function (side, lineObj) {\n        return this.primary.find(side, lineObj);\n    };\n    eventMixin(SharedTextMarker);\n\n    function markTextShared(doc, from, to, options, type) {\n        options = copyObj(options);\n        options.shared = false;\n        var markers = [_markText(doc, from, to, options, type)],\n            primary = markers[0];\n        var widget = options.widgetNode;\n        linkedDocs(doc, function (doc) {\n            if (widget) {\n                options.widgetNode = widget.cloneNode(true);\n            }\n            markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n            for (var i = 0; i < doc.linked.length; ++i) {\n                if (doc.linked[i].isParent) {\n                    return;\n                }\n            }\n            primary = lst(markers);\n        });\n        return new SharedTextMarker(markers, primary);\n    }\n\n    function findSharedMarkers(doc) {\n        return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n            return m.parent;\n        });\n    }\n\n    function copySharedMarkers(doc, markers) {\n        for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i],\n                pos = marker.find();\n            var mFrom = doc.clipPos(pos.from),\n                mTo = doc.clipPos(pos.to);\n            if (cmp(mFrom, mTo)) {\n                var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n                marker.markers.push(subMark);\n                subMark.parent = marker;\n            }\n        }\n    }\n\n    function detachSharedMarkers(markers) {\n        var loop = function loop(i) {\n            var marker = markers[i],\n                linked = [marker.primary.doc];\n            linkedDocs(marker.primary.doc, function (d) {\n                return linked.push(d);\n            });\n            for (var j = 0; j < marker.markers.length; j++) {\n                var subMarker = marker.markers[j];\n                if (indexOf(linked, subMarker.doc) == -1) {\n                    subMarker.parent = null;\n                    marker.markers.splice(j--, 1);\n                }\n            }\n        };\n\n        for (var i = 0; i < markers.length; i++) {\n            loop(i);\n        }\n    }\n\n    var nextDocId = 0;\n    var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n        if (!(this instanceof Doc)) {\n            return new Doc(text, mode, firstLine, lineSep, direction);\n        }\n        if (firstLine == null) {\n            firstLine = 0;\n        }\n\n        BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n        this.first = firstLine;\n        this.scrollTop = this.scrollLeft = 0;\n        this.cantEdit = false;\n        this.cleanGeneration = 1;\n        this.modeFrontier = this.highlightFrontier = firstLine;\n        var start = Pos(firstLine, 0);\n        this.sel = simpleSelection(start);\n        this.history = new History(null);\n        this.id = ++nextDocId;\n        this.modeOption = mode;\n        this.lineSep = lineSep;\n        this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n        this.extend = false;\n\n        if (typeof text == \"string\") {\n            text = this.splitLines(text);\n        }\n        updateDoc(this, { from: start, to: start, text: text });\n        setSelection(this, simpleSelection(start), sel_dontScroll);\n    };\n\n    Doc.prototype = createObj(BranchChunk.prototype, {\n        constructor: Doc,\n        // Iterate over the document. Supports two forms -- with only one\n        // argument, it calls that for each line in the document. With\n        // three, it iterates over the range given by the first two (with\n        // the second being non-inclusive).\n        iter: function iter(from, to, op) {\n            if (op) {\n                this.iterN(from - this.first, to - from, op);\n            } else {\n                this.iterN(this.first, this.first + this.size, from);\n            }\n        },\n\n        // Non-public interface for adding and removing lines.\n        insert: function insert(at, lines) {\n            var height = 0;\n            for (var i = 0; i < lines.length; ++i) {\n                height += lines[i].height;\n            }\n            this.insertInner(at - this.first, lines, height);\n        },\n        remove: function remove(at, n) {\n            this.removeInner(at - this.first, n);\n        },\n\n        // From here, the methods are part of the public interface. Most\n        // are also available from CodeMirror (editor) instances.\n\n        getValue: function getValue(lineSep) {\n            var lines = getLines(this, this.first, this.first + this.size);\n            if (lineSep === false) {\n                return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n        },\n        setValue: docMethodOp(function (code) {\n            var top = Pos(this.first, 0),\n                last = this.first + this.size - 1;\n            makeChange(this, { from: top, to: Pos(last, getLine(this, last).text.length),\n                text: this.splitLines(code), origin: \"setValue\", full: true }, true);\n            if (this.cm) {\n                scrollToCoords(this.cm, 0, 0);\n            }\n            setSelection(this, simpleSelection(top), sel_dontScroll);\n        }),\n        replaceRange: function replaceRange(code, from, to, origin) {\n            from = _clipPos(this, from);\n            to = to ? _clipPos(this, to) : from;\n            _replaceRange(this, code, from, to, origin);\n        },\n        getRange: function getRange(from, to, lineSep) {\n            var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n            if (lineSep === false) {\n                return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n        },\n\n        getLine: function getLine(line) {\n            var l = this.getLineHandle(line);return l && l.text;\n        },\n\n        getLineHandle: function getLineHandle(line) {\n            if (isLine(this, line)) {\n                return getLine(this, line);\n            }\n        },\n        getLineNumber: function getLineNumber(line) {\n            return lineNo(line);\n        },\n\n        getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n            if (typeof line == \"number\") {\n                line = getLine(this, line);\n            }\n            return visualLine(line);\n        },\n\n        lineCount: function lineCount() {\n            return this.size;\n        },\n        firstLine: function firstLine() {\n            return this.first;\n        },\n        lastLine: function lastLine() {\n            return this.first + this.size - 1;\n        },\n\n        clipPos: function clipPos(pos) {\n            return _clipPos(this, pos);\n        },\n\n        getCursor: function getCursor(start) {\n            var range = this.sel.primary(),\n                pos;\n            if (start == null || start == \"head\") {\n                pos = range.head;\n            } else if (start == \"anchor\") {\n                pos = range.anchor;\n            } else if (start == \"end\" || start == \"to\" || start === false) {\n                pos = range.to();\n            } else {\n                pos = range.from();\n            }\n            return pos;\n        },\n        listSelections: function listSelections() {\n            return this.sel.ranges;\n        },\n        somethingSelected: function somethingSelected() {\n            return this.sel.somethingSelected();\n        },\n\n        setCursor: docMethodOp(function (line, ch, options) {\n            setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n        }),\n        setSelection: docMethodOp(function (anchor, head, options) {\n            setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n        }),\n        extendSelection: docMethodOp(function (head, other, options) {\n            extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n        }),\n        extendSelections: docMethodOp(function (heads, options) {\n            extendSelections(this, clipPosArray(this, heads), options);\n        }),\n        extendSelectionsBy: docMethodOp(function (f, options) {\n            var heads = map(this.sel.ranges, f);\n            extendSelections(this, clipPosArray(this, heads), options);\n        }),\n        setSelections: docMethodOp(function (ranges, primary, options) {\n            if (!ranges.length) {\n                return;\n            }\n            var out = [];\n            for (var i = 0; i < ranges.length; i++) {\n                out[i] = new Range(_clipPos(this, ranges[i].anchor), _clipPos(this, ranges[i].head));\n            }\n            if (primary == null) {\n                primary = Math.min(ranges.length - 1, this.sel.primIndex);\n            }\n            setSelection(this, normalizeSelection(this.cm, out, primary), options);\n        }),\n        addSelection: docMethodOp(function (anchor, head, options) {\n            var ranges = this.sel.ranges.slice(0);\n            ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n            setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n        }),\n\n        getSelection: function getSelection(lineSep) {\n            var ranges = this.sel.ranges,\n                lines;\n            for (var i = 0; i < ranges.length; i++) {\n                var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n                lines = lines ? lines.concat(sel) : sel;\n            }\n            if (lineSep === false) {\n                return lines;\n            } else {\n                return lines.join(lineSep || this.lineSeparator());\n            }\n        },\n        getSelections: function getSelections(lineSep) {\n            var parts = [],\n                ranges = this.sel.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n                var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n                if (lineSep !== false) {\n                    sel = sel.join(lineSep || this.lineSeparator());\n                }\n                parts[i] = sel;\n            }\n            return parts;\n        },\n        replaceSelection: function replaceSelection(code, collapse, origin) {\n            var dup = [];\n            for (var i = 0; i < this.sel.ranges.length; i++) {\n                dup[i] = code;\n            }\n            this.replaceSelections(dup, collapse, origin || \"+input\");\n        },\n        replaceSelections: docMethodOp(function (code, collapse, origin) {\n            var changes = [],\n                sel = this.sel;\n            for (var i = 0; i < sel.ranges.length; i++) {\n                var range = sel.ranges[i];\n                changes[i] = { from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin };\n            }\n            var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n            for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n                makeChange(this, changes[i$1]);\n            }\n            if (newSel) {\n                setSelectionReplaceHistory(this, newSel);\n            } else if (this.cm) {\n                ensureCursorVisible(this.cm);\n            }\n        }),\n        undo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\");\n        }),\n        redo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\");\n        }),\n        undoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\", true);\n        }),\n        redoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\", true);\n        }),\n\n        setExtending: function setExtending(val) {\n            this.extend = val;\n        },\n        getExtending: function getExtending() {\n            return this.extend;\n        },\n\n        historySize: function historySize() {\n            var hist = this.history,\n                done = 0,\n                undone = 0;\n            for (var i = 0; i < hist.done.length; i++) {\n                if (!hist.done[i].ranges) {\n                    ++done;\n                }\n            }\n            for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n                if (!hist.undone[i$1].ranges) {\n                    ++undone;\n                }\n            }\n            return { undo: done, redo: undone };\n        },\n        clearHistory: function clearHistory() {\n            var this$1 = this;\n\n            this.history = new History(this.history.maxGeneration);\n            linkedDocs(this, function (doc) {\n                return doc.history = this$1.history;\n            }, true);\n        },\n\n        markClean: function markClean() {\n            this.cleanGeneration = this.changeGeneration(true);\n        },\n        changeGeneration: function changeGeneration(forceSplit) {\n            if (forceSplit) {\n                this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n            }\n            return this.history.generation;\n        },\n        isClean: function isClean(gen) {\n            return this.history.generation == (gen || this.cleanGeneration);\n        },\n\n        getHistory: function getHistory() {\n            return { done: copyHistoryArray(this.history.done),\n                undone: copyHistoryArray(this.history.undone) };\n        },\n        setHistory: function setHistory(histData) {\n            var hist = this.history = new History(this.history.maxGeneration);\n            hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n            hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n        },\n\n        setGutterMarker: docMethodOp(function (line, gutterID, value) {\n            return changeLine(this, line, \"gutter\", function (line) {\n                var markers = line.gutterMarkers || (line.gutterMarkers = {});\n                markers[gutterID] = value;\n                if (!value && isEmpty(markers)) {\n                    line.gutterMarkers = null;\n                }\n                return true;\n            });\n        }),\n\n        clearGutter: docMethodOp(function (gutterID) {\n            var this$1 = this;\n\n            this.iter(function (line) {\n                if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n                    changeLine(this$1, line, \"gutter\", function () {\n                        line.gutterMarkers[gutterID] = null;\n                        if (isEmpty(line.gutterMarkers)) {\n                            line.gutterMarkers = null;\n                        }\n                        return true;\n                    });\n                }\n            });\n        }),\n\n        lineInfo: function lineInfo(line) {\n            var n;\n            if (typeof line == \"number\") {\n                if (!isLine(this, line)) {\n                    return null;\n                }\n                n = line;\n                line = getLine(this, line);\n                if (!line) {\n                    return null;\n                }\n            } else {\n                n = lineNo(line);\n                if (n == null) {\n                    return null;\n                }\n            }\n            return { line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n                textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n                widgets: line.widgets };\n        },\n\n        addLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n                var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n                if (!line[prop]) {\n                    line[prop] = cls;\n                } else if (classTest(cls).test(line[prop])) {\n                    return false;\n                } else {\n                    line[prop] += \" \" + cls;\n                }\n                return true;\n            });\n        }),\n        removeLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n                var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n                var cur = line[prop];\n                if (!cur) {\n                    return false;\n                } else if (cls == null) {\n                    line[prop] = null;\n                } else {\n                    var found = cur.match(classTest(cls));\n                    if (!found) {\n                        return false;\n                    }\n                    var end = found.index + found[0].length;\n                    line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n                }\n                return true;\n            });\n        }),\n\n        addLineWidget: docMethodOp(function (handle, node, options) {\n            return addLineWidget(this, handle, node, options);\n        }),\n        removeLineWidget: function removeLineWidget(widget) {\n            widget.clear();\n        },\n\n        markText: function markText(from, to, options) {\n            return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n        },\n        setBookmark: function setBookmark(pos, options) {\n            var realOpts = { replacedWith: options && (options.nodeType == null ? options.widget : options),\n                insertLeft: options && options.insertLeft,\n                clearWhenEmpty: false, shared: options && options.shared,\n                handleMouseEvents: options && options.handleMouseEvents };\n            pos = _clipPos(this, pos);\n            return _markText(this, pos, pos, realOpts, \"bookmark\");\n        },\n        findMarksAt: function findMarksAt(pos) {\n            pos = _clipPos(this, pos);\n            var markers = [],\n                spans = getLine(this, pos.line).markedSpans;\n            if (spans) {\n                for (var i = 0; i < spans.length; ++i) {\n                    var span = spans[i];\n                    if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n                        markers.push(span.marker.parent || span.marker);\n                    }\n                }\n            }\n            return markers;\n        },\n        findMarks: function findMarks(from, to, filter) {\n            from = _clipPos(this, from);to = _clipPos(this, to);\n            var found = [],\n                lineNo = from.line;\n            this.iter(from.line, to.line + 1, function (line) {\n                var spans = line.markedSpans;\n                if (spans) {\n                    for (var i = 0; i < spans.length; i++) {\n                        var span = spans[i];\n                        if (!(span.to != null && lineNo == from.line && from.ch >= span.to || span.from == null && lineNo != from.line || span.from != null && lineNo == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n                            found.push(span.marker.parent || span.marker);\n                        }\n                    }\n                }\n                ++lineNo;\n            });\n            return found;\n        },\n        getAllMarks: function getAllMarks() {\n            var markers = [];\n            this.iter(function (line) {\n                var sps = line.markedSpans;\n                if (sps) {\n                    for (var i = 0; i < sps.length; ++i) {\n                        if (sps[i].from != null) {\n                            markers.push(sps[i].marker);\n                        }\n                    }\n                }\n            });\n            return markers;\n        },\n\n        posFromIndex: function posFromIndex(off) {\n            var ch,\n                lineNo = this.first,\n                sepSize = this.lineSeparator().length;\n            this.iter(function (line) {\n                var sz = line.text.length + sepSize;\n                if (sz > off) {\n                    ch = off;return true;\n                }\n                off -= sz;\n                ++lineNo;\n            });\n            return _clipPos(this, Pos(lineNo, ch));\n        },\n        indexFromPos: function indexFromPos(coords) {\n            coords = _clipPos(this, coords);\n            var index = coords.ch;\n            if (coords.line < this.first || coords.ch < 0) {\n                return 0;\n            }\n            var sepSize = this.lineSeparator().length;\n            this.iter(this.first, coords.line, function (line) {\n                // iter aborts when callback returns a truthy value\n                index += line.text.length + sepSize;\n            });\n            return index;\n        },\n\n        copy: function copy(copyHistory) {\n            var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n            doc.scrollTop = this.scrollTop;doc.scrollLeft = this.scrollLeft;\n            doc.sel = this.sel;\n            doc.extend = false;\n            if (copyHistory) {\n                doc.history.undoDepth = this.history.undoDepth;\n                doc.setHistory(this.getHistory());\n            }\n            return doc;\n        },\n\n        linkedDoc: function linkedDoc(options) {\n            if (!options) {\n                options = {};\n            }\n            var from = this.first,\n                to = this.first + this.size;\n            if (options.from != null && options.from > from) {\n                from = options.from;\n            }\n            if (options.to != null && options.to < to) {\n                to = options.to;\n            }\n            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n            if (options.sharedHist) {\n                copy.history = this.history;\n            }(this.linked || (this.linked = [])).push({ doc: copy, sharedHist: options.sharedHist });\n            copy.linked = [{ doc: this, isParent: true, sharedHist: options.sharedHist }];\n            copySharedMarkers(copy, findSharedMarkers(this));\n            return copy;\n        },\n        unlinkDoc: function unlinkDoc(other) {\n            if (other instanceof CodeMirror) {\n                other = other.doc;\n            }\n            if (this.linked) {\n                for (var i = 0; i < this.linked.length; ++i) {\n                    var link = this.linked[i];\n                    if (link.doc != other) {\n                        continue;\n                    }\n                    this.linked.splice(i, 1);\n                    other.unlinkDoc(this);\n                    detachSharedMarkers(findSharedMarkers(this));\n                    break;\n                }\n            }\n            // If the histories were shared, split them again\n            if (other.history == this.history) {\n                var splitIds = [other.id];\n                linkedDocs(other, function (doc) {\n                    return splitIds.push(doc.id);\n                }, true);\n                other.history = new History(null);\n                other.history.done = copyHistoryArray(this.history.done, splitIds);\n                other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n            }\n        },\n        iterLinkedDocs: function iterLinkedDocs(f) {\n            linkedDocs(this, f);\n        },\n\n        getMode: function getMode() {\n            return this.mode;\n        },\n        getEditor: function getEditor() {\n            return this.cm;\n        },\n\n        splitLines: function splitLines(str) {\n            if (this.lineSep) {\n                return str.split(this.lineSep);\n            }\n            return splitLinesAuto(str);\n        },\n        lineSeparator: function lineSeparator() {\n            return this.lineSep || \"\\n\";\n        },\n\n        setDirection: docMethodOp(function (dir) {\n            if (dir != \"rtl\") {\n                dir = \"ltr\";\n            }\n            if (dir == this.direction) {\n                return;\n            }\n            this.direction = dir;\n            this.iter(function (line) {\n                return line.order = null;\n            });\n            if (this.cm) {\n                directionChanged(this.cm);\n            }\n        })\n    });\n\n    // Public alias.\n    Doc.prototype.eachLine = Doc.prototype.iter;\n\n    // Kludge to work around strange IE behavior where it'll sometimes\n    // re-fire a series of drag-related events right after the drop (#1551)\n    var lastDrop = 0;\n\n    function onDrop(e) {\n        var cm = this;\n        clearDragCursor(cm);\n        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n        }\n        e_preventDefault(e);\n        if (ie) {\n            lastDrop = +new Date();\n        }\n        var pos = posFromMouse(cm, e, true),\n            files = e.dataTransfer.files;\n        if (!pos || cm.isReadOnly()) {\n            return;\n        }\n        // Might be a file drop, in which case we simply extract the text\n        // and insert it.\n        if (files && files.length && window.FileReader && window.File) {\n            var n = files.length,\n                text = Array(n),\n                read = 0;\n            var markAsReadAndPasteIfAllFilesAreRead = function markAsReadAndPasteIfAllFilesAreRead() {\n                if (++read == n) {\n                    operation(cm, function () {\n                        pos = _clipPos(cm.doc, pos);\n                        var change = { from: pos, to: pos,\n                            text: cm.doc.splitLines(text.filter(function (t) {\n                                return t != null;\n                            }).join(cm.doc.lineSeparator())),\n                            origin: \"paste\" };\n                        makeChange(cm.doc, change);\n                        setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n                    })();\n                }\n            };\n            var readTextFromFile = function readTextFromFile(file, i) {\n                if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n                    markAsReadAndPasteIfAllFilesAreRead();\n                    return;\n                }\n                var reader = new FileReader();\n                reader.onerror = function () {\n                    return markAsReadAndPasteIfAllFilesAreRead();\n                };\n                reader.onload = function () {\n                    var content = reader.result;\n                    if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n                        markAsReadAndPasteIfAllFilesAreRead();\n                        return;\n                    }\n                    text[i] = content;\n                    markAsReadAndPasteIfAllFilesAreRead();\n                };\n                reader.readAsText(file);\n            };\n            for (var i = 0; i < files.length; i++) {\n                readTextFromFile(files[i], i);\n            }\n        } else {\n            // Normal drop\n            // Don't do a replace if the drop happened inside of the selected text.\n            if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n                cm.state.draggingText(e);\n                // Ensure the editor is re-focused\n                setTimeout(function () {\n                    return cm.display.input.focus();\n                }, 20);\n                return;\n            }\n            try {\n                var text$1 = e.dataTransfer.getData(\"Text\");\n                if (text$1) {\n                    var selected;\n                    if (cm.state.draggingText && !cm.state.draggingText.copy) {\n                        selected = cm.listSelections();\n                    }\n                    setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n                    if (selected) {\n                        for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n                            _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n                        }\n                    }\n                    cm.replaceSelection(text$1, \"around\", \"paste\");\n                    cm.display.input.focus();\n                }\n            } catch (e) {}\n        }\n    }\n\n    function onDragStart(cm, e) {\n        if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n            e_stop(e);return;\n        }\n        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n        }\n\n        e.dataTransfer.setData(\"Text\", cm.getSelection());\n        e.dataTransfer.effectAllowed = \"copyMove\";\n\n        // Use dummy image instead of default browsers image.\n        // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n        if (e.dataTransfer.setDragImage && !safari) {\n            var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n            img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n            if (presto) {\n                img.width = img.height = 1;\n                cm.display.wrapper.appendChild(img);\n                // Force a relayout, or Opera won't use our image for some obscure reason\n                img._top = img.offsetTop;\n            }\n            e.dataTransfer.setDragImage(img, 0, 0);\n            if (presto) {\n                img.parentNode.removeChild(img);\n            }\n        }\n    }\n\n    function onDragOver(cm, e) {\n        var pos = posFromMouse(cm, e);\n        if (!pos) {\n            return;\n        }\n        var frag = document.createDocumentFragment();\n        drawSelectionCursor(cm, pos, frag);\n        if (!cm.display.dragCursor) {\n            cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n        }\n        removeChildrenAndAdd(cm.display.dragCursor, frag);\n    }\n\n    function clearDragCursor(cm) {\n        if (cm.display.dragCursor) {\n            cm.display.lineSpace.removeChild(cm.display.dragCursor);\n            cm.display.dragCursor = null;\n        }\n    }\n\n    // These must be handled carefully, because naively registering a\n    // handler for each editor will cause the editors to never be\n    // garbage collected.\n\n    function forEachCodeMirror(f) {\n        if (!document.getElementsByClassName) {\n            return;\n        }\n        var byClass = document.getElementsByClassName(\"CodeMirror\"),\n            editors = [];\n        for (var i = 0; i < byClass.length; i++) {\n            var cm = byClass[i].CodeMirror;\n            if (cm) {\n                editors.push(cm);\n            }\n        }\n        if (editors.length) {\n            editors[0].operation(function () {\n                for (var i = 0; i < editors.length; i++) {\n                    f(editors[i]);\n                }\n            });\n        }\n    }\n\n    var globalsRegistered = false;\n    function ensureGlobalHandlers() {\n        if (globalsRegistered) {\n            return;\n        }\n        registerGlobalHandlers();\n        globalsRegistered = true;\n    }\n    function registerGlobalHandlers() {\n        // When the window resizes, we need to refresh active editors.\n        var resizeTimer;\n        on(window, \"resize\", function () {\n            if (resizeTimer == null) {\n                resizeTimer = setTimeout(function () {\n                    resizeTimer = null;\n                    forEachCodeMirror(onResize);\n                }, 100);\n            }\n        });\n        // When the window loses focus, we want to show the editor as blurred\n        on(window, \"blur\", function () {\n            return forEachCodeMirror(onBlur);\n        });\n    }\n    // Called when the window resizes\n    function onResize(cm) {\n        var d = cm.display;\n        // Might be a text scaling operation, clear size caches.\n        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n        d.scrollbarsClipped = false;\n        cm.setSize();\n    }\n\n    var keyNames = {\n        3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n        19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n        36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n        46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n        106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n        173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n        221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n        63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n    };\n\n    // Number keys\n    for (var i = 0; i < 10; i++) {\n        keyNames[i + 48] = keyNames[i + 96] = String(i);\n    }\n    // Alphabetic keys\n    for (var i$1 = 65; i$1 <= 90; i$1++) {\n        keyNames[i$1] = String.fromCharCode(i$1);\n    }\n    // Function keys\n    for (var i$2 = 1; i$2 <= 12; i$2++) {\n        keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n    }\n\n    var keyMap = {};\n\n    keyMap.basic = {\n        \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n        \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n        \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n        \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n        \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n        \"Esc\": \"singleSelection\"\n    };\n    // Note that the save and find-related commands aren't defined by\n    // default. User code or addons can define them. Unknown commands\n    // are simply ignored.\n    keyMap.pcDefault = {\n        \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n        \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n        \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n        \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n        \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n        \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n        \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n        \"fallthrough\": \"basic\"\n    };\n    // Very basic readline/emacs-style bindings, which are standard on Mac.\n    keyMap.emacsy = {\n        \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n        \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n        \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n        \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n        \"Ctrl-O\": \"openLine\"\n    };\n    keyMap.macDefault = {\n        \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n        \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n        \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n        \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n        \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n        \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n        \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n        \"fallthrough\": [\"basic\", \"emacsy\"]\n    };\n    keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n    // KEYMAP DISPATCH\n\n    function normalizeKeyName(name) {\n        var parts = name.split(/-(?!$)/);\n        name = parts[parts.length - 1];\n        var alt, ctrl, shift, cmd;\n        for (var i = 0; i < parts.length - 1; i++) {\n            var mod = parts[i];\n            if (/^(cmd|meta|m)$/i.test(mod)) {\n                cmd = true;\n            } else if (/^a(lt)?$/i.test(mod)) {\n                alt = true;\n            } else if (/^(c|ctrl|control)$/i.test(mod)) {\n                ctrl = true;\n            } else if (/^s(hift)?$/i.test(mod)) {\n                shift = true;\n            } else {\n                throw new Error(\"Unrecognized modifier name: \" + mod);\n            }\n        }\n        if (alt) {\n            name = \"Alt-\" + name;\n        }\n        if (ctrl) {\n            name = \"Ctrl-\" + name;\n        }\n        if (cmd) {\n            name = \"Cmd-\" + name;\n        }\n        if (shift) {\n            name = \"Shift-\" + name;\n        }\n        return name;\n    }\n\n    // This is a kludge to keep keymaps mostly working as raw objects\n    // (backwards compatibility) while at the same time support features\n    // like normalization and multi-stroke key bindings. It compiles a\n    // new normalized keymap, and then updates the old object to reflect\n    // this.\n    function normalizeKeyMap(keymap) {\n        var copy = {};\n        for (var keyname in keymap) {\n            if (keymap.hasOwnProperty(keyname)) {\n                var value = keymap[keyname];\n                if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n                    continue;\n                }\n                if (value == \"...\") {\n                    delete keymap[keyname];continue;\n                }\n\n                var keys = map(keyname.split(\" \"), normalizeKeyName);\n                for (var i = 0; i < keys.length; i++) {\n                    var val = void 0,\n                        name = void 0;\n                    if (i == keys.length - 1) {\n                        name = keys.join(\" \");\n                        val = value;\n                    } else {\n                        name = keys.slice(0, i + 1).join(\" \");\n                        val = \"...\";\n                    }\n                    var prev = copy[name];\n                    if (!prev) {\n                        copy[name] = val;\n                    } else if (prev != val) {\n                        throw new Error(\"Inconsistent bindings for \" + name);\n                    }\n                }\n                delete keymap[keyname];\n            }\n        }\n        for (var prop in copy) {\n            keymap[prop] = copy[prop];\n        }\n        return keymap;\n    }\n\n    function lookupKey(key, map, handle, context) {\n        map = getKeyMap(map);\n        var found = map.call ? map.call(key, context) : map[key];\n        if (found === false) {\n            return \"nothing\";\n        }\n        if (found === \"...\") {\n            return \"multi\";\n        }\n        if (found != null && handle(found)) {\n            return \"handled\";\n        }\n\n        if (map.fallthrough) {\n            if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\") {\n                return lookupKey(key, map.fallthrough, handle, context);\n            }\n            for (var i = 0; i < map.fallthrough.length; i++) {\n                var result = lookupKey(key, map.fallthrough[i], handle, context);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n    }\n\n    // Modifier key presses don't count as 'real' key presses for the\n    // purpose of keymap fallthrough.\n    function isModifierKey(value) {\n        var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n        return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n    }\n\n    function addModifierNames(name, event, noShift) {\n        var base = name;\n        if (event.altKey && base != \"Alt\") {\n            name = \"Alt-\" + name;\n        }\n        if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n            name = \"Ctrl-\" + name;\n        }\n        if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n            name = \"Cmd-\" + name;\n        }\n        if (!noShift && event.shiftKey && base != \"Shift\") {\n            name = \"Shift-\" + name;\n        }\n        return name;\n    }\n\n    // Look up the name of a key as indicated by an event object.\n    function keyName(event, noShift) {\n        if (presto && event.keyCode == 34 && event[\"char\"]) {\n            return false;\n        }\n        var name = keyNames[event.keyCode];\n        if (name == null || event.altGraphKey) {\n            return false;\n        }\n        // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n        // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n        if (event.keyCode == 3 && event.code) {\n            name = event.code;\n        }\n        return addModifierNames(name, event, noShift);\n    }\n\n    function getKeyMap(val) {\n        return typeof val == \"string\" ? keyMap[val] : val;\n    }\n\n    // Helper for deleting text near the selection(s), used to implement\n    // backspace, delete, and similar functionality.\n    function deleteNearSelection(cm, compute) {\n        var ranges = cm.doc.sel.ranges,\n            kill = [];\n        // Build up a set of ranges to kill first, merging overlapping\n        // ranges.\n        for (var i = 0; i < ranges.length; i++) {\n            var toKill = compute(ranges[i]);\n            while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n                var replaced = kill.pop();\n                if (cmp(replaced.from, toKill.from) < 0) {\n                    toKill.from = replaced.from;\n                    break;\n                }\n            }\n            kill.push(toKill);\n        }\n        // Next, remove those actual ranges.\n        runInOp(cm, function () {\n            for (var i = kill.length - 1; i >= 0; i--) {\n                _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n            }\n            ensureCursorVisible(cm);\n        });\n    }\n\n    function moveCharLogically(line, ch, dir) {\n        var target = skipExtendingChars(line.text, ch + dir, dir);\n        return target < 0 || target > line.text.length ? null : target;\n    }\n\n    function moveLogically(line, start, dir) {\n        var ch = moveCharLogically(line, start.ch, dir);\n        return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n    }\n\n    function endOfLine(visually, cm, lineObj, lineNo, dir) {\n        if (visually) {\n            if (cm.getOption(\"direction\") == \"rtl\") {\n                dir = -dir;\n            }\n            var order = getOrder(lineObj, cm.doc.direction);\n            if (order) {\n                var part = dir < 0 ? lst(order) : order[0];\n                var moveInStorageOrder = dir < 0 == (part.level == 1);\n                var sticky = moveInStorageOrder ? \"after\" : \"before\";\n                var ch;\n                // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n                // it could be that the last bidi part is not on the last visual line,\n                // since visual lines contain content order-consecutive chunks.\n                // Thus, in rtl, we are looking for the first (content-order) character\n                // in the rtl chunk that is on the last line (that is, the same line\n                // as the last (content-order) character).\n                if (part.level > 0 || cm.doc.direction == \"rtl\") {\n                    var prep = prepareMeasureForLine(cm, lineObj);\n                    ch = dir < 0 ? lineObj.text.length - 1 : 0;\n                    var targetTop = measureCharPrepared(cm, prep, ch).top;\n                    ch = findFirst(function (ch) {\n                        return measureCharPrepared(cm, prep, ch).top == targetTop;\n                    }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n                    if (sticky == \"before\") {\n                        ch = moveCharLogically(lineObj, ch, 1);\n                    }\n                } else {\n                    ch = dir < 0 ? part.to : part.from;\n                }\n                return new Pos(lineNo, ch, sticky);\n            }\n        }\n        return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n    }\n\n    function moveVisually(cm, line, start, dir) {\n        var bidi = getOrder(line, cm.doc.direction);\n        if (!bidi) {\n            return moveLogically(line, start, dir);\n        }\n        if (start.ch >= line.text.length) {\n            start.ch = line.text.length;\n            start.sticky = \"before\";\n        } else if (start.ch <= 0) {\n            start.ch = 0;\n            start.sticky = \"after\";\n        }\n        var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n            part = bidi[partPos];\n        if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n            // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n            // nothing interesting happens.\n            return moveLogically(line, start, dir);\n        }\n\n        var mv = function mv(pos, dir) {\n            return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n        };\n        var prep;\n        var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n            if (!cm.options.lineWrapping) {\n                return { begin: 0, end: line.text.length };\n            }\n            prep = prep || prepareMeasureForLine(cm, line);\n            return wrappedLineExtentChar(cm, line, prep, ch);\n        };\n        var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n        if (cm.doc.direction == \"rtl\" || part.level == 1) {\n            var moveInStorageOrder = part.level == 1 == dir < 0;\n            var ch = mv(start, moveInStorageOrder ? 1 : -1);\n            if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n                // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n                var sticky = moveInStorageOrder ? \"before\" : \"after\";\n                return new Pos(start.line, ch, sticky);\n            }\n        }\n\n        // Case 3: Could not move within this bidi part in this visual line, so leave\n        // the current bidi part\n\n        var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n            var getRes = function getRes(ch, moveInStorageOrder) {\n                return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n            };\n\n            for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n                var part = bidi[partPos];\n                var moveInStorageOrder = dir > 0 == (part.level != 1);\n                var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n                if (part.from <= ch && ch < part.to) {\n                    return getRes(ch, moveInStorageOrder);\n                }\n                ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n                if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n                    return getRes(ch, moveInStorageOrder);\n                }\n            }\n        };\n\n        // Case 3a: Look for other bidi parts on the same visual line\n        var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n        if (res) {\n            return res;\n        }\n\n        // Case 3b: Look for other bidi parts on the next visual line\n        var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n        if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n            res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n            if (res) {\n                return res;\n            }\n        }\n\n        // Case 4: Nowhere to move\n        return null;\n    }\n\n    // Commands are parameter-less actions that can be performed on an\n    // editor, mostly used for keybindings.\n    var commands = {\n        selectAll: selectAll,\n        singleSelection: function singleSelection(cm) {\n            return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n        },\n        killLine: function killLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n                if (range.empty()) {\n                    var len = getLine(cm.doc, range.head.line).text.length;\n                    if (range.head.ch == len && range.head.line < cm.lastLine()) {\n                        return { from: range.head, to: Pos(range.head.line + 1, 0) };\n                    } else {\n                        return { from: range.head, to: Pos(range.head.line, len) };\n                    }\n                } else {\n                    return { from: range.from(), to: range.to() };\n                }\n            });\n        },\n        deleteLine: function deleteLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n                return {\n                    from: Pos(range.from().line, 0),\n                    to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n                };\n            });\n        },\n        delLineLeft: function delLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n                return {\n                    from: Pos(range.from().line, 0), to: range.from()\n                };\n            });\n        },\n        delWrappedLineLeft: function delWrappedLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n                var top = cm.charCoords(range.head, \"div\").top + 5;\n                var leftPos = cm.coordsChar({ left: 0, top: top }, \"div\");\n                return { from: leftPos, to: range.from() };\n            });\n        },\n        delWrappedLineRight: function delWrappedLineRight(cm) {\n            return deleteNearSelection(cm, function (range) {\n                var top = cm.charCoords(range.head, \"div\").top + 5;\n                var rightPos = cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n                return { from: range.from(), to: rightPos };\n            });\n        },\n        undo: function undo(cm) {\n            return cm.undo();\n        },\n        redo: function redo(cm) {\n            return cm.redo();\n        },\n        undoSelection: function undoSelection(cm) {\n            return cm.undoSelection();\n        },\n        redoSelection: function redoSelection(cm) {\n            return cm.redoSelection();\n        },\n        goDocStart: function goDocStart(cm) {\n            return cm.extendSelection(Pos(cm.firstLine(), 0));\n        },\n        goDocEnd: function goDocEnd(cm) {\n            return cm.extendSelection(Pos(cm.lastLine()));\n        },\n        goLineStart: function goLineStart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                return lineStart(cm, range.head.line);\n            }, { origin: \"+move\", bias: 1 });\n        },\n        goLineStartSmart: function goLineStartSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                return lineStartSmart(cm, range.head);\n            }, { origin: \"+move\", bias: 1 });\n        },\n        goLineEnd: function goLineEnd(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                return lineEnd(cm, range.head.line);\n            }, { origin: \"+move\", bias: -1 });\n        },\n        goLineRight: function goLineRight(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                var top = cm.cursorCoords(range.head, \"div\").top + 5;\n                return cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n            }, sel_move);\n        },\n        goLineLeft: function goLineLeft(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                var top = cm.cursorCoords(range.head, \"div\").top + 5;\n                return cm.coordsChar({ left: 0, top: top }, \"div\");\n            }, sel_move);\n        },\n        goLineLeftSmart: function goLineLeftSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n                var top = cm.cursorCoords(range.head, \"div\").top + 5;\n                var pos = cm.coordsChar({ left: 0, top: top }, \"div\");\n                if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n                    return lineStartSmart(cm, range.head);\n                }\n                return pos;\n            }, sel_move);\n        },\n        goLineUp: function goLineUp(cm) {\n            return cm.moveV(-1, \"line\");\n        },\n        goLineDown: function goLineDown(cm) {\n            return cm.moveV(1, \"line\");\n        },\n        goPageUp: function goPageUp(cm) {\n            return cm.moveV(-1, \"page\");\n        },\n        goPageDown: function goPageDown(cm) {\n            return cm.moveV(1, \"page\");\n        },\n        goCharLeft: function goCharLeft(cm) {\n            return cm.moveH(-1, \"char\");\n        },\n        goCharRight: function goCharRight(cm) {\n            return cm.moveH(1, \"char\");\n        },\n        goColumnLeft: function goColumnLeft(cm) {\n            return cm.moveH(-1, \"column\");\n        },\n        goColumnRight: function goColumnRight(cm) {\n            return cm.moveH(1, \"column\");\n        },\n        goWordLeft: function goWordLeft(cm) {\n            return cm.moveH(-1, \"word\");\n        },\n        goGroupRight: function goGroupRight(cm) {\n            return cm.moveH(1, \"group\");\n        },\n        goGroupLeft: function goGroupLeft(cm) {\n            return cm.moveH(-1, \"group\");\n        },\n        goWordRight: function goWordRight(cm) {\n            return cm.moveH(1, \"word\");\n        },\n        delCharBefore: function delCharBefore(cm) {\n            return cm.deleteH(-1, \"char\");\n        },\n        delCharAfter: function delCharAfter(cm) {\n            return cm.deleteH(1, \"char\");\n        },\n        delWordBefore: function delWordBefore(cm) {\n            return cm.deleteH(-1, \"word\");\n        },\n        delWordAfter: function delWordAfter(cm) {\n            return cm.deleteH(1, \"word\");\n        },\n        delGroupBefore: function delGroupBefore(cm) {\n            return cm.deleteH(-1, \"group\");\n        },\n        delGroupAfter: function delGroupAfter(cm) {\n            return cm.deleteH(1, \"group\");\n        },\n        indentAuto: function indentAuto(cm) {\n            return cm.indentSelection(\"smart\");\n        },\n        indentMore: function indentMore(cm) {\n            return cm.indentSelection(\"add\");\n        },\n        indentLess: function indentLess(cm) {\n            return cm.indentSelection(\"subtract\");\n        },\n        insertTab: function insertTab(cm) {\n            return cm.replaceSelection(\"\\t\");\n        },\n        insertSoftTab: function insertSoftTab(cm) {\n            var spaces = [],\n                ranges = cm.listSelections(),\n                tabSize = cm.options.tabSize;\n            for (var i = 0; i < ranges.length; i++) {\n                var pos = ranges[i].from();\n                var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n                spaces.push(spaceStr(tabSize - col % tabSize));\n            }\n            cm.replaceSelections(spaces);\n        },\n        defaultTab: function defaultTab(cm) {\n            if (cm.somethingSelected()) {\n                cm.indentSelection(\"add\");\n            } else {\n                cm.execCommand(\"insertTab\");\n            }\n        },\n        // Swap the two chars left and right of each selection's head.\n        // Move cursor behind the two swapped characters afterwards.\n        //\n        // Doesn't consider line feeds a character.\n        // Doesn't scan more than one line above to find a character.\n        // Doesn't do anything on an empty line.\n        // Doesn't do anything with non-empty selections.\n        transposeChars: function transposeChars(cm) {\n            return runInOp(cm, function () {\n                var ranges = cm.listSelections(),\n                    newSel = [];\n                for (var i = 0; i < ranges.length; i++) {\n                    if (!ranges[i].empty()) {\n                        continue;\n                    }\n                    var cur = ranges[i].head,\n                        line = getLine(cm.doc, cur.line).text;\n                    if (line) {\n                        if (cur.ch == line.length) {\n                            cur = new Pos(cur.line, cur.ch - 1);\n                        }\n                        if (cur.ch > 0) {\n                            cur = new Pos(cur.line, cur.ch + 1);\n                            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n                        } else if (cur.line > cm.doc.first) {\n                            var prev = getLine(cm.doc, cur.line - 1).text;\n                            if (prev) {\n                                cur = new Pos(cur.line, 1);\n                                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n                            }\n                        }\n                    }\n                    newSel.push(new Range(cur, cur));\n                }\n                cm.setSelections(newSel);\n            });\n        },\n        newlineAndIndent: function newlineAndIndent(cm) {\n            return runInOp(cm, function () {\n                var sels = cm.listSelections();\n                for (var i = sels.length - 1; i >= 0; i--) {\n                    cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n                }\n                sels = cm.listSelections();\n                for (var i$1 = 0; i$1 < sels.length; i$1++) {\n                    cm.indentLine(sels[i$1].from().line, null, true);\n                }\n                ensureCursorVisible(cm);\n            });\n        },\n        openLine: function openLine(cm) {\n            return cm.replaceSelection(\"\\n\", \"start\");\n        },\n        toggleOverwrite: function toggleOverwrite(cm) {\n            return cm.toggleOverwrite();\n        }\n    };\n\n    function lineStart(cm, lineN) {\n        var line = getLine(cm.doc, lineN);\n        var visual = visualLine(line);\n        if (visual != line) {\n            lineN = lineNo(visual);\n        }\n        return endOfLine(true, cm, visual, lineN, 1);\n    }\n    function lineEnd(cm, lineN) {\n        var line = getLine(cm.doc, lineN);\n        var visual = visualLineEnd(line);\n        if (visual != line) {\n            lineN = lineNo(visual);\n        }\n        return endOfLine(true, cm, line, lineN, -1);\n    }\n    function lineStartSmart(cm, pos) {\n        var start = lineStart(cm, pos.line);\n        var line = getLine(cm.doc, start.line);\n        var order = getOrder(line, cm.doc.direction);\n        if (!order || order[0].level == 0) {\n            var firstNonWS = Math.max(0, line.text.search(/\\S/));\n            var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n            return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n        }\n        return start;\n    }\n\n    // Run a handler that was bound to a key.\n    function doHandleBinding(cm, bound, dropShift) {\n        if (typeof bound == \"string\") {\n            bound = commands[bound];\n            if (!bound) {\n                return false;\n            }\n        }\n        // Ensure previous input has been read, so that the handler sees a\n        // consistent view of the document\n        cm.display.input.ensurePolled();\n        var prevShift = cm.display.shift,\n            done = false;\n        try {\n            if (cm.isReadOnly()) {\n                cm.state.suppressEdits = true;\n            }\n            if (dropShift) {\n                cm.display.shift = false;\n            }\n            done = bound(cm) != Pass;\n        } finally {\n            cm.display.shift = prevShift;\n            cm.state.suppressEdits = false;\n        }\n        return done;\n    }\n\n    function lookupKeyForEditor(cm, name, handle) {\n        for (var i = 0; i < cm.state.keyMaps.length; i++) {\n            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n            if (result) {\n                return result;\n            }\n        }\n        return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n    }\n\n    // Note that, despite the name, this function is also used to check\n    // for bound mouse clicks.\n\n    var stopSeq = new Delayed();\n\n    function dispatchKey(cm, name, e, handle) {\n        var seq = cm.state.keySeq;\n        if (seq) {\n            if (isModifierKey(name)) {\n                return \"handled\";\n            }\n            if (/\\'$/.test(name)) {\n                cm.state.keySeq = null;\n            } else {\n                stopSeq.set(50, function () {\n                    if (cm.state.keySeq == seq) {\n                        cm.state.keySeq = null;\n                        cm.display.input.reset();\n                    }\n                });\n            }\n            if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) {\n                return true;\n            }\n        }\n        return dispatchKeyInner(cm, name, e, handle);\n    }\n\n    function dispatchKeyInner(cm, name, e, handle) {\n        var result = lookupKeyForEditor(cm, name, handle);\n\n        if (result == \"multi\") {\n            cm.state.keySeq = name;\n        }\n        if (result == \"handled\") {\n            signalLater(cm, \"keyHandled\", cm, name, e);\n        }\n\n        if (result == \"handled\" || result == \"multi\") {\n            e_preventDefault(e);\n            restartBlink(cm);\n        }\n\n        return !!result;\n    }\n\n    // Handle a key from the keydown event.\n    function handleKeyBinding(cm, e) {\n        var name = keyName(e, true);\n        if (!name) {\n            return false;\n        }\n\n        if (e.shiftKey && !cm.state.keySeq) {\n            // First try to resolve full name (including 'Shift-'). Failing\n            // that, see if there is a cursor-motion command (starting with\n            // 'go') bound to the keyname without 'Shift-'.\n            return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n                return doHandleBinding(cm, b, true);\n            }) || dispatchKey(cm, name, e, function (b) {\n                if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n                    return doHandleBinding(cm, b);\n                }\n            });\n        } else {\n            return dispatchKey(cm, name, e, function (b) {\n                return doHandleBinding(cm, b);\n            });\n        }\n    }\n\n    // Handle a key from the keypress event\n    function handleCharBinding(cm, e, ch) {\n        return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n            return doHandleBinding(cm, b, true);\n        });\n    }\n\n    var lastStoppedKey = null;\n    function onKeyDown(e) {\n        var cm = this;\n        cm.curOp.focus = activeElt();\n        if (signalDOMEvent(cm, e)) {\n            return;\n        }\n        // IE does strange things with escape.\n        if (ie && ie_version < 11 && e.keyCode == 27) {\n            e.returnValue = false;\n        }\n        var code = e.keyCode;\n        cm.display.shift = code == 16 || e.shiftKey;\n        var handled = handleKeyBinding(cm, e);\n        if (presto) {\n            lastStoppedKey = handled ? code : null;\n            // Opera has no cut event... we try to at least catch the key combo\n            if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n                cm.replaceSelection(\"\", null, \"cut\");\n            }\n        }\n        if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {\n            document.execCommand(\"cut\");\n        }\n\n        // Turn mouse into crosshair when Alt is held on Mac.\n        if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n            showCrossHair(cm);\n        }\n    }\n\n    function showCrossHair(cm) {\n        var lineDiv = cm.display.lineDiv;\n        addClass(lineDiv, \"CodeMirror-crosshair\");\n\n        function up(e) {\n            if (e.keyCode == 18 || !e.altKey) {\n                rmClass(lineDiv, \"CodeMirror-crosshair\");\n                off(document, \"keyup\", up);\n                off(document, \"mouseover\", up);\n            }\n        }\n        on(document, \"keyup\", up);\n        on(document, \"mouseover\", up);\n    }\n\n    function onKeyUp(e) {\n        if (e.keyCode == 16) {\n            this.doc.sel.shift = false;\n        }\n        signalDOMEvent(this, e);\n    }\n\n    function onKeyPress(e) {\n        var cm = this;\n        if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n            return;\n        }\n        var keyCode = e.keyCode,\n            charCode = e.charCode;\n        if (presto && keyCode == lastStoppedKey) {\n            lastStoppedKey = null;e_preventDefault(e);return;\n        }\n        if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n            return;\n        }\n        var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n        // Some browsers fire keypress events for backspace\n        if (ch == \"\\x08\") {\n            return;\n        }\n        if (handleCharBinding(cm, e, ch)) {\n            return;\n        }\n        cm.display.input.onKeyPress(e);\n    }\n\n    var DOUBLECLICK_DELAY = 400;\n\n    var PastClick = function PastClick(time, pos, button) {\n        this.time = time;\n        this.pos = pos;\n        this.button = button;\n    };\n\n    PastClick.prototype.compare = function (time, pos, button) {\n        return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n    };\n\n    var lastClick, lastDoubleClick;\n    function clickRepeat(pos, button) {\n        var now = +new Date();\n        if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n            lastClick = lastDoubleClick = null;\n            return \"triple\";\n        } else if (lastClick && lastClick.compare(now, pos, button)) {\n            lastDoubleClick = new PastClick(now, pos, button);\n            lastClick = null;\n            return \"double\";\n        } else {\n            lastClick = new PastClick(now, pos, button);\n            lastDoubleClick = null;\n            return \"single\";\n        }\n    }\n\n    // A mouse down can be a single click, double click, triple click,\n    // start of selection drag, start of text drag, new cursor\n    // (ctrl-click), rectangle drag (alt-drag), or xwin\n    // middle-click-paste. Or it might be a click on something we should\n    // not interfere with, such as a scrollbar or widget.\n    function onMouseDown(e) {\n        var cm = this,\n            display = cm.display;\n        if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n            return;\n        }\n        display.input.ensurePolled();\n        display.shift = e.shiftKey;\n\n        if (eventInWidget(display, e)) {\n            if (!webkit) {\n                // Briefly turn off draggability, to allow widgets to do\n                // normal dragging things.\n                display.scroller.draggable = false;\n                setTimeout(function () {\n                    return display.scroller.draggable = true;\n                }, 100);\n            }\n            return;\n        }\n        if (clickInGutter(cm, e)) {\n            return;\n        }\n        var pos = posFromMouse(cm, e),\n            button = e_button(e),\n            repeat = pos ? clickRepeat(pos, button) : \"single\";\n        window.focus();\n\n        // #3261: make sure, that we're not starting a second selection\n        if (button == 1 && cm.state.selectingText) {\n            cm.state.selectingText(e);\n        }\n\n        if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n            return;\n        }\n\n        if (button == 1) {\n            if (pos) {\n                leftButtonDown(cm, pos, repeat, e);\n            } else if (e_target(e) == display.scroller) {\n                e_preventDefault(e);\n            }\n        } else if (button == 2) {\n            if (pos) {\n                extendSelection(cm.doc, pos);\n            }\n            setTimeout(function () {\n                return display.input.focus();\n            }, 20);\n        } else if (button == 3) {\n            if (captureRightClick) {\n                cm.display.input.onContextMenu(e);\n            } else {\n                delayBlurEvent(cm);\n            }\n        }\n    }\n\n    function handleMappedButton(cm, button, pos, repeat, event) {\n        var name = \"Click\";\n        if (repeat == \"double\") {\n            name = \"Double\" + name;\n        } else if (repeat == \"triple\") {\n            name = \"Triple\" + name;\n        }\n        name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n        return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n            if (typeof bound == \"string\") {\n                bound = commands[bound];\n            }\n            if (!bound) {\n                return false;\n            }\n            var done = false;\n            try {\n                if (cm.isReadOnly()) {\n                    cm.state.suppressEdits = true;\n                }\n                done = bound(cm, pos) != Pass;\n            } finally {\n                cm.state.suppressEdits = false;\n            }\n            return done;\n        });\n    }\n\n    function configureMouse(cm, repeat, event) {\n        var option = cm.getOption(\"configureMouse\");\n        var value = option ? option(cm, repeat, event) : {};\n        if (value.unit == null) {\n            var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n            value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n        }\n        if (value.extend == null || cm.doc.extend) {\n            value.extend = cm.doc.extend || event.shiftKey;\n        }\n        if (value.addNew == null) {\n            value.addNew = mac ? event.metaKey : event.ctrlKey;\n        }\n        if (value.moveOnDrag == null) {\n            value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n        }\n        return value;\n    }\n\n    function leftButtonDown(cm, pos, repeat, event) {\n        if (ie) {\n            setTimeout(bind(ensureFocus, cm), 0);\n        } else {\n            cm.curOp.focus = activeElt();\n        }\n\n        var behavior = configureMouse(cm, repeat, event);\n\n        var sel = cm.doc.sel,\n            contained;\n        if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n            leftButtonStartDrag(cm, event, pos, behavior);\n        } else {\n            leftButtonSelect(cm, event, pos, behavior);\n        }\n    }\n\n    // Start a text drag. When it ends, see if any dragging actually\n    // happen, and treat as a click if it didn't.\n    function leftButtonStartDrag(cm, event, pos, behavior) {\n        var display = cm.display,\n            moved = false;\n        var dragEnd = operation(cm, function (e) {\n            if (webkit) {\n                display.scroller.draggable = false;\n            }\n            cm.state.draggingText = false;\n            off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n            off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n            off(display.scroller, \"dragstart\", dragStart);\n            off(display.scroller, \"drop\", dragEnd);\n            if (!moved) {\n                e_preventDefault(e);\n                if (!behavior.addNew) {\n                    extendSelection(cm.doc, pos, null, null, behavior.extend);\n                }\n                // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n                if (webkit || ie && ie_version == 9) {\n                    setTimeout(function () {\n                        display.wrapper.ownerDocument.body.focus();display.input.focus();\n                    }, 20);\n                } else {\n                    display.input.focus();\n                }\n            }\n        });\n        var mouseMove = function mouseMove(e2) {\n            moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n        };\n        var dragStart = function dragStart() {\n            return moved = true;\n        };\n        // Let the drag handler handle this.\n        if (webkit) {\n            display.scroller.draggable = true;\n        }\n        cm.state.draggingText = dragEnd;\n        dragEnd.copy = !behavior.moveOnDrag;\n        // IE's approach to draggable\n        if (display.scroller.dragDrop) {\n            display.scroller.dragDrop();\n        }\n        on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n        on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n        on(display.scroller, \"dragstart\", dragStart);\n        on(display.scroller, \"drop\", dragEnd);\n\n        delayBlurEvent(cm);\n        setTimeout(function () {\n            return display.input.focus();\n        }, 20);\n    }\n\n    function rangeForUnit(cm, pos, unit) {\n        if (unit == \"char\") {\n            return new Range(pos, pos);\n        }\n        if (unit == \"word\") {\n            return cm.findWordAt(pos);\n        }\n        if (unit == \"line\") {\n            return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n        }\n        var result = unit(cm, pos);\n        return new Range(result.from, result.to);\n    }\n\n    // Normal selection, as opposed to text dragging.\n    function leftButtonSelect(cm, event, start, behavior) {\n        var display = cm.display,\n            doc = cm.doc;\n        e_preventDefault(event);\n\n        var ourRange,\n            ourIndex,\n            startSel = doc.sel,\n            ranges = startSel.ranges;\n        if (behavior.addNew && !behavior.extend) {\n            ourIndex = doc.sel.contains(start);\n            if (ourIndex > -1) {\n                ourRange = ranges[ourIndex];\n            } else {\n                ourRange = new Range(start, start);\n            }\n        } else {\n            ourRange = doc.sel.primary();\n            ourIndex = doc.sel.primIndex;\n        }\n\n        if (behavior.unit == \"rectangle\") {\n            if (!behavior.addNew) {\n                ourRange = new Range(start, start);\n            }\n            start = posFromMouse(cm, event, true, true);\n            ourIndex = -1;\n        } else {\n            var range = rangeForUnit(cm, start, behavior.unit);\n            if (behavior.extend) {\n                ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend);\n            } else {\n                ourRange = range;\n            }\n        }\n\n        if (!behavior.addNew) {\n            ourIndex = 0;\n            setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n            startSel = doc.sel;\n        } else if (ourIndex == -1) {\n            ourIndex = ranges.length;\n            setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), { scroll: false, origin: \"*mouse\" });\n        } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n            setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), { scroll: false, origin: \"*mouse\" });\n            startSel = doc.sel;\n        } else {\n            replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n        }\n\n        var lastPos = start;\n        function extendTo(pos) {\n            if (cmp(lastPos, pos) == 0) {\n                return;\n            }\n            lastPos = pos;\n\n            if (behavior.unit == \"rectangle\") {\n                var ranges = [],\n                    tabSize = cm.options.tabSize;\n                var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n                var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n                var left = Math.min(startCol, posCol),\n                    right = Math.max(startCol, posCol);\n                for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n                    var text = getLine(doc, line).text,\n                        leftPos = findColumn(text, left, tabSize);\n                    if (left == right) {\n                        ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n                    } else if (text.length > leftPos) {\n                        ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n                    }\n                }\n                if (!ranges.length) {\n                    ranges.push(new Range(start, start));\n                }\n                setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), { origin: \"*mouse\", scroll: false });\n                cm.scrollIntoView(pos);\n            } else {\n                var oldRange = ourRange;\n                var range = rangeForUnit(cm, pos, behavior.unit);\n                var anchor = oldRange.anchor,\n                    head;\n                if (cmp(range.anchor, anchor) > 0) {\n                    head = range.head;\n                    anchor = minPos(oldRange.from(), range.anchor);\n                } else {\n                    head = range.anchor;\n                    anchor = maxPos(oldRange.to(), range.head);\n                }\n                var ranges$1 = startSel.ranges.slice(0);\n                ranges$1[ourIndex] = bidiSimplify(cm, new Range(_clipPos(doc, anchor), head));\n                setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n            }\n        }\n\n        var editorSize = display.wrapper.getBoundingClientRect();\n        // Used to ensure timeout re-tries don't fire when another extend\n        // happened in the meantime (clearTimeout isn't reliable -- at\n        // least on Chrome, the timeouts still happen even when cleared,\n        // if the clear happens after their scheduled firing time).\n        var counter = 0;\n\n        function extend(e) {\n            var curCount = ++counter;\n            var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n            if (!cur) {\n                return;\n            }\n            if (cmp(cur, lastPos) != 0) {\n                cm.curOp.focus = activeElt();\n                extendTo(cur);\n                var visible = visibleLines(display, doc);\n                if (cur.line >= visible.to || cur.line < visible.from) {\n                    setTimeout(operation(cm, function () {\n                        if (counter == curCount) {\n                            extend(e);\n                        }\n                    }), 150);\n                }\n            } else {\n                var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n                if (outside) {\n                    setTimeout(operation(cm, function () {\n                        if (counter != curCount) {\n                            return;\n                        }\n                        display.scroller.scrollTop += outside;\n                        extend(e);\n                    }), 50);\n                }\n            }\n        }\n\n        function done(e) {\n            cm.state.selectingText = false;\n            counter = Infinity;\n            // If e is null or undefined we interpret this as someone trying\n            // to explicitly cancel the selection rather than the user\n            // letting go of the mouse button.\n            if (e) {\n                e_preventDefault(e);\n                display.input.focus();\n            }\n            off(display.wrapper.ownerDocument, \"mousemove\", move);\n            off(display.wrapper.ownerDocument, \"mouseup\", up);\n            doc.history.lastSelOrigin = null;\n        }\n\n        var move = operation(cm, function (e) {\n            if (e.buttons === 0 || !e_button(e)) {\n                done(e);\n            } else {\n                extend(e);\n            }\n        });\n        var up = operation(cm, done);\n        cm.state.selectingText = up;\n        on(display.wrapper.ownerDocument, \"mousemove\", move);\n        on(display.wrapper.ownerDocument, \"mouseup\", up);\n    }\n\n    // Used when mouse-selecting to adjust the anchor to the proper side\n    // of a bidi jump depending on the visual position of the head.\n    function bidiSimplify(cm, range) {\n        var anchor = range.anchor;\n        var head = range.head;\n        var anchorLine = getLine(cm.doc, anchor.line);\n        if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {\n            return range;\n        }\n        var order = getOrder(anchorLine);\n        if (!order) {\n            return range;\n        }\n        var index = getBidiPartAt(order, anchor.ch, anchor.sticky),\n            part = order[index];\n        if (part.from != anchor.ch && part.to != anchor.ch) {\n            return range;\n        }\n        var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);\n        if (boundary == 0 || boundary == order.length) {\n            return range;\n        }\n\n        // Compute the relative visual position of the head compared to the\n        // anchor (<0 is to the left, >0 to the right)\n        var leftSide;\n        if (head.line != anchor.line) {\n            leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n        } else {\n            var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n            var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n            if (headIndex == boundary - 1 || headIndex == boundary) {\n                leftSide = dir < 0;\n            } else {\n                leftSide = dir > 0;\n            }\n        }\n\n        var usePart = order[boundary + (leftSide ? -1 : 0)];\n        var from = leftSide == (usePart.level == 1);\n        var ch = from ? usePart.from : usePart.to,\n            sticky = from ? \"after\" : \"before\";\n        return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head);\n    }\n\n    // Determines whether an event happened in the gutter, and fires the\n    // handlers for the corresponding event.\n    function gutterEvent(cm, e, type, prevent) {\n        var mX, mY;\n        if (e.touches) {\n            mX = e.touches[0].clientX;\n            mY = e.touches[0].clientY;\n        } else {\n            try {\n                mX = e.clientX;mY = e.clientY;\n            } catch (e) {\n                return false;\n            }\n        }\n        if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n            return false;\n        }\n        if (prevent) {\n            e_preventDefault(e);\n        }\n\n        var display = cm.display;\n        var lineBox = display.lineDiv.getBoundingClientRect();\n\n        if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n            return e_defaultPrevented(e);\n        }\n        mY -= lineBox.top - display.viewOffset;\n\n        for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n            var g = display.gutters.childNodes[i];\n            if (g && g.getBoundingClientRect().right >= mX) {\n                var line = _lineAtHeight(cm.doc, mY);\n                var gutter = cm.display.gutterSpecs[i];\n                signal(cm, type, cm, line, gutter.className, e);\n                return e_defaultPrevented(e);\n            }\n        }\n    }\n\n    function clickInGutter(cm, e) {\n        return gutterEvent(cm, e, \"gutterClick\", true);\n    }\n\n    // CONTEXT MENU HANDLING\n\n    // To make the context menu work, we need to briefly unhide the\n    // textarea (making it as unobtrusive as possible) to let the\n    // right-click take effect on it.\n    function onContextMenu(cm, e) {\n        if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n            return;\n        }\n        if (signalDOMEvent(cm, e, \"contextmenu\")) {\n            return;\n        }\n        if (!captureRightClick) {\n            cm.display.input.onContextMenu(e);\n        }\n    }\n\n    function contextMenuInGutter(cm, e) {\n        if (!hasHandler(cm, \"gutterContextMenu\")) {\n            return false;\n        }\n        return gutterEvent(cm, e, \"gutterContextMenu\", false);\n    }\n\n    function themeChanged(cm) {\n        cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n        clearCaches(cm);\n    }\n\n    var Init = { toString: function toString() {\n            return \"CodeMirror.Init\";\n        } };\n\n    var defaults$$1 = {};\n    var optionHandlers = {};\n\n    function defineOptions(CodeMirror) {\n        var optionHandlers = CodeMirror.optionHandlers;\n\n        function option(name, deflt, handle, notOnInit) {\n            CodeMirror.defaults[name] = deflt;\n            if (handle) {\n                optionHandlers[name] = notOnInit ? function (cm, val, old) {\n                    if (old != Init) {\n                        handle(cm, val, old);\n                    }\n                } : handle;\n            }\n        }\n\n        CodeMirror.defineOption = option;\n\n        // Passed to option handlers when there is no old value.\n        CodeMirror.Init = Init;\n\n        // These two are, on init, called from the constructor because they\n        // have to be initialized before the editor can start at all.\n        option(\"value\", \"\", function (cm, val) {\n            return cm.setValue(val);\n        }, true);\n        option(\"mode\", null, function (cm, val) {\n            cm.doc.modeOption = val;\n            loadMode(cm);\n        }, true);\n\n        option(\"indentUnit\", 2, loadMode, true);\n        option(\"indentWithTabs\", false);\n        option(\"smartIndent\", true);\n        option(\"tabSize\", 4, function (cm) {\n            resetModeState(cm);\n            clearCaches(cm);\n            regChange(cm);\n        }, true);\n\n        option(\"lineSeparator\", null, function (cm, val) {\n            cm.doc.lineSep = val;\n            if (!val) {\n                return;\n            }\n            var newBreaks = [],\n                lineNo = cm.doc.first;\n            cm.doc.iter(function (line) {\n                for (var pos = 0;;) {\n                    var found = line.text.indexOf(val, pos);\n                    if (found == -1) {\n                        break;\n                    }\n                    pos = found + val.length;\n                    newBreaks.push(Pos(lineNo, found));\n                }\n                lineNo++;\n            });\n            for (var i = newBreaks.length - 1; i >= 0; i--) {\n                _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n            }\n        });\n        option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n            cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n            if (old != Init) {\n                cm.refresh();\n            }\n        });\n        option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n            return cm.refresh();\n        }, true);\n        option(\"electricChars\", true);\n        option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n            throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n        }, true);\n        option(\"spellcheck\", false, function (cm, val) {\n            return cm.getInputField().spellcheck = val;\n        }, true);\n        option(\"autocorrect\", false, function (cm, val) {\n            return cm.getInputField().autocorrect = val;\n        }, true);\n        option(\"autocapitalize\", false, function (cm, val) {\n            return cm.getInputField().autocapitalize = val;\n        }, true);\n        option(\"rtlMoveVisually\", !windows);\n        option(\"wholeLineUpdateBefore\", true);\n\n        option(\"theme\", \"default\", function (cm) {\n            themeChanged(cm);\n            updateGutters(cm);\n        }, true);\n        option(\"keyMap\", \"default\", function (cm, val, old) {\n            var next = getKeyMap(val);\n            var prev = old != Init && getKeyMap(old);\n            if (prev && prev.detach) {\n                prev.detach(cm, next);\n            }\n            if (next.attach) {\n                next.attach(cm, prev || null);\n            }\n        });\n        option(\"extraKeys\", null);\n        option(\"configureMouse\", null);\n\n        option(\"lineWrapping\", false, wrappingChanged, true);\n        option(\"gutters\", [], function (cm, val) {\n            cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n            updateGutters(cm);\n        }, true);\n        option(\"fixedGutter\", true, function (cm, val) {\n            cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n            cm.refresh();\n        }, true);\n        option(\"coverGutterNextToScrollbar\", false, function (cm) {\n            return updateScrollbars(cm);\n        }, true);\n        option(\"scrollbarStyle\", \"native\", function (cm) {\n            initScrollbars(cm);\n            updateScrollbars(cm);\n            cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n            cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n        }, true);\n        option(\"lineNumbers\", false, function (cm, val) {\n            cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n            updateGutters(cm);\n        }, true);\n        option(\"firstLineNumber\", 1, updateGutters, true);\n        option(\"lineNumberFormatter\", function (integer) {\n            return integer;\n        }, updateGutters, true);\n        option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n        option(\"resetSelectionOnContextMenu\", true);\n        option(\"lineWiseCopyCut\", true);\n        option(\"pasteLinesPerSelection\", true);\n        option(\"selectionsMayTouch\", false);\n\n        option(\"readOnly\", false, function (cm, val) {\n            if (val == \"nocursor\") {\n                onBlur(cm);\n                cm.display.input.blur();\n            }\n            cm.display.input.readOnlyChanged(val);\n        });\n        option(\"disableInput\", false, function (cm, val) {\n            if (!val) {\n                cm.display.input.reset();\n            }\n        }, true);\n        option(\"dragDrop\", true, dragDropChanged);\n        option(\"allowDropFileTypes\", null);\n\n        option(\"cursorBlinkRate\", 530);\n        option(\"cursorScrollMargin\", 0);\n        option(\"cursorHeight\", 1, updateSelection, true);\n        option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n        option(\"workTime\", 100);\n        option(\"workDelay\", 100);\n        option(\"flattenSpans\", true, resetModeState, true);\n        option(\"addModeClass\", false, resetModeState, true);\n        option(\"pollInterval\", 100);\n        option(\"undoDepth\", 200, function (cm, val) {\n            return cm.doc.history.undoDepth = val;\n        });\n        option(\"historyEventDelay\", 1250);\n        option(\"viewportMargin\", 10, function (cm) {\n            return cm.refresh();\n        }, true);\n        option(\"maxHighlightLength\", 10000, resetModeState, true);\n        option(\"moveInputWithCursor\", true, function (cm, val) {\n            if (!val) {\n                cm.display.input.resetPosition();\n            }\n        });\n\n        option(\"tabindex\", null, function (cm, val) {\n            return cm.display.input.getField().tabIndex = val || \"\";\n        });\n        option(\"autofocus\", null);\n        option(\"direction\", \"ltr\", function (cm, val) {\n            return cm.doc.setDirection(val);\n        }, true);\n        option(\"phrases\", null);\n    }\n\n    function dragDropChanged(cm, value, old) {\n        var wasOn = old && old != Init;\n        if (!value != !wasOn) {\n            var funcs = cm.display.dragFunctions;\n            var toggle = value ? on : off;\n            toggle(cm.display.scroller, \"dragstart\", funcs.start);\n            toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n            toggle(cm.display.scroller, \"dragover\", funcs.over);\n            toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n            toggle(cm.display.scroller, \"drop\", funcs.drop);\n        }\n    }\n\n    function wrappingChanged(cm) {\n        if (cm.options.lineWrapping) {\n            addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            cm.display.sizer.style.minWidth = \"\";\n            cm.display.sizerWidth = null;\n        } else {\n            rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            findMaxLine(cm);\n        }\n        estimateLineHeights(cm);\n        regChange(cm);\n        clearCaches(cm);\n        setTimeout(function () {\n            return updateScrollbars(cm);\n        }, 100);\n    }\n\n    // A CodeMirror instance represents an editor. This is the object\n    // that user code is usually dealing with.\n\n    function CodeMirror(place, options) {\n        var this$1 = this;\n\n        if (!(this instanceof CodeMirror)) {\n            return new CodeMirror(place, options);\n        }\n\n        this.options = options = options ? copyObj(options) : {};\n        // Determine effective options based on given values and defaults.\n        copyObj(defaults$$1, options, false);\n\n        var doc = options.value;\n        if (typeof doc == \"string\") {\n            doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n        } else if (options.mode) {\n            doc.modeOption = options.mode;\n        }\n        this.doc = doc;\n\n        var input = new CodeMirror.inputStyles[options.inputStyle](this);\n        var display = this.display = new Display(place, doc, input, options);\n        display.wrapper.CodeMirror = this;\n        themeChanged(this);\n        if (options.lineWrapping) {\n            this.display.wrapper.className += \" CodeMirror-wrap\";\n        }\n        initScrollbars(this);\n\n        this.state = {\n            keyMaps: [], // stores maps added by addKeyMap\n            overlays: [], // highlighting overlays, as added by addOverlay\n            modeGen: 0, // bumped when mode/overlay changes, used to invalidate highlighting info\n            overwrite: false,\n            delayingBlurEvent: false,\n            focused: false,\n            suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n            pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n            selectingText: false,\n            draggingText: false,\n            highlight: new Delayed(), // stores highlight worker timeout\n            keySeq: null, // Unfinished key sequence\n            specialChars: null\n        };\n\n        if (options.autofocus && !mobile) {\n            display.input.focus();\n        }\n\n        // Override magic textarea content restore that IE sometimes does\n        // on our hidden textarea on reload\n        if (ie && ie_version < 11) {\n            setTimeout(function () {\n                return this$1.display.input.reset(true);\n            }, 20);\n        }\n\n        registerEventHandlers(this);\n        ensureGlobalHandlers();\n\n        _startOperation(this);\n        this.curOp.forceUpdate = true;\n        attachDoc(this, doc);\n\n        if (options.autofocus && !mobile || this.hasFocus()) {\n            setTimeout(bind(onFocus, this), 20);\n        } else {\n            onBlur(this);\n        }\n\n        for (var opt in optionHandlers) {\n            if (optionHandlers.hasOwnProperty(opt)) {\n                optionHandlers[opt](this, options[opt], Init);\n            }\n        }\n        maybeUpdateLineNumberWidth(this);\n        if (options.finishInit) {\n            options.finishInit(this);\n        }\n        for (var i = 0; i < initHooks.length; ++i) {\n            initHooks[i](this);\n        }\n        _endOperation(this);\n        // Suppress optimizelegibility in Webkit, since it breaks text\n        // measuring on line wrapping boundaries.\n        if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n            display.lineDiv.style.textRendering = \"auto\";\n        }\n    }\n\n    // The default configuration options.\n    CodeMirror.defaults = defaults$$1;\n    // Functions to run when options are changed.\n    CodeMirror.optionHandlers = optionHandlers;\n\n    // Attach the necessary event handlers when initializing the editor\n    function registerEventHandlers(cm) {\n        var d = cm.display;\n        on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n        // Older IE's will not fire a second mousedown for a double click\n        if (ie && ie_version < 11) {\n            on(d.scroller, \"dblclick\", operation(cm, function (e) {\n                if (signalDOMEvent(cm, e)) {\n                    return;\n                }\n                var pos = posFromMouse(cm, e);\n                if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n                    return;\n                }\n                e_preventDefault(e);\n                var word = cm.findWordAt(pos);\n                extendSelection(cm.doc, word.anchor, word.head);\n            }));\n        } else {\n            on(d.scroller, \"dblclick\", function (e) {\n                return signalDOMEvent(cm, e) || e_preventDefault(e);\n            });\n        }\n        // Some browsers fire contextmenu *after* opening the menu, at\n        // which point we can't mess with it anymore. Context menu is\n        // handled in onMouseDown for these browsers.\n        on(d.scroller, \"contextmenu\", function (e) {\n            return onContextMenu(cm, e);\n        });\n        on(d.input.getField(), \"contextmenu\", function (e) {\n            if (!d.scroller.contains(e.target)) {\n                onContextMenu(cm, e);\n            }\n        });\n\n        // Used to suppress mouse event handling when a touch happens\n        var touchFinished,\n            prevTouch = { end: 0 };\n        function finishTouch() {\n            if (d.activeTouch) {\n                touchFinished = setTimeout(function () {\n                    return d.activeTouch = null;\n                }, 1000);\n                prevTouch = d.activeTouch;\n                prevTouch.end = +new Date();\n            }\n        }\n        function isMouseLikeTouchEvent(e) {\n            if (e.touches.length != 1) {\n                return false;\n            }\n            var touch = e.touches[0];\n            return touch.radiusX <= 1 && touch.radiusY <= 1;\n        }\n        function farAway(touch, other) {\n            if (other.left == null) {\n                return true;\n            }\n            var dx = other.left - touch.left,\n                dy = other.top - touch.top;\n            return dx * dx + dy * dy > 20 * 20;\n        }\n        on(d.scroller, \"touchstart\", function (e) {\n            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n                d.input.ensurePolled();\n                clearTimeout(touchFinished);\n                var now = +new Date();\n                d.activeTouch = { start: now, moved: false,\n                    prev: now - prevTouch.end <= 300 ? prevTouch : null };\n                if (e.touches.length == 1) {\n                    d.activeTouch.left = e.touches[0].pageX;\n                    d.activeTouch.top = e.touches[0].pageY;\n                }\n            }\n        });\n        on(d.scroller, \"touchmove\", function () {\n            if (d.activeTouch) {\n                d.activeTouch.moved = true;\n            }\n        });\n        on(d.scroller, \"touchend\", function (e) {\n            var touch = d.activeTouch;\n            if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n                var pos = cm.coordsChar(d.activeTouch, \"page\"),\n                    range;\n                if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n                    {\n                        range = new Range(pos, pos);\n                    } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n                    {\n                        range = cm.findWordAt(pos);\n                    } else // Triple tap\n                    {\n                        range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n                    }\n                cm.setSelection(range.anchor, range.head);\n                cm.focus();\n                e_preventDefault(e);\n            }\n            finishTouch();\n        });\n        on(d.scroller, \"touchcancel\", finishTouch);\n\n        // Sync scrolling between fake scrollbars and real scrollable\n        // area, ensure viewport is updated when scrolling.\n        on(d.scroller, \"scroll\", function () {\n            if (d.scroller.clientHeight) {\n                updateScrollTop(cm, d.scroller.scrollTop);\n                setScrollLeft(cm, d.scroller.scrollLeft, true);\n                signal(cm, \"scroll\", cm);\n            }\n        });\n\n        // Listen to wheel events in order to try and update the viewport on time.\n        on(d.scroller, \"mousewheel\", function (e) {\n            return onScrollWheel(cm, e);\n        });\n        on(d.scroller, \"DOMMouseScroll\", function (e) {\n            return onScrollWheel(cm, e);\n        });\n\n        // Prevent wrapper from ever scrolling\n        on(d.wrapper, \"scroll\", function () {\n            return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n        });\n\n        d.dragFunctions = {\n            enter: function enter(e) {\n                if (!signalDOMEvent(cm, e)) {\n                    e_stop(e);\n                }\n            },\n            over: function over(e) {\n                if (!signalDOMEvent(cm, e)) {\n                    onDragOver(cm, e);e_stop(e);\n                }\n            },\n            start: function start(e) {\n                return onDragStart(cm, e);\n            },\n            drop: operation(cm, onDrop),\n            leave: function leave(e) {\n                if (!signalDOMEvent(cm, e)) {\n                    clearDragCursor(cm);\n                }\n            }\n        };\n\n        var inp = d.input.getField();\n        on(inp, \"keyup\", function (e) {\n            return onKeyUp.call(cm, e);\n        });\n        on(inp, \"keydown\", operation(cm, onKeyDown));\n        on(inp, \"keypress\", operation(cm, onKeyPress));\n        on(inp, \"focus\", function (e) {\n            return onFocus(cm, e);\n        });\n        on(inp, \"blur\", function (e) {\n            return onBlur(cm, e);\n        });\n    }\n\n    var initHooks = [];\n    CodeMirror.defineInitHook = function (f) {\n        return initHooks.push(f);\n    };\n\n    // Indent the given line. The how parameter can be \"smart\",\n    // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n    // (typically set to true for forced single-line indents), empty\n    // lines are not indented, and places where the mode returns Pass\n    // are left alone.\n    function indentLine(cm, n, how, aggressive) {\n        var doc = cm.doc,\n            state;\n        if (how == null) {\n            how = \"add\";\n        }\n        if (how == \"smart\") {\n            // Fall back to \"prev\" when the mode doesn't have an indentation\n            // method.\n            if (!doc.mode.indent) {\n                how = \"prev\";\n            } else {\n                state = getContextBefore(cm, n).state;\n            }\n        }\n\n        var tabSize = cm.options.tabSize;\n        var line = getLine(doc, n),\n            curSpace = countColumn(line.text, null, tabSize);\n        if (line.stateAfter) {\n            line.stateAfter = null;\n        }\n        var curSpaceString = line.text.match(/^\\s*/)[0],\n            indentation;\n        if (!aggressive && !/\\S/.test(line.text)) {\n            indentation = 0;\n            how = \"not\";\n        } else if (how == \"smart\") {\n            indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n            if (indentation == Pass || indentation > 150) {\n                if (!aggressive) {\n                    return;\n                }\n                how = \"prev\";\n            }\n        }\n        if (how == \"prev\") {\n            if (n > doc.first) {\n                indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n            } else {\n                indentation = 0;\n            }\n        } else if (how == \"add\") {\n            indentation = curSpace + cm.options.indentUnit;\n        } else if (how == \"subtract\") {\n            indentation = curSpace - cm.options.indentUnit;\n        } else if (typeof how == \"number\") {\n            indentation = curSpace + how;\n        }\n        indentation = Math.max(0, indentation);\n\n        var indentString = \"\",\n            pos = 0;\n        if (cm.options.indentWithTabs) {\n            for (var i = Math.floor(indentation / tabSize); i; --i) {\n                pos += tabSize;indentString += \"\\t\";\n            }\n        }\n        if (pos < indentation) {\n            indentString += spaceStr(indentation - pos);\n        }\n\n        if (indentString != curSpaceString) {\n            _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n            line.stateAfter = null;\n            return true;\n        } else {\n            // Ensure that, if the cursor was in the whitespace at the start\n            // of the line, it is moved to the end of that space.\n            for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n                var range = doc.sel.ranges[i$1];\n                if (range.head.line == n && range.head.ch < curSpaceString.length) {\n                    var pos$1 = Pos(n, curSpaceString.length);\n                    replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n                    break;\n                }\n            }\n        }\n    }\n\n    // This will be set to a {lineWise: bool, text: [string]} object, so\n    // that, when pasting, we know what kind of selections the copied\n    // text was made out of.\n    var lastCopied = null;\n\n    function setLastCopied(newLastCopied) {\n        lastCopied = newLastCopied;\n    }\n\n    function applyTextInput(cm, inserted, deleted, sel, origin) {\n        var doc = cm.doc;\n        cm.display.shift = false;\n        if (!sel) {\n            sel = doc.sel;\n        }\n\n        var recent = +new Date() - 200;\n        var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n        var textLines = splitLinesAuto(inserted),\n            multiPaste = null;\n        // When pasting N lines into N selections, insert one line per selection\n        if (paste && sel.ranges.length > 1) {\n            if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n                if (sel.ranges.length % lastCopied.text.length == 0) {\n                    multiPaste = [];\n                    for (var i = 0; i < lastCopied.text.length; i++) {\n                        multiPaste.push(doc.splitLines(lastCopied.text[i]));\n                    }\n                }\n            } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n                multiPaste = map(textLines, function (l) {\n                    return [l];\n                });\n            }\n        }\n\n        var updateInput = cm.curOp.updateInput;\n        // Normal behavior is to insert the new text into every selection\n        for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n            var range = sel.ranges[i$1];\n            var from = range.from(),\n                to = range.to();\n            if (range.empty()) {\n                if (deleted && deleted > 0) // Handle deletion\n                    {\n                        from = Pos(from.line, from.ch - deleted);\n                    } else if (cm.state.overwrite && !paste) // Handle overwrite\n                    {\n                        to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n                    } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n                    from = to = Pos(from.line, 0);\n                }\n            }\n            var changeEvent = { from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\") };\n            makeChange(cm.doc, changeEvent);\n            signalLater(cm, \"inputRead\", cm, changeEvent);\n        }\n        if (inserted && !paste) {\n            triggerElectric(cm, inserted);\n        }\n\n        ensureCursorVisible(cm);\n        if (cm.curOp.updateInput < 2) {\n            cm.curOp.updateInput = updateInput;\n        }\n        cm.curOp.typing = true;\n        cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n    }\n\n    function handlePaste(e, cm) {\n        var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n        if (pasted) {\n            e.preventDefault();\n            if (!cm.isReadOnly() && !cm.options.disableInput) {\n                runInOp(cm, function () {\n                    return applyTextInput(cm, pasted, 0, null, \"paste\");\n                });\n            }\n            return true;\n        }\n    }\n\n    function triggerElectric(cm, inserted) {\n        // When an 'electric' character is inserted, immediately trigger a reindent\n        if (!cm.options.electricChars || !cm.options.smartIndent) {\n            return;\n        }\n        var sel = cm.doc.sel;\n\n        for (var i = sel.ranges.length - 1; i >= 0; i--) {\n            var range = sel.ranges[i];\n            if (range.head.ch > 100 || i && sel.ranges[i - 1].head.line == range.head.line) {\n                continue;\n            }\n            var mode = cm.getModeAt(range.head);\n            var indented = false;\n            if (mode.electricChars) {\n                for (var j = 0; j < mode.electricChars.length; j++) {\n                    if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n                        indented = indentLine(cm, range.head.line, \"smart\");\n                        break;\n                    }\n                }\n            } else if (mode.electricInput) {\n                if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch))) {\n                    indented = indentLine(cm, range.head.line, \"smart\");\n                }\n            }\n            if (indented) {\n                signalLater(cm, \"electricInput\", cm, range.head.line);\n            }\n        }\n    }\n\n    function copyableRanges(cm) {\n        var text = [],\n            ranges = [];\n        for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n            var line = cm.doc.sel.ranges[i].head.line;\n            var lineRange = { anchor: Pos(line, 0), head: Pos(line + 1, 0) };\n            ranges.push(lineRange);\n            text.push(cm.getRange(lineRange.anchor, lineRange.head));\n        }\n        return { text: text, ranges: ranges };\n    }\n\n    function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n        field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n        field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n        field.setAttribute(\"spellcheck\", !!spellcheck);\n    }\n\n    function hiddenTextarea() {\n        var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n        var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n        // The textarea is kept positioned near the cursor to prevent the\n        // fact that it'll be scrolled into view on input from scrolling\n        // our fake cursor out of view. On webkit, when wrap=off, paste is\n        // very slow. So make the area wide instead.\n        if (webkit) {\n            te.style.width = \"1000px\";\n        } else {\n            te.setAttribute(\"wrap\", \"off\");\n        }\n        // If border: 0; -- iOS fails to open keyboard (issue #1287)\n        if (ios) {\n            te.style.border = \"1px solid black\";\n        }\n        disableBrowserMagic(te);\n        return div;\n    }\n\n    // The publicly visible API. Note that methodOp(f) means\n    // 'wrap f in an operation, performed on its `this` parameter'.\n\n    // This is not the complete set of editor methods. Most of the\n    // methods defined on the Doc type are also injected into\n    // CodeMirror.prototype, for backwards compatibility and\n    // convenience.\n\n    function addEditorMethods(CodeMirror) {\n        var optionHandlers = CodeMirror.optionHandlers;\n\n        var helpers = CodeMirror.helpers = {};\n\n        CodeMirror.prototype = {\n            constructor: CodeMirror,\n            focus: function focus() {\n                window.focus();this.display.input.focus();\n            },\n\n            setOption: function setOption(option, value) {\n                var options = this.options,\n                    old = options[option];\n                if (options[option] == value && option != \"mode\") {\n                    return;\n                }\n                options[option] = value;\n                if (optionHandlers.hasOwnProperty(option)) {\n                    operation(this, optionHandlers[option])(this, value, old);\n                }\n                signal(this, \"optionChange\", this, option);\n            },\n\n            getOption: function getOption(option) {\n                return this.options[option];\n            },\n            getDoc: function getDoc() {\n                return this.doc;\n            },\n\n            addKeyMap: function addKeyMap(map, bottom) {\n                this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n            },\n            removeKeyMap: function removeKeyMap(map) {\n                var maps = this.state.keyMaps;\n                for (var i = 0; i < maps.length; ++i) {\n                    if (maps[i] == map || maps[i].name == map) {\n                        maps.splice(i, 1);\n                        return true;\n                    }\n                }\n            },\n\n            addOverlay: methodOp(function (spec, options) {\n                var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n                if (mode.startState) {\n                    throw new Error(\"Overlays may not be stateful.\");\n                }\n                insertSorted(this.state.overlays, { mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                    priority: options && options.priority || 0 }, function (overlay) {\n                    return overlay.priority;\n                });\n                this.state.modeGen++;\n                regChange(this);\n            }),\n            removeOverlay: methodOp(function (spec) {\n                var overlays = this.state.overlays;\n                for (var i = 0; i < overlays.length; ++i) {\n                    var cur = overlays[i].modeSpec;\n                    if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n                        overlays.splice(i, 1);\n                        this.state.modeGen++;\n                        regChange(this);\n                        return;\n                    }\n                }\n            }),\n\n            indentLine: methodOp(function (n, dir, aggressive) {\n                if (typeof dir != \"string\" && typeof dir != \"number\") {\n                    if (dir == null) {\n                        dir = this.options.smartIndent ? \"smart\" : \"prev\";\n                    } else {\n                        dir = dir ? \"add\" : \"subtract\";\n                    }\n                }\n                if (isLine(this.doc, n)) {\n                    indentLine(this, n, dir, aggressive);\n                }\n            }),\n            indentSelection: methodOp(function (how) {\n                var ranges = this.doc.sel.ranges,\n                    end = -1;\n                for (var i = 0; i < ranges.length; i++) {\n                    var range = ranges[i];\n                    if (!range.empty()) {\n                        var from = range.from(),\n                            to = range.to();\n                        var start = Math.max(end, from.line);\n                        end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n                        for (var j = start; j < end; ++j) {\n                            indentLine(this, j, how);\n                        }\n                        var newRanges = this.doc.sel.ranges;\n                        if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n                            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n                        }\n                    } else if (range.head.line > end) {\n                        indentLine(this, range.head.line, how, true);\n                        end = range.head.line;\n                        if (i == this.doc.sel.primIndex) {\n                            ensureCursorVisible(this);\n                        }\n                    }\n                }\n            }),\n\n            // Fetch the parser token for a given character. Useful for hacks\n            // that want to inspect the mode state (say, for completion).\n            getTokenAt: function getTokenAt(pos, precise) {\n                return takeToken(this, pos, precise);\n            },\n\n            getLineTokens: function getLineTokens(line, precise) {\n                return takeToken(this, Pos(line), precise, true);\n            },\n\n            getTokenTypeAt: function getTokenTypeAt(pos) {\n                pos = _clipPos(this.doc, pos);\n                var styles = getLineStyles(this, getLine(this.doc, pos.line));\n                var before = 0,\n                    after = (styles.length - 1) / 2,\n                    ch = pos.ch;\n                var type;\n                if (ch == 0) {\n                    type = styles[2];\n                } else {\n                    for (;;) {\n                        var mid = before + after >> 1;\n                        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n                            after = mid;\n                        } else if (styles[mid * 2 + 1] < ch) {\n                            before = mid + 1;\n                        } else {\n                            type = styles[mid * 2 + 2];break;\n                        }\n                    }\n                }\n                var cut = type ? type.indexOf(\"overlay \") : -1;\n                return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n            },\n\n            getModeAt: function getModeAt(pos) {\n                var mode = this.doc.mode;\n                if (!mode.innerMode) {\n                    return mode;\n                }\n                return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n            },\n\n            getHelper: function getHelper(pos, type) {\n                return this.getHelpers(pos, type)[0];\n            },\n\n            getHelpers: function getHelpers(pos, type) {\n                var found = [];\n                if (!helpers.hasOwnProperty(type)) {\n                    return found;\n                }\n                var help = helpers[type],\n                    mode = this.getModeAt(pos);\n                if (typeof mode[type] == \"string\") {\n                    if (help[mode[type]]) {\n                        found.push(help[mode[type]]);\n                    }\n                } else if (mode[type]) {\n                    for (var i = 0; i < mode[type].length; i++) {\n                        var val = help[mode[type][i]];\n                        if (val) {\n                            found.push(val);\n                        }\n                    }\n                } else if (mode.helperType && help[mode.helperType]) {\n                    found.push(help[mode.helperType]);\n                } else if (help[mode.name]) {\n                    found.push(help[mode.name]);\n                }\n                for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n                    var cur = help._global[i$1];\n                    if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {\n                        found.push(cur.val);\n                    }\n                }\n                return found;\n            },\n\n            getStateAfter: function getStateAfter(line, precise) {\n                var doc = this.doc;\n                line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n                return getContextBefore(this, line + 1, precise).state;\n            },\n\n            cursorCoords: function cursorCoords(start, mode) {\n                var pos,\n                    range = this.doc.sel.primary();\n                if (start == null) {\n                    pos = range.head;\n                } else if ((typeof start === \"undefined\" ? \"undefined\" : _typeof(start)) == \"object\") {\n                    pos = _clipPos(this.doc, start);\n                } else {\n                    pos = start ? range.from() : range.to();\n                }\n                return _cursorCoords(this, pos, mode || \"page\");\n            },\n\n            charCoords: function charCoords(pos, mode) {\n                return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n            },\n\n            coordsChar: function coordsChar(coords, mode) {\n                coords = fromCoordSystem(this, coords, mode || \"page\");\n                return _coordsChar(this, coords.left, coords.top);\n            },\n\n            lineAtHeight: function lineAtHeight(height, mode) {\n                height = fromCoordSystem(this, { top: height, left: 0 }, mode || \"page\").top;\n                return _lineAtHeight(this.doc, height + this.display.viewOffset);\n            },\n            heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n                var end = false,\n                    lineObj;\n                if (typeof line == \"number\") {\n                    var last = this.doc.first + this.doc.size - 1;\n                    if (line < this.doc.first) {\n                        line = this.doc.first;\n                    } else if (line > last) {\n                        line = last;end = true;\n                    }\n                    lineObj = getLine(this.doc, line);\n                } else {\n                    lineObj = line;\n                }\n                return intoCoordSystem(this, lineObj, { top: 0, left: 0 }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n            },\n\n            defaultTextHeight: function defaultTextHeight() {\n                return textHeight(this.display);\n            },\n            defaultCharWidth: function defaultCharWidth() {\n                return charWidth(this.display);\n            },\n\n            getViewport: function getViewport() {\n                return { from: this.display.viewFrom, to: this.display.viewTo };\n            },\n\n            addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n                var display = this.display;\n                pos = _cursorCoords(this, _clipPos(this.doc, pos));\n                var top = pos.bottom,\n                    left = pos.left;\n                node.style.position = \"absolute\";\n                node.setAttribute(\"cm-ignore-events\", \"true\");\n                this.display.input.setUneditable(node);\n                display.sizer.appendChild(node);\n                if (vert == \"over\") {\n                    top = pos.top;\n                } else if (vert == \"above\" || vert == \"near\") {\n                    var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n                        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n                    // Default to positioning above (if specified and possible); otherwise default to positioning below\n                    if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n                        top = pos.top - node.offsetHeight;\n                    } else if (pos.bottom + node.offsetHeight <= vspace) {\n                        top = pos.bottom;\n                    }\n                    if (left + node.offsetWidth > hspace) {\n                        left = hspace - node.offsetWidth;\n                    }\n                }\n                node.style.top = top + \"px\";\n                node.style.left = node.style.right = \"\";\n                if (horiz == \"right\") {\n                    left = display.sizer.clientWidth - node.offsetWidth;\n                    node.style.right = \"0px\";\n                } else {\n                    if (horiz == \"left\") {\n                        left = 0;\n                    } else if (horiz == \"middle\") {\n                        left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n                    }\n                    node.style.left = left + \"px\";\n                }\n                if (scroll) {\n                    scrollIntoView(this, { left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight });\n                }\n            },\n\n            triggerOnKeyDown: methodOp(onKeyDown),\n            triggerOnKeyPress: methodOp(onKeyPress),\n            triggerOnKeyUp: onKeyUp,\n            triggerOnMouseDown: methodOp(onMouseDown),\n\n            execCommand: function execCommand(cmd) {\n                if (commands.hasOwnProperty(cmd)) {\n                    return commands[cmd].call(null, this);\n                }\n            },\n\n            triggerElectric: methodOp(function (text) {\n                triggerElectric(this, text);\n            }),\n\n            findPosH: function findPosH(from, amount, unit, visually) {\n                var dir = 1;\n                if (amount < 0) {\n                    dir = -1;amount = -amount;\n                }\n                var cur = _clipPos(this.doc, from);\n                for (var i = 0; i < amount; ++i) {\n                    cur = _findPosH(this.doc, cur, dir, unit, visually);\n                    if (cur.hitSide) {\n                        break;\n                    }\n                }\n                return cur;\n            },\n\n            moveH: methodOp(function (dir, unit) {\n                var this$1 = this;\n\n                this.extendSelectionsBy(function (range) {\n                    if (this$1.display.shift || this$1.doc.extend || range.empty()) {\n                        return _findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually);\n                    } else {\n                        return dir < 0 ? range.from() : range.to();\n                    }\n                }, sel_move);\n            }),\n\n            deleteH: methodOp(function (dir, unit) {\n                var sel = this.doc.sel,\n                    doc = this.doc;\n                if (sel.somethingSelected()) {\n                    doc.replaceSelection(\"\", null, \"+delete\");\n                } else {\n                    deleteNearSelection(this, function (range) {\n                        var other = _findPosH(doc, range.head, dir, unit, false);\n                        return dir < 0 ? { from: other, to: range.head } : { from: range.head, to: other };\n                    });\n                }\n            }),\n\n            findPosV: function findPosV(from, amount, unit, goalColumn) {\n                var dir = 1,\n                    x = goalColumn;\n                if (amount < 0) {\n                    dir = -1;amount = -amount;\n                }\n                var cur = _clipPos(this.doc, from);\n                for (var i = 0; i < amount; ++i) {\n                    var coords = _cursorCoords(this, cur, \"div\");\n                    if (x == null) {\n                        x = coords.left;\n                    } else {\n                        coords.left = x;\n                    }\n                    cur = _findPosV(this, coords, dir, unit);\n                    if (cur.hitSide) {\n                        break;\n                    }\n                }\n                return cur;\n            },\n\n            moveV: methodOp(function (dir, unit) {\n                var this$1 = this;\n\n                var doc = this.doc,\n                    goals = [];\n                var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n                doc.extendSelectionsBy(function (range) {\n                    if (collapse) {\n                        return dir < 0 ? range.from() : range.to();\n                    }\n                    var headPos = _cursorCoords(this$1, range.head, \"div\");\n                    if (range.goalColumn != null) {\n                        headPos.left = range.goalColumn;\n                    }\n                    goals.push(headPos.left);\n                    var pos = _findPosV(this$1, headPos, dir, unit);\n                    if (unit == \"page\" && range == doc.sel.primary()) {\n                        addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n                    }\n                    return pos;\n                }, sel_move);\n                if (goals.length) {\n                    for (var i = 0; i < doc.sel.ranges.length; i++) {\n                        doc.sel.ranges[i].goalColumn = goals[i];\n                    }\n                }\n            }),\n\n            // Find the word at the given position (as returned by coordsChar).\n            findWordAt: function findWordAt(pos) {\n                var doc = this.doc,\n                    line = getLine(doc, pos.line).text;\n                var start = pos.ch,\n                    end = pos.ch;\n                if (line) {\n                    var helper = this.getHelper(pos, \"wordChars\");\n                    if ((pos.sticky == \"before\" || end == line.length) && start) {\n                        --start;\n                    } else {\n                        ++end;\n                    }\n                    var startChar = line.charAt(start);\n                    var check = isWordChar(startChar, helper) ? function (ch) {\n                        return isWordChar(ch, helper);\n                    } : /\\s/.test(startChar) ? function (ch) {\n                        return (/\\s/.test(ch)\n                        );\n                    } : function (ch) {\n                        return !/\\s/.test(ch) && !isWordChar(ch);\n                    };\n                    while (start > 0 && check(line.charAt(start - 1))) {\n                        --start;\n                    }\n                    while (end < line.length && check(line.charAt(end))) {\n                        ++end;\n                    }\n                }\n                return new Range(Pos(pos.line, start), Pos(pos.line, end));\n            },\n\n            toggleOverwrite: function toggleOverwrite(value) {\n                if (value != null && value == this.state.overwrite) {\n                    return;\n                }\n                if (this.state.overwrite = !this.state.overwrite) {\n                    addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n                } else {\n                    rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n                }\n\n                signal(this, \"overwriteToggle\", this, this.state.overwrite);\n            },\n            hasFocus: function hasFocus() {\n                return this.display.input.getField() == activeElt();\n            },\n            isReadOnly: function isReadOnly() {\n                return !!(this.options.readOnly || this.doc.cantEdit);\n            },\n\n            scrollTo: methodOp(function (x, y) {\n                scrollToCoords(this, x, y);\n            }),\n            getScrollInfo: function getScrollInfo() {\n                var scroller = this.display.scroller;\n                return { left: scroller.scrollLeft, top: scroller.scrollTop,\n                    height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                    width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                    clientHeight: displayHeight(this), clientWidth: displayWidth(this) };\n            },\n\n            scrollIntoView: methodOp(function (range, margin) {\n                if (range == null) {\n                    range = { from: this.doc.sel.primary().head, to: null };\n                    if (margin == null) {\n                        margin = this.options.cursorScrollMargin;\n                    }\n                } else if (typeof range == \"number\") {\n                    range = { from: Pos(range, 0), to: null };\n                } else if (range.from == null) {\n                    range = { from: range, to: null };\n                }\n                if (!range.to) {\n                    range.to = range.from;\n                }\n                range.margin = margin || 0;\n\n                if (range.from.line != null) {\n                    scrollToRange(this, range);\n                } else {\n                    scrollToCoordsRange(this, range.from, range.to, range.margin);\n                }\n            }),\n\n            setSize: methodOp(function (width, height) {\n                var this$1 = this;\n\n                var interpret = function interpret(val) {\n                    return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n                };\n                if (width != null) {\n                    this.display.wrapper.style.width = interpret(width);\n                }\n                if (height != null) {\n                    this.display.wrapper.style.height = interpret(height);\n                }\n                if (this.options.lineWrapping) {\n                    clearLineMeasurementCache(this);\n                }\n                var lineNo = this.display.viewFrom;\n                this.doc.iter(lineNo, this.display.viewTo, function (line) {\n                    if (line.widgets) {\n                        for (var i = 0; i < line.widgets.length; i++) {\n                            if (line.widgets[i].noHScroll) {\n                                regLineChange(this$1, lineNo, \"widget\");break;\n                            }\n                        }\n                    }\n                    ++lineNo;\n                });\n                this.curOp.forceUpdate = true;\n                signal(this, \"refresh\", this);\n            }),\n\n            operation: function operation(f) {\n                return runInOp(this, f);\n            },\n            startOperation: function startOperation() {\n                return _startOperation(this);\n            },\n            endOperation: function endOperation() {\n                return _endOperation(this);\n            },\n\n            refresh: methodOp(function () {\n                var oldHeight = this.display.cachedTextHeight;\n                regChange(this);\n                this.curOp.forceUpdate = true;\n                clearCaches(this);\n                scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n                updateGutterSpace(this.display);\n                if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n                    estimateLineHeights(this);\n                }\n                signal(this, \"refresh\", this);\n            }),\n\n            swapDoc: methodOp(function (doc) {\n                var old = this.doc;\n                old.cm = null;\n                // Cancel the current text selection if any (#5821)\n                if (this.state.selectingText) {\n                    this.state.selectingText();\n                }\n                attachDoc(this, doc);\n                clearCaches(this);\n                this.display.input.reset();\n                scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n                this.curOp.forceScroll = true;\n                signalLater(this, \"swapDoc\", this, old);\n                return old;\n            }),\n\n            phrase: function phrase(phraseText) {\n                var phrases = this.options.phrases;\n                return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;\n            },\n\n            getInputField: function getInputField() {\n                return this.display.input.getField();\n            },\n            getWrapperElement: function getWrapperElement() {\n                return this.display.wrapper;\n            },\n            getScrollerElement: function getScrollerElement() {\n                return this.display.scroller;\n            },\n            getGutterElement: function getGutterElement() {\n                return this.display.gutters;\n            }\n        };\n        eventMixin(CodeMirror);\n\n        CodeMirror.registerHelper = function (type, name, value) {\n            if (!helpers.hasOwnProperty(type)) {\n                helpers[type] = CodeMirror[type] = { _global: [] };\n            }\n            helpers[type][name] = value;\n        };\n        CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n            CodeMirror.registerHelper(type, name, value);\n            helpers[type]._global.push({ pred: predicate, val: value });\n        };\n    }\n\n    // Used for horizontal relative motion. Dir is -1 or 1 (left or\n    // right), unit can be \"char\", \"column\" (like char, but doesn't\n    // cross line boundaries), \"word\" (across next word), or \"group\" (to\n    // the start of next group of word or non-word-non-whitespace\n    // chars). The visually param controls whether, in right-to-left\n    // text, direction 1 means to move towards the next index in the\n    // string, or towards the character to the right of the current\n    // position. The resulting position will have a hitSide=true\n    // property if it reached the end of the document.\n    function _findPosH(doc, pos, dir, unit, visually) {\n        var oldPos = pos;\n        var origDir = dir;\n        var lineObj = getLine(doc, pos.line);\n        var lineDir = visually && doc.cm && doc.cm.getOption(\"direction\") == \"rtl\" ? -dir : dir;\n        function findNextLine() {\n            var l = pos.line + lineDir;\n            if (l < doc.first || l >= doc.first + doc.size) {\n                return false;\n            }\n            pos = new Pos(l, pos.ch, pos.sticky);\n            return lineObj = getLine(doc, l);\n        }\n        function moveOnce(boundToLine) {\n            var next;\n            if (visually) {\n                next = moveVisually(doc.cm, lineObj, pos, dir);\n            } else {\n                next = moveLogically(lineObj, pos, dir);\n            }\n            if (next == null) {\n                if (!boundToLine && findNextLine()) {\n                    pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir);\n                } else {\n                    return false;\n                }\n            } else {\n                pos = next;\n            }\n            return true;\n        }\n\n        if (unit == \"char\") {\n            moveOnce();\n        } else if (unit == \"column\") {\n            moveOnce(true);\n        } else if (unit == \"word\" || unit == \"group\") {\n            var sawType = null,\n                group = unit == \"group\";\n            var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n            for (var first = true;; first = false) {\n                if (dir < 0 && !moveOnce(!first)) {\n                    break;\n                }\n                var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n                var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n                if (group && !first && !type) {\n                    type = \"s\";\n                }\n                if (sawType && sawType != type) {\n                    if (dir < 0) {\n                        dir = 1;moveOnce();pos.sticky = \"after\";\n                    }\n                    break;\n                }\n\n                if (type) {\n                    sawType = type;\n                }\n                if (dir > 0 && !moveOnce(!first)) {\n                    break;\n                }\n            }\n        }\n        var result = skipAtomic(doc, pos, oldPos, origDir, true);\n        if (equalCursorPos(oldPos, result)) {\n            result.hitSide = true;\n        }\n        return result;\n    }\n\n    // For relative vertical movement. Dir may be -1 or 1. Unit can be\n    // \"page\" or \"line\". The resulting position will have a hitSide=true\n    // property if it reached the end of the document.\n    function _findPosV(cm, pos, dir, unit) {\n        var doc = cm.doc,\n            x = pos.left,\n            y;\n        if (unit == \"page\") {\n            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n            var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n            y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n        } else if (unit == \"line\") {\n            y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n        }\n        var target;\n        for (;;) {\n            target = _coordsChar(cm, x, y);\n            if (!target.outside) {\n                break;\n            }\n            if (dir < 0 ? y <= 0 : y >= doc.height) {\n                target.hitSide = true;break;\n            }\n            y += dir * 5;\n        }\n        return target;\n    }\n\n    // CONTENTEDITABLE INPUT STYLE\n\n    var ContentEditableInput = function ContentEditableInput(cm) {\n        this.cm = cm;\n        this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n        this.polling = new Delayed();\n        this.composing = null;\n        this.gracePeriod = false;\n        this.readDOMTimeout = null;\n    };\n\n    ContentEditableInput.prototype.init = function (display) {\n        var this$1 = this;\n\n        var input = this,\n            cm = input.cm;\n        var div = input.div = display.lineDiv;\n        disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n        on(div, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n                return;\n            }\n            // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n            if (ie_version <= 11) {\n                setTimeout(operation(cm, function () {\n                    return this$1.updateFromDOM();\n                }), 20);\n            }\n        });\n\n        on(div, \"compositionstart\", function (e) {\n            this$1.composing = { data: e.data, done: false };\n        });\n        on(div, \"compositionupdate\", function (e) {\n            if (!this$1.composing) {\n                this$1.composing = { data: e.data, done: false };\n            }\n        });\n        on(div, \"compositionend\", function (e) {\n            if (this$1.composing) {\n                if (e.data != this$1.composing.data) {\n                    this$1.readFromDOMSoon();\n                }\n                this$1.composing.done = true;\n            }\n        });\n\n        on(div, \"touchstart\", function () {\n            return input.forceCompositionEnd();\n        });\n\n        on(div, \"input\", function () {\n            if (!this$1.composing) {\n                this$1.readFromDOMSoon();\n            }\n        });\n\n        function onCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n                return;\n            }\n            if (cm.somethingSelected()) {\n                setLastCopied({ lineWise: false, text: cm.getSelections() });\n                if (e.type == \"cut\") {\n                    cm.replaceSelection(\"\", null, \"cut\");\n                }\n            } else if (!cm.options.lineWiseCopyCut) {\n                return;\n            } else {\n                var ranges = copyableRanges(cm);\n                setLastCopied({ lineWise: true, text: ranges.text });\n                if (e.type == \"cut\") {\n                    cm.operation(function () {\n                        cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n                        cm.replaceSelection(\"\", null, \"cut\");\n                    });\n                }\n            }\n            if (e.clipboardData) {\n                e.clipboardData.clearData();\n                var content = lastCopied.text.join(\"\\n\");\n                // iOS exposes the clipboard API, but seems to discard content inserted into it\n                e.clipboardData.setData(\"Text\", content);\n                if (e.clipboardData.getData(\"Text\") == content) {\n                    e.preventDefault();\n                    return;\n                }\n            }\n            // Old-fashioned briefly-focus-a-textarea hack\n            var kludge = hiddenTextarea(),\n                te = kludge.firstChild;\n            cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n            te.value = lastCopied.text.join(\"\\n\");\n            var hadFocus = document.activeElement;\n            selectInput(te);\n            setTimeout(function () {\n                cm.display.lineSpace.removeChild(kludge);\n                hadFocus.focus();\n                if (hadFocus == div) {\n                    input.showPrimarySelection();\n                }\n            }, 50);\n        }\n        on(div, \"copy\", onCopyCut);\n        on(div, \"cut\", onCopyCut);\n    };\n\n    ContentEditableInput.prototype.prepareSelection = function () {\n        var result = prepareSelection(this.cm, false);\n        result.focus = this.cm.state.focused;\n        return result;\n    };\n\n    ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n        if (!info || !this.cm.display.view.length) {\n            return;\n        }\n        if (info.focus || takeFocus) {\n            this.showPrimarySelection();\n        }\n        this.showMultipleSelections(info);\n    };\n\n    ContentEditableInput.prototype.getSelection = function () {\n        return this.cm.display.wrapper.ownerDocument.getSelection();\n    };\n\n    ContentEditableInput.prototype.showPrimarySelection = function () {\n        var sel = this.getSelection(),\n            cm = this.cm,\n            prim = cm.doc.sel.primary();\n        var from = prim.from(),\n            to = prim.to();\n\n        if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n            sel.removeAllRanges();\n            return;\n        }\n\n        var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n        var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n        if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n            return;\n        }\n\n        var view = cm.display.view;\n        var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || { node: view[0].measure.map[2], offset: 0 };\n        var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n        if (!end) {\n            var measure = view[view.length - 1].measure;\n            var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n            end = { node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3] };\n        }\n\n        if (!start || !end) {\n            sel.removeAllRanges();\n            return;\n        }\n\n        var old = sel.rangeCount && sel.getRangeAt(0),\n            rng;\n        try {\n            rng = range(start.node, start.offset, end.offset, end.node);\n        } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n        if (rng) {\n            if (!gecko && cm.state.focused) {\n                sel.collapse(start.node, start.offset);\n                if (!rng.collapsed) {\n                    sel.removeAllRanges();\n                    sel.addRange(rng);\n                }\n            } else {\n                sel.removeAllRanges();\n                sel.addRange(rng);\n            }\n            if (old && sel.anchorNode == null) {\n                sel.addRange(old);\n            } else if (gecko) {\n                this.startGracePeriod();\n            }\n        }\n        this.rememberSelection();\n    };\n\n    ContentEditableInput.prototype.startGracePeriod = function () {\n        var this$1 = this;\n\n        clearTimeout(this.gracePeriod);\n        this.gracePeriod = setTimeout(function () {\n            this$1.gracePeriod = false;\n            if (this$1.selectionChanged()) {\n                this$1.cm.operation(function () {\n                    return this$1.cm.curOp.selectionChanged = true;\n                });\n            }\n        }, 20);\n    };\n\n    ContentEditableInput.prototype.showMultipleSelections = function (info) {\n        removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n        removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n    };\n\n    ContentEditableInput.prototype.rememberSelection = function () {\n        var sel = this.getSelection();\n        this.lastAnchorNode = sel.anchorNode;this.lastAnchorOffset = sel.anchorOffset;\n        this.lastFocusNode = sel.focusNode;this.lastFocusOffset = sel.focusOffset;\n    };\n\n    ContentEditableInput.prototype.selectionInEditor = function () {\n        var sel = this.getSelection();\n        if (!sel.rangeCount) {\n            return false;\n        }\n        var node = sel.getRangeAt(0).commonAncestorContainer;\n        return contains(this.div, node);\n    };\n\n    ContentEditableInput.prototype.focus = function () {\n        if (this.cm.options.readOnly != \"nocursor\") {\n            if (!this.selectionInEditor()) {\n                this.showSelection(this.prepareSelection(), true);\n            }\n            this.div.focus();\n        }\n    };\n    ContentEditableInput.prototype.blur = function () {\n        this.div.blur();\n    };\n    ContentEditableInput.prototype.getField = function () {\n        return this.div;\n    };\n\n    ContentEditableInput.prototype.supportsTouch = function () {\n        return true;\n    };\n\n    ContentEditableInput.prototype.receivedFocus = function () {\n        var input = this;\n        if (this.selectionInEditor()) {\n            this.pollSelection();\n        } else {\n            runInOp(this.cm, function () {\n                return input.cm.curOp.selectionChanged = true;\n            });\n        }\n\n        function poll() {\n            if (input.cm.state.focused) {\n                input.pollSelection();\n                input.polling.set(input.cm.options.pollInterval, poll);\n            }\n        }\n        this.polling.set(this.cm.options.pollInterval, poll);\n    };\n\n    ContentEditableInput.prototype.selectionChanged = function () {\n        var sel = this.getSelection();\n        return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n    };\n\n    ContentEditableInput.prototype.pollSelection = function () {\n        if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n            return;\n        }\n        var sel = this.getSelection(),\n            cm = this.cm;\n        // On Android Chrome (version 56, at least), backspacing into an\n        // uneditable block element will put the cursor in that element,\n        // and then, because it's not editable, hide the virtual keyboard.\n        // Because Android doesn't allow us to actually detect backspace\n        // presses in a sane way, this code checks for when that happens\n        // and simulates a backspace press in this case.\n        if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n            this.cm.triggerOnKeyDown({ type: \"keydown\", keyCode: 8, preventDefault: Math.abs });\n            this.blur();\n            this.focus();\n            return;\n        }\n        if (this.composing) {\n            return;\n        }\n        this.rememberSelection();\n        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n        var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n        if (anchor && head) {\n            runInOp(cm, function () {\n                setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n                if (anchor.bad || head.bad) {\n                    cm.curOp.selectionChanged = true;\n                }\n            });\n        }\n    };\n\n    ContentEditableInput.prototype.pollContent = function () {\n        if (this.readDOMTimeout != null) {\n            clearTimeout(this.readDOMTimeout);\n            this.readDOMTimeout = null;\n        }\n\n        var cm = this.cm,\n            display = cm.display,\n            sel = cm.doc.sel.primary();\n        var from = sel.from(),\n            to = sel.to();\n        if (from.ch == 0 && from.line > cm.firstLine()) {\n            from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n        }\n        if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n            to = Pos(to.line + 1, 0);\n        }\n        if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n            return false;\n        }\n\n        var fromIndex, fromLine, fromNode;\n        if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n            fromLine = lineNo(display.view[0].line);\n            fromNode = display.view[0].node;\n        } else {\n            fromLine = lineNo(display.view[fromIndex].line);\n            fromNode = display.view[fromIndex - 1].node.nextSibling;\n        }\n        var toIndex = findViewIndex(cm, to.line);\n        var toLine, toNode;\n        if (toIndex == display.view.length - 1) {\n            toLine = display.viewTo - 1;\n            toNode = display.lineDiv.lastChild;\n        } else {\n            toLine = lineNo(display.view[toIndex + 1].line) - 1;\n            toNode = display.view[toIndex + 1].node.previousSibling;\n        }\n\n        if (!fromNode) {\n            return false;\n        }\n        var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n        var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n        while (newText.length > 1 && oldText.length > 1) {\n            if (lst(newText) == lst(oldText)) {\n                newText.pop();oldText.pop();toLine--;\n            } else if (newText[0] == oldText[0]) {\n                newText.shift();oldText.shift();fromLine++;\n            } else {\n                break;\n            }\n        }\n\n        var cutFront = 0,\n            cutEnd = 0;\n        var newTop = newText[0],\n            oldTop = oldText[0],\n            maxCutFront = Math.min(newTop.length, oldTop.length);\n        while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n            ++cutFront;\n        }\n        var newBot = lst(newText),\n            oldBot = lst(oldText);\n        var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n        while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n            ++cutEnd;\n        }\n        // Try to move start of change to start of selection if ambiguous\n        if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n            while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n                cutFront--;\n                cutEnd++;\n            }\n        }\n\n        newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n        newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n        var chFrom = Pos(fromLine, cutFront);\n        var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n        if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n            _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n            return true;\n        }\n    };\n\n    ContentEditableInput.prototype.ensurePolled = function () {\n        this.forceCompositionEnd();\n    };\n    ContentEditableInput.prototype.reset = function () {\n        this.forceCompositionEnd();\n    };\n    ContentEditableInput.prototype.forceCompositionEnd = function () {\n        if (!this.composing) {\n            return;\n        }\n        clearTimeout(this.readDOMTimeout);\n        this.composing = null;\n        this.updateFromDOM();\n        this.div.blur();\n        this.div.focus();\n    };\n    ContentEditableInput.prototype.readFromDOMSoon = function () {\n        var this$1 = this;\n\n        if (this.readDOMTimeout != null) {\n            return;\n        }\n        this.readDOMTimeout = setTimeout(function () {\n            this$1.readDOMTimeout = null;\n            if (this$1.composing) {\n                if (this$1.composing.done) {\n                    this$1.composing = null;\n                } else {\n                    return;\n                }\n            }\n            this$1.updateFromDOM();\n        }, 80);\n    };\n\n    ContentEditableInput.prototype.updateFromDOM = function () {\n        var this$1 = this;\n\n        if (this.cm.isReadOnly() || !this.pollContent()) {\n            runInOp(this.cm, function () {\n                return regChange(this$1.cm);\n            });\n        }\n    };\n\n    ContentEditableInput.prototype.setUneditable = function (node) {\n        node.contentEditable = \"false\";\n    };\n\n    ContentEditableInput.prototype.onKeyPress = function (e) {\n        if (e.charCode == 0 || this.composing) {\n            return;\n        }\n        e.preventDefault();\n        if (!this.cm.isReadOnly()) {\n            operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n        }\n    };\n\n    ContentEditableInput.prototype.readOnlyChanged = function (val) {\n        this.div.contentEditable = String(val != \"nocursor\");\n    };\n\n    ContentEditableInput.prototype.onContextMenu = function () {};\n    ContentEditableInput.prototype.resetPosition = function () {};\n\n    ContentEditableInput.prototype.needsContentAttribute = true;\n\n    function posToDOM(cm, pos) {\n        var view = findViewForLine(cm, pos.line);\n        if (!view || view.hidden) {\n            return null;\n        }\n        var line = getLine(cm.doc, pos.line);\n        var info = mapFromLineView(view, line, pos.line);\n\n        var order = getOrder(line, cm.doc.direction),\n            side = \"left\";\n        if (order) {\n            var partPos = getBidiPartAt(order, pos.ch);\n            side = partPos % 2 ? \"right\" : \"left\";\n        }\n        var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n        result.offset = result.collapse == \"right\" ? result.end : result.start;\n        return result;\n    }\n\n    function isInGutter(node) {\n        for (var scan = node; scan; scan = scan.parentNode) {\n            if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function badPos(pos, bad) {\n        if (bad) {\n            pos.bad = true;\n        }return pos;\n    }\n\n    function domTextBetween(cm, from, to, fromLine, toLine) {\n        var text = \"\",\n            closing = false,\n            lineSep = cm.doc.lineSeparator(),\n            extraLinebreak = false;\n        function recognizeMarker(id) {\n            return function (marker) {\n                return marker.id == id;\n            };\n        }\n        function close() {\n            if (closing) {\n                text += lineSep;\n                if (extraLinebreak) {\n                    text += lineSep;\n                }\n                closing = extraLinebreak = false;\n            }\n        }\n        function addText(str) {\n            if (str) {\n                close();\n                text += str;\n            }\n        }\n        function walk(node) {\n            if (node.nodeType == 1) {\n                var cmText = node.getAttribute(\"cm-text\");\n                if (cmText) {\n                    addText(cmText);\n                    return;\n                }\n                var markerID = node.getAttribute(\"cm-marker\"),\n                    range;\n                if (markerID) {\n                    var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n                    if (found.length && (range = found[0].find(0))) {\n                        addText(getBetween(cm.doc, range.from, range.to).join(lineSep));\n                    }\n                    return;\n                }\n                if (node.getAttribute(\"contenteditable\") == \"false\") {\n                    return;\n                }\n                var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n                if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {\n                    return;\n                }\n\n                if (isBlock) {\n                    close();\n                }\n                for (var i = 0; i < node.childNodes.length; i++) {\n                    walk(node.childNodes[i]);\n                }\n\n                if (/^(pre|p)$/i.test(node.nodeName)) {\n                    extraLinebreak = true;\n                }\n                if (isBlock) {\n                    closing = true;\n                }\n            } else if (node.nodeType == 3) {\n                addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n            }\n        }\n        for (;;) {\n            walk(from);\n            if (from == to) {\n                break;\n            }\n            from = from.nextSibling;\n            extraLinebreak = false;\n        }\n        return text;\n    }\n\n    function domToPos(cm, node, offset) {\n        var lineNode;\n        if (node == cm.display.lineDiv) {\n            lineNode = cm.display.lineDiv.childNodes[offset];\n            if (!lineNode) {\n                return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n            }\n            node = null;offset = 0;\n        } else {\n            for (lineNode = node;; lineNode = lineNode.parentNode) {\n                if (!lineNode || lineNode == cm.display.lineDiv) {\n                    return null;\n                }\n                if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n                    break;\n                }\n            }\n        }\n        for (var i = 0; i < cm.display.view.length; i++) {\n            var lineView = cm.display.view[i];\n            if (lineView.node == lineNode) {\n                return locateNodeInLineView(lineView, node, offset);\n            }\n        }\n    }\n\n    function locateNodeInLineView(lineView, node, offset) {\n        var wrapper = lineView.text.firstChild,\n            bad = false;\n        if (!node || !contains(wrapper, node)) {\n            return badPos(Pos(lineNo(lineView.line), 0), true);\n        }\n        if (node == wrapper) {\n            bad = true;\n            node = wrapper.childNodes[offset];\n            offset = 0;\n            if (!node) {\n                var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n                return badPos(Pos(lineNo(line), line.text.length), bad);\n            }\n        }\n\n        var textNode = node.nodeType == 3 ? node : null,\n            topNode = node;\n        if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n            textNode = node.firstChild;\n            if (offset) {\n                offset = textNode.nodeValue.length;\n            }\n        }\n        while (topNode.parentNode != wrapper) {\n            topNode = topNode.parentNode;\n        }\n        var measure = lineView.measure,\n            maps = measure.maps;\n\n        function find(textNode, topNode, offset) {\n            for (var i = -1; i < (maps ? maps.length : 0); i++) {\n                var map = i < 0 ? measure.map : maps[i];\n                for (var j = 0; j < map.length; j += 3) {\n                    var curNode = map[j + 2];\n                    if (curNode == textNode || curNode == topNode) {\n                        var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n                        var ch = map[j] + offset;\n                        if (offset < 0 || curNode != textNode) {\n                            ch = map[j + (offset ? 1 : 0)];\n                        }\n                        return Pos(line, ch);\n                    }\n                }\n            }\n        }\n        var found = find(textNode, topNode, offset);\n        if (found) {\n            return badPos(found, bad);\n        }\n\n        // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n        for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n            found = find(after, after.firstChild, 0);\n            if (found) {\n                return badPos(Pos(found.line, found.ch - dist), bad);\n            } else {\n                dist += after.textContent.length;\n            }\n        }\n        for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n            found = find(before, before.firstChild, -1);\n            if (found) {\n                return badPos(Pos(found.line, found.ch + dist$1), bad);\n            } else {\n                dist$1 += before.textContent.length;\n            }\n        }\n    }\n\n    // TEXTAREA INPUT STYLE\n\n    var TextareaInput = function TextareaInput(cm) {\n        this.cm = cm;\n        // See input.poll and input.reset\n        this.prevInput = \"\";\n\n        // Flag that indicates whether we expect input to appear real soon\n        // now (after some event like 'keypress' or 'input') and are\n        // polling intensively.\n        this.pollingFast = false;\n        // Self-resetting timeout for the poller\n        this.polling = new Delayed();\n        // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n        this.hasSelection = false;\n        this.composing = null;\n    };\n\n    TextareaInput.prototype.init = function (display) {\n        var this$1 = this;\n\n        var input = this,\n            cm = this.cm;\n        this.createField(display);\n        var te = this.textarea;\n\n        display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n        // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n        if (ios) {\n            te.style.width = \"0px\";\n        }\n\n        on(te, \"input\", function () {\n            if (ie && ie_version >= 9 && this$1.hasSelection) {\n                this$1.hasSelection = null;\n            }\n            input.poll();\n        });\n\n        on(te, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n                return;\n            }\n\n            cm.state.pasteIncoming = +new Date();\n            input.fastPoll();\n        });\n\n        function prepareCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n                return;\n            }\n            if (cm.somethingSelected()) {\n                setLastCopied({ lineWise: false, text: cm.getSelections() });\n            } else if (!cm.options.lineWiseCopyCut) {\n                return;\n            } else {\n                var ranges = copyableRanges(cm);\n                setLastCopied({ lineWise: true, text: ranges.text });\n                if (e.type == \"cut\") {\n                    cm.setSelections(ranges.ranges, null, sel_dontScroll);\n                } else {\n                    input.prevInput = \"\";\n                    te.value = ranges.text.join(\"\\n\");\n                    selectInput(te);\n                }\n            }\n            if (e.type == \"cut\") {\n                cm.state.cutIncoming = +new Date();\n            }\n        }\n        on(te, \"cut\", prepareCopyCut);\n        on(te, \"copy\", prepareCopyCut);\n\n        on(display.scroller, \"paste\", function (e) {\n            if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n                return;\n            }\n            if (!te.dispatchEvent) {\n                cm.state.pasteIncoming = +new Date();\n                input.focus();\n                return;\n            }\n\n            // Pass the `paste` event to the textarea so it's handled by its event listener.\n            var event = new Event(\"paste\");\n            event.clipboardData = e.clipboardData;\n            te.dispatchEvent(event);\n        });\n\n        // Prevent normal selection in the editor (we handle our own)\n        on(display.lineSpace, \"selectstart\", function (e) {\n            if (!eventInWidget(display, e)) {\n                e_preventDefault(e);\n            }\n        });\n\n        on(te, \"compositionstart\", function () {\n            var start = cm.getCursor(\"from\");\n            if (input.composing) {\n                input.composing.range.clear();\n            }\n            input.composing = {\n                start: start,\n                range: cm.markText(start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" })\n            };\n        });\n        on(te, \"compositionend\", function () {\n            if (input.composing) {\n                input.poll();\n                input.composing.range.clear();\n                input.composing = null;\n            }\n        });\n    };\n\n    TextareaInput.prototype.createField = function (_display) {\n        // Wraps and hides input textarea\n        this.wrapper = hiddenTextarea();\n        // The semihidden textarea that is focused when the editor is\n        // focused, and receives input.\n        this.textarea = this.wrapper.firstChild;\n    };\n\n    TextareaInput.prototype.prepareSelection = function () {\n        // Redraw the selection and/or cursor\n        var cm = this.cm,\n            display = cm.display,\n            doc = cm.doc;\n        var result = prepareSelection(cm);\n\n        // Move the hidden textarea near the cursor to prevent scrolling artifacts\n        if (cm.options.moveInputWithCursor) {\n            var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n            var wrapOff = display.wrapper.getBoundingClientRect(),\n                lineOff = display.lineDiv.getBoundingClientRect();\n            result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n            result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n        }\n\n        return result;\n    };\n\n    TextareaInput.prototype.showSelection = function (drawn) {\n        var cm = this.cm,\n            display = cm.display;\n        removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n        removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n        if (drawn.teTop != null) {\n            this.wrapper.style.top = drawn.teTop + \"px\";\n            this.wrapper.style.left = drawn.teLeft + \"px\";\n        }\n    };\n\n    // Reset the input to correspond to the selection (or to be empty,\n    // when not typing and nothing is selected)\n    TextareaInput.prototype.reset = function (typing) {\n        if (this.contextMenuPending || this.composing) {\n            return;\n        }\n        var cm = this.cm;\n        if (cm.somethingSelected()) {\n            this.prevInput = \"\";\n            var content = cm.getSelection();\n            this.textarea.value = content;\n            if (cm.state.focused) {\n                selectInput(this.textarea);\n            }\n            if (ie && ie_version >= 9) {\n                this.hasSelection = content;\n            }\n        } else if (!typing) {\n            this.prevInput = this.textarea.value = \"\";\n            if (ie && ie_version >= 9) {\n                this.hasSelection = null;\n            }\n        }\n    };\n\n    TextareaInput.prototype.getField = function () {\n        return this.textarea;\n    };\n\n    TextareaInput.prototype.supportsTouch = function () {\n        return false;\n    };\n\n    TextareaInput.prototype.focus = function () {\n        if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n            try {\n                this.textarea.focus();\n            } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n        }\n    };\n\n    TextareaInput.prototype.blur = function () {\n        this.textarea.blur();\n    };\n\n    TextareaInput.prototype.resetPosition = function () {\n        this.wrapper.style.top = this.wrapper.style.left = 0;\n    };\n\n    TextareaInput.prototype.receivedFocus = function () {\n        this.slowPoll();\n    };\n\n    // Poll for input changes, using the normal rate of polling. This\n    // runs as long as the editor is focused.\n    TextareaInput.prototype.slowPoll = function () {\n        var this$1 = this;\n\n        if (this.pollingFast) {\n            return;\n        }\n        this.polling.set(this.cm.options.pollInterval, function () {\n            this$1.poll();\n            if (this$1.cm.state.focused) {\n                this$1.slowPoll();\n            }\n        });\n    };\n\n    // When an event has just come in that is likely to add or change\n    // something in the input textarea, we poll faster, to ensure that\n    // the change appears on the screen quickly.\n    TextareaInput.prototype.fastPoll = function () {\n        var missed = false,\n            input = this;\n        input.pollingFast = true;\n        function p() {\n            var changed = input.poll();\n            if (!changed && !missed) {\n                missed = true;input.polling.set(60, p);\n            } else {\n                input.pollingFast = false;input.slowPoll();\n            }\n        }\n        input.polling.set(20, p);\n    };\n\n    // Read input from the textarea, and update the document to match.\n    // When something is selected, it is present in the textarea, and\n    // selected (unless it is huge, in which case a placeholder is\n    // used). When nothing is selected, the cursor sits after previously\n    // seen text (can be empty), which is stored in prevInput (we must\n    // not reset the textarea when typing, because that breaks IME).\n    TextareaInput.prototype.poll = function () {\n        var this$1 = this;\n\n        var cm = this.cm,\n            input = this.textarea,\n            prevInput = this.prevInput;\n        // Since this is called a *lot*, try to bail out as cheaply as\n        // possible when it is clear that nothing happened. hasSelection\n        // will be the case when there is a lot of text in the textarea,\n        // in which case reading its value would be expensive.\n        if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n            return false;\n        }\n\n        var text = input.value;\n        // If nothing changed, bail.\n        if (text == prevInput && !cm.somethingSelected()) {\n            return false;\n        }\n        // Work around nonsensical selection resetting in IE9/10, and\n        // inexplicable appearance of private area unicode characters on\n        // some key combos in Mac (#2689).\n        if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n            cm.display.input.reset();\n            return false;\n        }\n\n        if (cm.doc.sel == cm.display.selForContextMenu) {\n            var first = text.charCodeAt(0);\n            if (first == 0x200b && !prevInput) {\n                prevInput = \"\\u200B\";\n            }\n            if (first == 0x21da) {\n                this.reset();return this.cm.execCommand(\"undo\");\n            }\n        }\n        // Find the part of the input that is actually new\n        var same = 0,\n            l = Math.min(prevInput.length, text.length);\n        while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n            ++same;\n        }\n\n        runInOp(cm, function () {\n            applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null);\n\n            // Don't leave long text in the textarea, since it makes further polling slow\n            if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n                input.value = this$1.prevInput = \"\";\n            } else {\n                this$1.prevInput = text;\n            }\n\n            if (this$1.composing) {\n                this$1.composing.range.clear();\n                this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" });\n            }\n        });\n        return true;\n    };\n\n    TextareaInput.prototype.ensurePolled = function () {\n        if (this.pollingFast && this.poll()) {\n            this.pollingFast = false;\n        }\n    };\n\n    TextareaInput.prototype.onKeyPress = function () {\n        if (ie && ie_version >= 9) {\n            this.hasSelection = null;\n        }\n        this.fastPoll();\n    };\n\n    TextareaInput.prototype.onContextMenu = function (e) {\n        var input = this,\n            cm = input.cm,\n            display = cm.display,\n            te = input.textarea;\n        if (input.contextMenuPending) {\n            input.contextMenuPending();\n        }\n        var pos = posFromMouse(cm, e),\n            scrollPos = display.scroller.scrollTop;\n        if (!pos || presto) {\n            return;\n        } // Opera is difficult.\n\n        // Reset the current text selection only if the click is done outside of the selection\n        // and 'resetSelectionOnContextMenu' option is true.\n        var reset = cm.options.resetSelectionOnContextMenu;\n        if (reset && cm.doc.sel.contains(pos) == -1) {\n            operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n        }\n\n        var oldCSS = te.style.cssText,\n            oldWrapperCSS = input.wrapper.style.cssText;\n        var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n        input.wrapper.style.cssText = \"position: static\";\n        te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n        var oldScrollY;\n        if (webkit) {\n            oldScrollY = window.scrollY;\n        } // Work around Chrome issue (#2712)\n        display.input.focus();\n        if (webkit) {\n            window.scrollTo(null, oldScrollY);\n        }\n        display.input.reset();\n        // Adds \"Select all\" to context menu in FF\n        if (!cm.somethingSelected()) {\n            te.value = input.prevInput = \" \";\n        }\n        input.contextMenuPending = rehide;\n        display.selForContextMenu = cm.doc.sel;\n        clearTimeout(display.detectingSelectAll);\n\n        // Select-all will be greyed out if there's nothing to select, so\n        // this adds a zero-width space so that we can later check whether\n        // it got selected.\n        function prepareSelectAllHack() {\n            if (te.selectionStart != null) {\n                var selected = cm.somethingSelected();\n                var extval = \"\\u200B\" + (selected ? te.value : \"\");\n                te.value = \"\\u21DA\"; // Used to catch context-menu undo\n                te.value = extval;\n                input.prevInput = selected ? \"\" : \"\\u200B\";\n                te.selectionStart = 1;te.selectionEnd = extval.length;\n                // Re-set this, in case some other handler touched the\n                // selection in the meantime.\n                display.selForContextMenu = cm.doc.sel;\n            }\n        }\n        function rehide() {\n            if (input.contextMenuPending != rehide) {\n                return;\n            }\n            input.contextMenuPending = false;\n            input.wrapper.style.cssText = oldWrapperCSS;\n            te.style.cssText = oldCSS;\n            if (ie && ie_version < 9) {\n                display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n            }\n\n            // Try to detect the user choosing select-all\n            if (te.selectionStart != null) {\n                if (!ie || ie && ie_version < 9) {\n                    prepareSelectAllHack();\n                }\n                var i = 0,\n                    poll = function poll() {\n                    if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n                        operation(cm, selectAll)(cm);\n                    } else if (i++ < 10) {\n                        display.detectingSelectAll = setTimeout(poll, 500);\n                    } else {\n                        display.selForContextMenu = null;\n                        display.input.reset();\n                    }\n                };\n                display.detectingSelectAll = setTimeout(poll, 200);\n            }\n        }\n\n        if (ie && ie_version >= 9) {\n            prepareSelectAllHack();\n        }\n        if (captureRightClick) {\n            e_stop(e);\n            var mouseup = function mouseup() {\n                off(window, \"mouseup\", mouseup);\n                setTimeout(rehide, 20);\n            };\n            on(window, \"mouseup\", mouseup);\n        } else {\n            setTimeout(rehide, 50);\n        }\n    };\n\n    TextareaInput.prototype.readOnlyChanged = function (val) {\n        if (!val) {\n            this.reset();\n        }\n        this.textarea.disabled = val == \"nocursor\";\n    };\n\n    TextareaInput.prototype.setUneditable = function () {};\n\n    TextareaInput.prototype.needsContentAttribute = false;\n\n    function fromTextArea(textarea, options) {\n        options = options ? copyObj(options) : {};\n        options.value = textarea.value;\n        if (!options.tabindex && textarea.tabIndex) {\n            options.tabindex = textarea.tabIndex;\n        }\n        if (!options.placeholder && textarea.placeholder) {\n            options.placeholder = textarea.placeholder;\n        }\n        // Set autofocus to true if this textarea is focused, or if it has\n        // autofocus and no other element is focused.\n        if (options.autofocus == null) {\n            var hasFocus = activeElt();\n            options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n        }\n\n        function save() {\n            textarea.value = cm.getValue();\n        }\n\n        var realSubmit;\n        if (textarea.form) {\n            on(textarea.form, \"submit\", save);\n            // Deplorable hack to make the submit method do the right thing.\n            if (!options.leaveSubmitMethodAlone) {\n                var form = textarea.form;\n                realSubmit = form.submit;\n                try {\n                    var wrappedSubmit = form.submit = function () {\n                        save();\n                        form.submit = realSubmit;\n                        form.submit();\n                        form.submit = wrappedSubmit;\n                    };\n                } catch (e) {}\n            }\n        }\n\n        options.finishInit = function (cm) {\n            cm.save = save;\n            cm.getTextArea = function () {\n                return textarea;\n            };\n            cm.toTextArea = function () {\n                cm.toTextArea = isNaN; // Prevent this from being ran twice\n                save();\n                textarea.parentNode.removeChild(cm.getWrapperElement());\n                textarea.style.display = \"\";\n                if (textarea.form) {\n                    off(textarea.form, \"submit\", save);\n                    if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\") {\n                        textarea.form.submit = realSubmit;\n                    }\n                }\n            };\n        };\n\n        textarea.style.display = \"none\";\n        var cm = CodeMirror(function (node) {\n            return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n        }, options);\n        return cm;\n    }\n\n    function addLegacyProps(CodeMirror) {\n        CodeMirror.off = off;\n        CodeMirror.on = on;\n        CodeMirror.wheelEventPixels = wheelEventPixels;\n        CodeMirror.Doc = Doc;\n        CodeMirror.splitLines = splitLinesAuto;\n        CodeMirror.countColumn = countColumn;\n        CodeMirror.findColumn = findColumn;\n        CodeMirror.isWordChar = isWordCharBasic;\n        CodeMirror.Pass = Pass;\n        CodeMirror.signal = signal;\n        CodeMirror.Line = Line;\n        CodeMirror.changeEnd = changeEnd;\n        CodeMirror.scrollbarModel = scrollbarModel;\n        CodeMirror.Pos = Pos;\n        CodeMirror.cmpPos = cmp;\n        CodeMirror.modes = modes;\n        CodeMirror.mimeModes = mimeModes;\n        CodeMirror.resolveMode = resolveMode;\n        CodeMirror.getMode = getMode;\n        CodeMirror.modeExtensions = modeExtensions;\n        CodeMirror.extendMode = extendMode;\n        CodeMirror.copyState = copyState;\n        CodeMirror.startState = startState;\n        CodeMirror.innerMode = innerMode;\n        CodeMirror.commands = commands;\n        CodeMirror.keyMap = keyMap;\n        CodeMirror.keyName = keyName;\n        CodeMirror.isModifierKey = isModifierKey;\n        CodeMirror.lookupKey = lookupKey;\n        CodeMirror.normalizeKeyMap = normalizeKeyMap;\n        CodeMirror.StringStream = StringStream;\n        CodeMirror.SharedTextMarker = SharedTextMarker;\n        CodeMirror.TextMarker = TextMarker;\n        CodeMirror.LineWidget = LineWidget;\n        CodeMirror.e_preventDefault = e_preventDefault;\n        CodeMirror.e_stopPropagation = e_stopPropagation;\n        CodeMirror.e_stop = e_stop;\n        CodeMirror.addClass = addClass;\n        CodeMirror.contains = contains;\n        CodeMirror.rmClass = rmClass;\n        CodeMirror.keyNames = keyNames;\n    }\n\n    // EDITOR CONSTRUCTOR\n\n    defineOptions(CodeMirror);\n\n    addEditorMethods(CodeMirror);\n\n    // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n    var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n    for (var prop in Doc.prototype) {\n        if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n            CodeMirror.prototype[prop] = function (method) {\n                return function () {\n                    return method.apply(this.doc, arguments);\n                };\n            }(Doc.prototype[prop]);\n        }\n    }\n\n    eventMixin(Doc);\n    CodeMirror.inputStyles = { \"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput };\n\n    // Extra arguments are stored as the mode's dependencies, which is\n    // used by (legacy) mechanisms like loadmode.js to automatically\n    // load a mode. (Preferred mechanism is the require/define calls.)\n    CodeMirror.defineMode = function (name /*, mode, â¦*/) {\n        if (!CodeMirror.defaults.mode && name != \"null\") {\n            CodeMirror.defaults.mode = name;\n        }\n        defineMode.apply(this, arguments);\n    };\n\n    CodeMirror.defineMIME = defineMIME;\n\n    // Minimal default mode.\n    CodeMirror.defineMode(\"null\", function () {\n        return { token: function token(stream) {\n                return stream.skipToEnd();\n            } };\n    });\n    CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n    // EXTENSIONS\n\n    CodeMirror.defineExtension = function (name, func) {\n        CodeMirror.prototype[name] = func;\n    };\n    CodeMirror.defineDocExtension = function (name, func) {\n        Doc.prototype[name] = func;\n    };\n\n    CodeMirror.fromTextArea = fromTextArea;\n\n    addLegacyProps(CodeMirror);\n\n    CodeMirror.version = \"5.51.0\";\n\n    return CodeMirror;\n}\n\nvar CodeMirror = codemirror();\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nfunction xml(CodeMirror) {\n  \"use strict\";\n\n  var htmlConfig = {\n    autoSelfClosers: { 'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n      'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n      'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n      'track': true, 'wbr': true, 'menuitem': true },\n    implicitlyClosed: { 'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n      'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n      'th': true, 'tr': true },\n    contextGrabbers: {\n      'dd': { 'dd': true, 'dt': true },\n      'dt': { 'dd': true, 'dt': true },\n      'li': { 'li': true },\n      'option': { 'option': true, 'optgroup': true },\n      'optgroup': { 'optgroup': true },\n      'p': { 'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n        'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n        'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n        'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n        'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true },\n      'rp': { 'rp': true, 'rt': true },\n      'rt': { 'rp': true, 'rt': true },\n      'tbody': { 'tbody': true, 'tfoot': true },\n      'td': { 'td': true, 'th': true },\n      'tfoot': { 'tbody': true },\n      'th': { 'td': true, 'th': true },\n      'thead': { 'tbody': true, 'tfoot': true },\n      'tr': { 'tr': true }\n    },\n    doNotIndent: { \"pre\": true },\n    allowUnquoted: true,\n    allowMissing: true,\n    caseFold: true\n  };\n\n  var xmlConfig = {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false,\n    allowMissingTagName: false,\n    caseFold: false\n  };\n\n  CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n    var indentUnit = editorConf.indentUnit;\n    var config = {};\n    var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n    for (var prop in defaults) {\n      config[prop] = defaults[prop];\n    }for (var prop in config_) {\n      config[prop] = config_[prop];\n    } // Return variables for tokenizers\n    var type, setStyle;\n\n    function inText(stream, state) {\n      function chain(parser) {\n        state.tokenize = parser;\n        return parser(stream, state);\n      }\n\n      var ch = stream.next();\n      if (ch == \"<\") {\n        if (stream.eat(\"!\")) {\n          if (stream.eat(\"[\")) {\n            if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n          } else if (stream.match(\"--\")) {\n            return chain(inBlock(\"comment\", \"-->\"));\n          } else if (stream.match(\"DOCTYPE\", true, true)) {\n            stream.eatWhile(/[\\w\\._\\-]/);\n            return chain(doctype(1));\n          } else {\n            return null;\n          }\n        } else if (stream.eat(\"?\")) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          state.tokenize = inBlock(\"meta\", \"?>\");\n          return \"meta\";\n        } else {\n          type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n          state.tokenize = inTag;\n          return \"tag bracket\";\n        }\n      } else if (ch == \"&\") {\n        var ok;\n        if (stream.eat(\"#\")) {\n          if (stream.eat(\"x\")) {\n            ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n          } else {\n            ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n          }\n        } else {\n          ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n        }\n        return ok ? \"atom\" : \"error\";\n      } else {\n        stream.eatWhile(/[^&<]/);\n        return null;\n      }\n    }\n    inText.isInText = true;\n\n    function inTag(stream, state) {\n      var ch = stream.next();\n      if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n        state.tokenize = inText;\n        type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n        return \"tag bracket\";\n      } else if (ch == \"=\") {\n        type = \"equals\";\n        return null;\n      } else if (ch == \"<\") {\n        state.tokenize = inText;\n        state.state = baseState;\n        state.tagName = state.tagStart = null;\n        var next = state.tokenize(stream, state);\n        return next ? next + \" tag error\" : \"tag error\";\n      } else if (/[\\'\\\"]/.test(ch)) {\n        state.tokenize = inAttribute(ch);\n        state.stringStartCol = stream.column();\n        return state.tokenize(stream, state);\n      } else {\n        stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n        return \"word\";\n      }\n    }\n\n    function inAttribute(quote) {\n      var closure = function closure(stream, state) {\n        while (!stream.eol()) {\n          if (stream.next() == quote) {\n            state.tokenize = inTag;\n            break;\n          }\n        }\n        return \"string\";\n      };\n      closure.isInAttribute = true;\n      return closure;\n    }\n\n    function inBlock(style, terminator) {\n      return function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.match(terminator)) {\n            state.tokenize = inText;\n            break;\n          }\n          stream.next();\n        }\n        return style;\n      };\n    }\n\n    function doctype(depth) {\n      return function (stream, state) {\n        var ch;\n        while ((ch = stream.next()) != null) {\n          if (ch == \"<\") {\n            state.tokenize = doctype(depth + 1);\n            return state.tokenize(stream, state);\n          } else if (ch == \">\") {\n            if (depth == 1) {\n              state.tokenize = inText;\n              break;\n            } else {\n              state.tokenize = doctype(depth - 1);\n              return state.tokenize(stream, state);\n            }\n          }\n        }\n        return \"meta\";\n      };\n    }\n\n    function Context(state, tagName, startOfLine) {\n      this.prev = state.context;\n      this.tagName = tagName;\n      this.indent = state.indented;\n      this.startOfLine = startOfLine;\n      if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n    }\n    function popContext(state) {\n      if (state.context) state.context = state.context.prev;\n    }\n    function maybePopContext(state, nextTagName) {\n      var parentTagName;\n      while (true) {\n        if (!state.context) {\n          return;\n        }\n        parentTagName = state.context.tagName;\n        if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n          return;\n        }\n        popContext(state);\n      }\n    }\n\n    function baseState(type, stream, state) {\n      if (type == \"openTag\") {\n        state.tagStart = stream.column();\n        return tagNameState;\n      } else if (type == \"closeTag\") {\n        return closeTagNameState;\n      } else {\n        return baseState;\n      }\n    }\n    function tagNameState(type, stream, state) {\n      if (type == \"word\") {\n        state.tagName = stream.current();\n        setStyle = \"tag\";\n        return attrState;\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return attrState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return tagNameState;\n      }\n    }\n    function closeTagNameState(type, stream, state) {\n      if (type == \"word\") {\n        var tagName = stream.current();\n        if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n        if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n          setStyle = \"tag\";\n          return closeState;\n        } else {\n          setStyle = \"tag error\";\n          return closeStateErr;\n        }\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return closeState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return closeStateErr;\n      }\n    }\n\n    function closeState(type, _stream, state) {\n      if (type != \"endTag\") {\n        setStyle = \"error\";\n        return closeState;\n      }\n      popContext(state);\n      return baseState;\n    }\n    function closeStateErr(type, stream, state) {\n      setStyle = \"error\";\n      return closeState(type, stream, state);\n    }\n\n    function attrState(type, _stream, state) {\n      if (type == \"word\") {\n        setStyle = \"attribute\";\n        return attrEqState;\n      } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n        var tagName = state.tagName,\n            tagStart = state.tagStart;\n        state.tagName = state.tagStart = null;\n        if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n          maybePopContext(state, tagName);\n        } else {\n          maybePopContext(state, tagName);\n          state.context = new Context(state, tagName, tagStart == state.indented);\n        }\n        return baseState;\n      }\n      setStyle = \"error\";\n      return attrState;\n    }\n    function attrEqState(type, stream, state) {\n      if (type == \"equals\") return attrValueState;\n      if (!config.allowMissing) setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n    function attrValueState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n      if (type == \"word\" && config.allowUnquoted) {\n        setStyle = \"string\";return attrState;\n      }\n      setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n    function attrContinuedState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n      return attrState(type, stream, state);\n    }\n\n    return {\n      startState: function startState(baseIndent) {\n        var state = { tokenize: inText,\n          state: baseState,\n          indented: baseIndent || 0,\n          tagName: null, tagStart: null,\n          context: null };\n        if (baseIndent != null) state.baseIndent = baseIndent;\n        return state;\n      },\n\n      token: function token(stream, state) {\n        if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n\n        if (stream.eatSpace()) return null;\n        type = null;\n        var style = state.tokenize(stream, state);\n        if ((style || type) && style != \"comment\") {\n          setStyle = null;\n          state.state = state.state(type || style, stream, state);\n          if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n        }\n        return style;\n      },\n\n      indent: function indent(state, textAfter, fullLine) {\n        var context = state.context;\n        // Indent multi-line strings (e.g. css).\n        if (state.tokenize.isInAttribute) {\n          if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n        }\n        if (context && context.noIndent) return CodeMirror.Pass;\n        if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n        // Indent the starts of attribute names.\n        if (state.tagName) {\n          if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n        }\n        if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n        var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n        if (tagAfter && tagAfter[1]) {\n          // Closing tag spotted\n          while (context) {\n            if (context.tagName == tagAfter[2]) {\n              context = context.prev;\n              break;\n            } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        } else if (tagAfter) {\n          // Opening tag spotted\n          while (context) {\n            var grabbers = config.contextGrabbers[context.tagName];\n            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n          }\n        }\n        while (context && context.prev && !context.startOfLine) {\n          context = context.prev;\n        }if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n      },\n\n      electricInput: /<\\/[\\s\\w:]+>$/,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n\n      configuration: config.htmlMode ? \"html\" : \"xml\",\n      helperType: config.htmlMode ? \"html\" : \"xml\",\n\n      skipAttribute: function skipAttribute(state) {\n        if (state.state == attrValueState) state.state = attrState;\n      },\n\n      xmlCurrentTag: function xmlCurrentTag(state) {\n        return state.tagName ? { name: state.tagName, close: state.type == \"closeTag\" } : null;\n      },\n\n      xmlCurrentContext: function xmlCurrentContext(state) {\n        var context = [];\n        for (var cx = state.context; cx; cx = cx.prev) {\n          if (cx.tagName) context.push(cx.tagName);\n        }return context.reverse();\n      }\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/xml\", \"xml\");\n  CodeMirror.defineMIME(\"application/xml\", \"xml\");\n  if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", { name: \"xml\", htmlMode: true });\n}\n\n/*\n    ç¼è¾å¨æé å½æ°\n*/\n\n// å¼å¥codemirror\nxml(CodeMirror);\n\n// idï¼ç´¯å \nvar editorId = 1;\n\n// æé å½æ°\nfunction Editor(toolbarSelector, textSelector) {\n    if (toolbarSelector == null) {\n        // æ²¡æä¼ å¥ä»»ä½åæ°ï¼æ¥é\n        throw new Error('éè¯¯ï¼åå§åç¼è¾å¨æ¶åæªä¼ å¥ä»»ä½åæ°ï¼è¯·æ¥éææ¡£');\n    }\n    // idï¼ç¨ä»¥åºååä¸ªé¡µé¢ä¸åçç¼è¾å¨å¯¹è±¡\n    this.id = 'wangEditor-' + editorId++;\n\n    this.toolbarSelector = toolbarSelector;\n    this.textSelector = textSelector;\n\n    // èªå®ä¹éç½®\n    this.customConfig = {};\n}\n\n// ä¿®æ¹åå\nEditor.prototype = {\n    constructor: Editor,\n\n    // åå§åéç½®\n    _initConfig: function _initConfig() {\n        // _config æ¯é»è®¤éç½®ï¼this.customConfig æ¯ç¨æ·èªå®ä¹éç½®ï¼å°å®ä»¬ merge ä¹ååèµå¼\n        var target = {};\n        this.config = Object.assign(target, config, this.customConfig);\n\n        // å°è¯­è¨éç½®ï¼çææ­£åè¡¨è¾¾å¼\n        var langConfig = this.config.lang || {};\n        var langArgs = [];\n        objForEach(langConfig, function (key, val) {\n            // key å³éè¦çææ­£åè¡¨è¾¾å¼çè§åï¼å¦âæå¥é¾æ¥â\n            // val å³éè¦è¢«æ¿æ¢æçè¯­è¨ï¼å¦âinsert linkâ\n            langArgs.push({\n                reg: new RegExp(key, 'img'),\n                val: val\n\n            });\n        });\n        this.config.langArgs = langArgs;\n    },\n\n    // åå§å DOM\n    _initDom: function _initDom() {\n        var _this = this;\n\n        var toolbarSelector = this.toolbarSelector;\n        var $toolbarSelector = $(toolbarSelector);\n        var textSelector = this.textSelector;\n\n        var config$$1 = this.config;\n        var zIndex = config$$1.zIndex;\n        var that = this;\n\n        // å®ä¹åé\n        var $toolbarElem = void 0,\n            $textContainerElem = void 0,\n            $textElem = void 0,\n            $soundCodeElem = void 0,\n            $children = void 0;\n\n        if (textSelector == null) {\n            // åªä¼ å¥ä¸ä¸ªåæ°ï¼å³æ¯å®¹å¨çéæ©å¨æåç´ ï¼toolbar å text çåç´ èªè¡åå»º\n            $toolbarElem = $('<div></div>');\n            $textContainerElem = $('<div></div>');\n\n            // å°ç¼è¾å¨åºååæçåå®¹ï¼æå­èµ·æ¥\n            $children = $toolbarSelector.children();\n\n            // æ·»å å° DOM ç»æä¸­\n            $toolbarSelector.append($toolbarElem).append($textContainerElem);\n\n            // èªè¡åå»ºçï¼éè¦éç½®é»è®¤çæ ·å¼\n            $toolbarElem.css('background-color', '#f1f1f1').css('border', '1px solid #ccc');\n            $textContainerElem.css('border', '1px solid #ccc').css('border-top', 'none').css('height', '300px');\n        } else {\n            // toolbar å text çéæ©å¨é½æå¼ï¼è®°å½å±æ§\n            $toolbarElem = $toolbarSelector;\n            $textContainerElem = $(textSelector);\n            // å°ç¼è¾å¨åºååæçåå®¹ï¼æå­èµ·æ¥\n            $children = $textContainerElem.children();\n        }\n\n        // ç¼è¾åºå\n        $textElem = $('<div></div>');\n        $textElem.attr('contenteditable', 'true').css('width', '100%').css('height', '100%');\n        // æºç ç¼è¾åºå\n        $soundCodeElem = $('<textarea id=\"codeMirrorBox\"></textarea>');\n        $soundCodeElem.css('display', 'none').css('width', '100%').css('height', '100%').css('outline', 'none');\n\n        // çå¬æºç ç¼è¾åºåäºä»¶\n        $soundCodeElem[0].addEventListener('blur', function () {\n            // æºç ç¼è¾å¨å¤±ç¦æ¶è§¦å\n            var editorValue = $soundCodeElem[0].value; // è·åæºç å®¹å¨åæºç value(string)\n            that.txt.html(editorValue);\n        }, true);\n\n        // åå§åç¼è¾åºååå®¹\n        if ($children && $children.length) {\n            $textElem.append($children);\n        } else {\n            $textElem.append($('<p class=\"p\"><br></p>'));\n        }\n\n        // ç¼è¾åºåå å¥DOM\n        $textContainerElem.append($textElem);\n        $textContainerElem.append($soundCodeElem);\n\n        // è®¾ç½®éç¨ç class\n        $toolbarElem.addClass('w-e-toolbar');\n        $textContainerElem.addClass('w-e-text-container');\n        $textContainerElem.css('z-index', zIndex);\n        $textElem.addClass('w-e-text');\n        $soundCodeElem.addClass('w-e-soundCode');\n\n        // æ·»å  ID\n        var toolbarElemId = getRandom('toolbar-elem');\n        $toolbarElem.attr('id', toolbarElemId);\n        var textElemId = getRandom('text-elem');\n        $textElem.attr('id', textElemId);\n\n        // è®°å½å±æ§\n        this.$toolbarElem = $toolbarElem;\n        this.$textContainerElem = $textContainerElem;\n        this.$textElem = $textElem;\n        this.$soundCodeElem = $soundCodeElem;\n        this.toolbarElemId = toolbarElemId;\n        this.textElemId = textElemId;\n        this.codeMirror = CodeMirror.fromTextArea(document.getElementById('codeMirrorBox'), {\n            indentUnit: 0, // ç¼©è¿\n            mode: 'xml',\n            htmlMode: true,\n            lineNumbers: true,\n            lineWrapping: true\n        });\n\n        // è®¾ç½®æºç ç¼è¾åºåéè\n        var $codeMirrorContent = document.querySelector('.CodeMirror');\n        $codeMirrorContent.setAttribute('style', 'visibility: hidden');\n\n        // è®°å½è¾å¥æ³çå¼å§åç»æ\n        var compositionEnd = true;\n        $textContainerElem.on('compositionstart', function () {\n            // è¾å¥æ³å¼å§è¾å¥\n            compositionEnd = false;\n        });\n        $textContainerElem.on('compositionend', function () {\n            // è¾å¥æ³ç»æè¾å¥\n            compositionEnd = true;\n        });\n\n        // ç»å® onchange\n        $textContainerElem.on('click keyup', function () {\n            // è¾å¥æ³ç»ææåºå onchange\n            compositionEnd && _this.change && _this.change();\n        });\n        $toolbarElem.on('click', function () {\n            this.change && this.change();\n        });\n\n        //ç»å® onfocus ä¸ onblur äºä»¶\n        if (config$$1.onfocus || config$$1.onblur) {\n            // å½åç¼è¾å¨æ¯å¦æ¯ç¦ç¹ç¶æ\n            this.isFocus = false;\n\n            $(document).on('click', function (e) {\n                //å¤æ­å½åç¹å»åç´ æ¯å¦å¨ç¼è¾å¨å\n                var isChild = $textElem.isContain($(e.target));\n\n                //å¤æ­å½åç¹å»åç´ æ¯å¦ä¸ºå·¥å·æ \n                var isToolbar = $toolbarElem.isContain($(e.target));\n                var isMenu = $toolbarElem[0] == e.target ? true : false;\n\n                if (!isChild) {\n                    //è¥ä¸ºéæ©å·¥å·æ ä¸­çåè½ï¼åä¸è§ä¸ºæbluræä½\n                    if (isToolbar && !isMenu) {\n                        return;\n                    }\n\n                    if (_this.isFocus) {\n                        _this.onblur && _this.onblur();\n                    }\n                    _this.isFocus = false;\n                } else {\n                    if (!_this.isFocus) {\n                        _this.onfocus && _this.onfocus();\n                    }\n                    _this.isFocus = true;\n                }\n            });\n        }\n    },\n\n    // å°è£ command\n    _initCommand: function _initCommand() {\n        this.cmd = new Command(this);\n    },\n\n    // å°è£ selection range API\n    _initSelectionAPI: function _initSelectionAPI() {\n        this.selection = new API(this);\n    },\n\n    // æ·»å å¾çä¸ä¼ \n    _initUploadImg: function _initUploadImg() {\n        this.uploadImg = new UploadImg(this);\n    },\n\n    // åå§åèå\n    _initMenus: function _initMenus() {\n        this.menus = new Menus(this);\n        this.menus.init();\n    },\n\n    // æ·»å  text åºå\n    _initText: function _initText() {\n        this.txt = new Text(this);\n        this.txt.init();\n    },\n\n    // åå§åéåºï¼å°åæ å®ä½å°åå®¹å°¾é¨\n    initSelection: function initSelection(newLine) {\n        var $textElem = this.$textElem;\n        var $children = $textElem.children();\n        if (!$children.length) {\n            // å¦æç¼è¾å¨åºåæ åå®¹ï¼æ·»å ä¸ä¸ªç©ºè¡ï¼éæ°è®¾ç½®éåº\n            $textElem.append($('<p class=\"p\"><br></p>'));\n            this.initSelection();\n            return;\n        }\n\n        var $last = $children.last();\n\n        if (newLine) {\n            // æ°å¢ä¸ä¸ªç©ºè¡\n            var html = $last.html().toLowerCase();\n            var nodeName = $last.getNodeName();\n            if (html !== '<br>' && html !== '<br\\/>' || nodeName !== 'P') {\n                // æåä¸ä¸ªåç´ ä¸æ¯ <p><br></p>ï¼æ·»å ä¸ä¸ªç©ºè¡ï¼éæ°è®¾ç½®éåº\n                $textElem.append($('<p class=\"p\"><br></p>'));\n                this.initSelection();\n                return;\n            }\n        }\n\n        this.selection.createRangeByElem($last, false, true);\n        this.selection.restoreSelection();\n    },\n\n    // ç»å®äºä»¶\n    _bindEvent: function _bindEvent() {\n        // -------- ç»å® onchange äºä»¶ --------\n        var onChangeTimeoutId = 0;\n        var beforeChangeHtml = this.txt.html();\n        var config$$1 = this.config;\n\n        // onchange è§¦åå»¶è¿æ¶é´\n        var onchangeTimeout = config$$1.onchangeTimeout;\n        onchangeTimeout = parseInt(onchangeTimeout, 10);\n        if (!onchangeTimeout || onchangeTimeout <= 0) {\n            onchangeTimeout = 200;\n        }\n\n        var onchange = config$$1.onchange;\n        if (onchange && typeof onchange === 'function') {\n            // è§¦å change çæä¸ä¸ªåºæ¯ï¼\n            // 1. $textContainerElem.on('click keyup')\n            // 2. $toolbarElem.on('click')\n            // 3. editor.cmd.do()\n            this.change = function () {\n                // å¤æ­æ¯å¦æåå\n                var currentHtml = this.txt.html();\n\n                if (currentHtml.length === beforeChangeHtml.length) {\n                    // éè¦æ¯è¾æ¯ä¸ä¸ªå­ç¬¦\n                    if (currentHtml === beforeChangeHtml) {\n                        return;\n                    }\n                }\n\n                // æ§è¡ï¼ä½¿ç¨èæµ\n                if (onChangeTimeoutId) {\n                    clearTimeout(onChangeTimeoutId);\n                }\n                onChangeTimeoutId = setTimeout(function () {\n                    // è§¦åéç½®ç onchange å½æ°\n                    onchange(currentHtml);\n                    beforeChangeHtml = currentHtml;\n                }, onchangeTimeout);\n            };\n        }\n\n        // -------- ç»å® onblur äºä»¶ --------\n        var onblur = config$$1.onblur;\n        if (onblur && typeof onblur === 'function') {\n            this.onblur = function () {\n                var currentHtml = this.txt.html();\n                onblur(currentHtml);\n            };\n        }\n\n        // -------- ç»å® onfocus äºä»¶ --------\n        var onfocus = config$$1.onfocus;\n        if (onfocus && typeof onfocus === 'function') {\n            this.onfocus = function () {\n                onfocus();\n            };\n        }\n    },\n\n    // åå»ºç¼è¾å¨\n    create: function create() {\n        // åå§åéç½®ä¿¡æ¯\n        this._initConfig();\n\n        // åå§å DOM\n        this._initDom();\n\n        // å°è£ command API\n        this._initCommand();\n\n        // å°è£ selection range API\n        this._initSelectionAPI();\n\n        // æ·»å  text\n        this._initText();\n\n        // åå§åèå\n        this._initMenus();\n\n        // æ·»å  å¾çä¸ä¼ \n        this._initUploadImg();\n\n        // åå§åéåºï¼å°åæ å®ä½å°åå®¹å°¾é¨\n        this.initSelection(true);\n\n        // ç»å®äºä»¶\n        this._bindEvent();\n    },\n\n    // è§£ç»ææäºä»¶ï¼ææ¶ä¸å¯¹å¤å¼æ¾ï¼\n    _offAllEvent: function _offAllEvent() {\n        $.offAll();\n    }\n};\n\n// æ£éªæ¯å¦æµè§å¨ç¯å¢\ntry {\n    document;\n} catch (ex) {\n    throw new Error('è¯·å¨æµè§å¨ç¯å¢ä¸è¿è¡');\n}\n\n// polyfill\npolyfill();\n\n// è¿éç `inlinecss` å°è¢«æ¿æ¢æ css ä»£ç çåå®¹ï¼è¯¦æå¯å» ./gulpfile.js ä¸­æç´¢ `inlinecss` å³é®å­\nvar inlinecss = '/* BASICS */.CodeMirror {  /* Set height, width, borders, and global font properties here */  font-family: monospace;  height: 300px;  color: black;  direction: ltr;}/* PADDING */.CodeMirror-lines {  padding: 4px 0;  /* Vertical padding around content */}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {  padding: 0 4px;  /* Horizontal padding of content */}.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler {  background-color: white;  /* The little square between H and V scrollbars */}/* GUTTER */.CodeMirror-gutters {  border-right: 1px solid #ddd;  background-color: #f7f7f7;  white-space: nowrap;}.CodeMirror-linenumber {  padding: 0 3px 0 5px;  min-width: 20px;  text-align: right;  color: #999;  white-space: nowrap;}.CodeMirror-guttermarker {  color: black;}.CodeMirror-guttermarker-subtle {  color: #999;}/* CURSOR */.CodeMirror-cursor {  border-left: 1px solid black;  border-right: none;  width: 0;}/* Shown when moving in bi-directional text */.CodeMirror div.CodeMirror-secondarycursor {  border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {  width: auto;  border: 0 !important;  background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {  z-index: 1;}.cm-fat-cursor-mark {  background-color: rgba(20, 255, 20, 0.5);  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\\'#7f14ff14\\', endColorstr=\\'#7f14ff14\\');  animation: blink 1.06s steps(1) infinite;}:root .cm-fat-cursor-mark {  filter: none\\\\9;}.cm-animate-fat-cursor {  width: auto;  border: 0;  animation: blink 1.06s steps(1) infinite;  background-color: #7e7;}@keyframes blink {  50% {    background-color: transparent;  }}/* Can style cursor different in overwrite (non-insert) mode */.cm-tab {  display: inline-block;  *display: inline;  *zoom: 1;  text-decoration: inherit;}.CodeMirror-rulers {  position: absolute;  left: 0;  right: 0;  top: -50px;  bottom: 0;  overflow: hidden;}.CodeMirror-ruler {  border-left: 1px solid #ccc;  top: 0;  bottom: 0;  position: absolute;}/* DEFAULT THEME */.cm-s-default .cm-header {  color: blue;}.cm-s-default .cm-quote {  color: #090;}.cm-negative {  color: #d44;}.cm-positive {  color: #292;}.cm-header,.cm-strong {  font-weight: bold;}.cm-em {  font-style: italic;}.cm-link {  text-decoration: underline;}.cm-strikethrough {  text-decoration: line-through;}.cm-s-default .cm-keyword {  color: #708;}.cm-s-default .cm-atom {  color: #219;}.cm-s-default .cm-number {  color: #164;}.cm-s-default .cm-def {  color: #00f;}.cm-s-default .cm-variable-2 {  color: #05a;}.cm-s-default .cm-variable-3,.cm-s-default .cm-type {  color: #085;}.cm-s-default .cm-comment {  color: #a50;}.cm-s-default .cm-string {  color: #a11;}.cm-s-default .cm-string-2 {  color: #f50;}.cm-s-default .cm-meta {  color: #555;}.cm-s-default .cm-qualifier {  color: #555;}.cm-s-default .cm-builtin {  color: #30a;}.cm-s-default .cm-bracket {  color: #997;}.cm-s-default .cm-tag {  color: #170;}.cm-s-default .cm-attribute {  color: #00c;}.cm-s-default .cm-hr {  color: #999;}.cm-s-default .cm-link {  color: #00c;}.cm-s-default .cm-error {  color: #f00;}.cm-invalidchar {  color: #f00;}.CodeMirror-composing {  border-bottom: 2px solid;}/* Default styles for common addons */div.CodeMirror span.CodeMirror-matchingbracket {  color: #0b0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {  color: #a22;}.CodeMirror-matchingtag {  background: rgba(255, 150, 0, 0.3);  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\\'#4cff9600\\', endColorstr=\\'#4cff9600\\');}:root .CodeMirror-matchingtag {  filter: none\\\\9;}.CodeMirror-activeline-background {  background: #e8f2ff;}/* STOP *//* The rest of this file contains styles related to the mechanics of   the editor. You probably shouldn\\'t touch them. */.CodeMirror {  position: relative;  overflow: hidden;  background: white;}.CodeMirror-scroll {  overflow: scroll !important;  /* Things will break if this is overridden */  /* 30px is the magic margin used to hide the element\\'s real scrollbars */  /* See overflow: hidden in .CodeMirror */  margin-bottom: -30px;  margin-right: -30px;  padding-bottom: 30px;  height: 100%;  outline: none;  /* Prevent dragging from highlighting the element */  position: relative;}.CodeMirror-sizer {  position: relative;  border-right: 30px solid transparent;}/* The fake, visible scrollbars. Used to force redraw during scrolling   before actual scrolling happens, thus preventing shaking and   flickering artifacts. */.CodeMirror-vscrollbar,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler {  position: absolute;  z-index: 6;  display: none;}.CodeMirror-vscrollbar {  right: 0;  top: 0;  overflow-x: hidden;  overflow-y: scroll;}.CodeMirror-hscrollbar {  bottom: 0;  left: 0;  overflow-y: hidden;  overflow-x: scroll;}.CodeMirror-scrollbar-filler {  right: 0;  bottom: 0;}.CodeMirror-gutter-filler {  left: 0;  bottom: 0;}.CodeMirror-gutters {  position: absolute;  left: 0;  top: 0;  min-height: 100%;  z-index: 3;}.CodeMirror-gutter {  white-space: normal;  height: 100%;  display: inline-block;  *display: inline;  *zoom: 1;  vertical-align: top;  margin-bottom: -30px;}.CodeMirror-gutter-wrapper {  position: absolute;  z-index: 4;  background: none !important;  border: none !important;}.CodeMirror-gutter-background {  position: absolute;  top: 0;  bottom: 0;  z-index: 4;}.CodeMirror-gutter-elt {  position: absolute;  cursor: default;  z-index: 4;}.CodeMirror-gutter-wrapper ::-moz-selection {  background-color: transparent;}.CodeMirror-gutter-wrapper ::selection {  background-color: transparent;}.CodeMirror-gutter-wrapper ::-moz-selection {  background-color: transparent;}.CodeMirror-lines {  cursor: text;  min-height: 1px;  /* prevents collapsing before first draw */}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {  /* Reset some styles that the rest of the page might have set */  border-radius: 0;  border-width: 0;  background: transparent;  font-family: inherit;  font-size: inherit;  margin: 0;  white-space: pre;  word-wrap: normal;  line-height: inherit;  color: inherit;  z-index: 2;  position: relative;  overflow: visible;  -webkit-tap-highlight-color: transparent;  font-variant-ligatures: contextual;}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {  word-wrap: break-word;  white-space: pre-wrap;  word-break: normal;}.CodeMirror-linebackground {  position: absolute;  left: 0;  right: 0;  top: 0;  bottom: 0;  z-index: 0;}.CodeMirror-linewidget {  position: relative;  z-index: 2;  padding: 0.1px;  /* Force widget margins to stay inside of the container */}.CodeMirror-rtl pre {  direction: rtl;}.CodeMirror-code {  outline: none;}/* Force content-box sizing for the elements where we expect it */.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {  box-sizing: content-box;}.CodeMirror-measure {  position: absolute;  width: 100%;  height: 0;  overflow: hidden;  visibility: hidden;}.CodeMirror-cursor {  position: absolute;  pointer-events: none;}.CodeMirror-measure pre {  position: static;}div.CodeMirror-cursors {  visibility: hidden;  position: relative;  z-index: 3;}div.CodeMirror-dragcursors {  visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {  visibility: visible;}.CodeMirror-selected {  background: #d9d9d9;}.CodeMirror-focused .CodeMirror-selected {  background: #d7d4f0;}.CodeMirror-crosshair {  cursor: crosshair;}.CodeMirror-line::-moz-selection,.CodeMirror-line > span::-moz-selection,.CodeMirror-line > span > span::-moz-selection {  background: #d7d4f0;}.CodeMirror-line::selection,.CodeMirror-line > span::selection,.CodeMirror-line > span > span::selection {  background: #d7d4f0;}.CodeMirror-line::-moz-selection,.CodeMirror-line > span::-moz-selection,.CodeMirror-line > span > span::-moz-selection {  background: #d7d4f0;}.cm-searching {  background-color: #ffa;  background-color: rgba(255, 255, 0, 0.4);  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\\'#66ffff00\\', endColorstr=\\'#66ffff00\\');}:root .cm-searching {  filter: none\\\\9;}/* Used to force a border model for a node */.cm-force-border {  padding-right: .1px;}@media print {  /* Hide the cursor when printing */  .CodeMirror div.CodeMirror-cursors {    visibility: hidden;  }}/* See issue #2901 */.cm-tab-wrap-hack:after {  content: \\'\\';}/* Help users use markselection to safely style text background */span.CodeMirror-selectedtext {  background: none;}.w-e-toolbar,.w-e-text-container,.w-e-menu-panel {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-toolbar *,.w-e-text-container *,.w-e-menu-panel * {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-clear-fix:after {  content: \"\";  display: table;  clear: both;}.w-e-soundCode {  border: none;  padding: 0 10px;  font-size: 16px;}.w-e-toolbar .w-e-droplist {  position: absolute;  left: 0;  top: 0;  background-color: #fff;  border: 1px solid #f1f1f1;  border-right-color: #ccc;  border-bottom-color: #ccc;}.w-e-toolbar .w-e-droplist .w-e-dp-title {  text-align: center;  color: #999;  line-height: 2;  border-bottom: 1px solid #f1f1f1;  font-size: 13px;}.w-e-toolbar .w-e-droplist ul.w-e-list {  list-style: none;  line-height: 1;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item {  color: #333;  padding: 5px 0;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item:hover {  background-color: #f1f1f1;}.w-e-toolbar .w-e-droplist ul.w-e-block {  list-style: none;  text-align: left;  padding: 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item {  display: inline-block;  *display: inline;  *zoom: 1;  padding: 3px 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item:hover {  background-color: #f1f1f1;}@font-face {  font-family: \"w-e-icon\";  src: url(data:application/x-font-eot;charset=utf-8;base64,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);  /* IE9 */  src: url(data:application/x-font-eot;charset=utf-8;base64,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) format(\\'embedded-opentype\\'), /* IE6-IE8 */ url(\\'data:application/x-font-woff2;charset=utf-8;base64,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\\') format(\\'woff2\\'), url(data:application/x-font-woff;charset=utf-8;base64,) format(\\'woff\\'), url(data:application/x-font-ttf;charset=utf-8;base64,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1gFV/oATFwEBFxMBgFx3AgJ3/k8BVThHAQFHOP6rAVUBFxMBVRQXAnhbXHhUAUc4N0cC/VUXFAFVExcBAnhcW3hTAkc3OEcBAAUAAAAAA4ADAAADAAoAEQAVABkAAAEhFSEHFSM1IzcXAzMHJzM1MxchFSEDIRUhAdUBq/5V1VWAqquAgKuqgFXVAav+VVUCAP4AAtVVK6qqq6v+VqurqtVVAYBWAAAAAAMAAAAAA6YC+wAGAA0AEQAAAScHFwcXNyUPARc3JzcbARcDA3CjNqKiNtn9jaM22TaiogzMSswBtaM2o6M22dmjNtk2o6P99gLjFf0dAAAAAQAA//oC3QMCAAsAAAE1IxUzAyMVMzUjEwLd1Dq+T9M6vgK7Rkb9hkZGAnoAAAAAAAASAN4AAQAAAAAAAAAVAAAAAQAAAAAAAQAIABUAAQAAAAAAAgAHAB0AAQAAAAAAAwAIACQAAQAAAAAABAAIACwAAQAAAAAABQALADQAAQAAAAAABgAIAD8AAQAAAAAACgArAEcAAQAAAAAACwATAHIAAwABBAkAAAAqAIUAAwABBAkAAQAQAK8AAwABBAkAAgAOAL8AAwABBAkAAwAQAM0AAwABBAkABAAQAN0AAwABBAkABQAWAO0AAwABBAkABgAQAQMAAwABBAkACgBWARMAAwABBAkACwAmAWkKQ3JlYXRlZCBieSBpY29uZm9udAp3LWUtaWNvblJlZ3VsYXJ3LWUtaWNvbnctZS1pY29uVmVyc2lvbiAxLjB3LWUtaWNvbkdlbmVyYXRlZCBieSBzdmcydHRmIGZyb20gRm9udGVsbG8gcHJvamVjdC5odHRwOi8vZm9udGVsbG8uY29tAAoAQwByAGUAYQB0AGUAZAAgAGIAeQAgAGkAYwBvAG4AZgBvAG4AdAAKAHcALQBlAC0AaQBjAG8AbgBSAGUAZwB1AGwAYQByAHcALQBlAC0AaQBjAG8AbgB3AC0AZQAtAGkAYwBvAG4AVgBlAHIAcwBpAG8AbgAgADEALgAwAHcALQBlAC0AaQBjAG8AbgBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAEZARoBGwEcAR0ABGZvbnQFaGFwcHkFaW1hZ2UMbGlzdG51bWJlcmVkC3BhaW50LWJydXNoCnF1b3Rlc2xlZnQGdGFibGUyBmlmcmFtZQVsaXN0MgZmb3JtYXQEbGluawh0ZXJtaW5hbAR1bmRvD3BhcmFncmFwaC1yaWdodA5wYXJhZ3JhcGgtbGVmdBBwYXJhZ3JhcGgtY2VudGVyBmhlYWRlcgl1bmRlcmxpbmUEUGxheQRyZWRvB3BlbmNpbDIKdGV4dC1oZWlnaA1zdHJpa2V0aHJvdWdoBGJvbGQLbGluZS1oZWlnaHQKc291bmQtY29kZQZpdGFsaWMAAAA=) format(\\'truetype\\'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */ url(data:application/x-font-svg;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPCEtLQoyMDEzLTktMzA6IENyZWF0ZWQuCi0tPgo8c3ZnPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgaWNvbmZvbnQKPC9tZXRhZGF0YT4KPGRlZnM+Cgo8Zm9udCBpZD0idy1lLWljb24iIGhvcml6LWFkdi14PSIxMDI0IiA+CiAgPGZvbnQtZmFjZQogICAgZm9udC1mYW1pbHk9InctZS1pY29uIgogICAgZm9udC13ZWlnaHQ9IjUwMCIKICAgIGZvbnQtc3RyZXRjaD0ibm9ybWFsIgogICAgdW5pdHMtcGVyLWVtPSIxMDI0IgogICAgYXNjZW50PSI4OTYiCiAgICBkZXNjZW50PSItMTI4IgogIC8+CiAgICA8bWlzc2luZy1nbHlwaCAvPgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0iZm9udCIgdW5pY29kZT0iJiM1OTI5NjsiIGQ9Ik03MjAuMjc5MzU3OTEgNzQzLjA1NjgyMzczYy02NS41NTU0MTk5MiAwLTEwNy42MzI1MDczMiAxMS43MzE3NTA0OS0xNzUuMTQ1NjkwOTEgMTEuNzMxNzUwNDktMjE4LjE4NjgyODYyIDAtMzE5Ljk0NjA0NDkyLTEyNC4yNTg2NjctMzE5Ljk0NjA0NDkyLTI1MC40NzUwOTc2NiAwLTc0LjM2NTM1NjQ1IDM1LjIyNDkxNDU1LTk4LjgyMjU3MDggMTA0LjY5NTg2MTgtOTguODIyNTcwOC00Ljg5NDQwOTE4IDEwLjc2NzcwMDItMTMuNzA0MzQ1NyAyMi41MTQyODIyMy0xMy43MDQzNDU3IDc1LjM0NDIzODI4IDAgMTQ3LjczNjk5OTUxIDU1Ljc2NjYwMTU2IDE5MC43OTI5Njg3NSAxMjcuMTk1MzEyNSAxOTMuNzI5NjE0MjYgMCAwLTU4LjU5OTQyNjI3LTU3NC41NTkxNDMwNy0yMjguNjg3NTYxMDMtNjQzLjQ4MTMyMzI0bDAtMTcuODcyMDA5MjggMjI5LjI4MDgyMjc1IDAgNzguMjM2Mzg5MTYgMzcwLjc4ODU3NDIyIDE0My4yNzI3MDUwOCAwIDMxLjkxNzQ4MDQ3IDkyLjY5NzE0MzU2LTE1NS42NDIyMTE5MSAwIDM3LjYxMjc5Mjk3IDE3OC4yODk5NzgwMmM0My4wNTU5NjkyNC04LjgwOTkzNjUyIDg1LjExODIyNTEtMTcuNjA1MDQxNTEgMTIxLjMyMjAyMTQ4LTE3LjYwNTA0MTUgNDUuMDEzNzMyOTEgMCA4Ni4wOTcxMDY5MyAxMy43MDQzNDU3IDEwOC42MTEzODkxNiAxMTcuNDA2NDk0MTQtMjcuMzkzODU5ODctOC44MDk5MzY1Mi01Ni43NDU0ODMzOS0xMS43MzE3NTA0OS04OS4wMzM3NTI0NC0xMS43MzE3NTA0OXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJoYXBweSIgdW5pY29kZT0iJiM1OTMwNDsiIGQ9Ik01MTIgMTMuMjExNDI1NzgwMDAwMDEzYzIwNC43NzkxMTM3NyAwIDM3MC43ODg1NzQyMiAxNjYuMDA5NDYwNDUgMzcwLjc4ODU3NDIyIDM3MC43ODg1NzQyMnMtMTY2LjAwOTQ2MDQ1IDM3MC43ODg1NzQyMi0zNzAuNzg4NTc0MjIgMzcwLjc4ODU3NDIyLTM3MC43ODg1NzQyMi0xNjYuMDA5NDYwNDUtMzcwLjc4ODU3NDIyLTM3MC43ODg1NzQyMiAxNjYuMDA5NDYwNDUtMzcwLjc4ODU3NDIyIDM3MC43ODg1NzQyMi0zNzAuNzg4NTc0MjJ6TTUxMiA2ODUuMjU4MzAwNzhjMTY2LjM4MDI0OTAzIDAgMzAxLjI3MzEzMjMyLTEzNC44NzgwNTE3NiAzMDEuMjczMTMyMzItMzAxLjI3MzEzMjMycy0xMzQuODc4MDUxNzYtMzAxLjI3MzEzMjMyLTMwMS4yNzMxMzIzMi0zMDEuMjczMTMyMzMtMzAxLjI3MzEzMjMyIDEzNC44NzgwNTE3Ni0zMDEuMjczMTMyMzIgMzAxLjI3MzEzMjMzIDEzNC44NzgwNTE3NiAzMDEuMjczMTMyMzIgMzAxLjI3MzEzMjMyIDMwMS4yNzMxMzIzMnpNNTEyIDMyMS4xNzM1ODM5OGM4My45NzYxOTYyOCAwIDE2My44MjkyMjM2NCAyMi4zMDY2NDA2MyAyMzEuNzQyODU4ODggNjEuNDkxNTc3MTYtMTAuNTYwMDU4NTktMTI5LjIyNzIzMzg4LTExMC44OTU0NDY3OC0yMzAuNDA4MDIwMDItMjMxLjc0Mjg1ODg4LTIzMC40MDgwMjAwMnMtMjIxLjE4MjgwMDI5IDEwMS4yOTk0Mzg0OC0yMzEuNzQyODU4ODggMjMwLjUxMTg0MDgxYzY3LjkxMzYzNTI2LTM5LjE4NDkzNjUzIDE0Ny43NjY2NjI2LTYxLjYxMDIyOTQ5IDIzMS43NDI4NTg4OC02MS42MTAyMjk0OXpNMzI2LjYwNTcxMjg5IDQ5OS44NjQwMTM2N2MwIDM4LjM5ODg2NDc0IDIwLjc0OTMyODYyIDY5LjUzMDI3MzQ0IDQ2LjM0ODU3MTc4IDY5LjUzMDI3MzQ0czQ2LjM0ODU3MTc3LTMxLjEzMTQwODY5IDQ2LjM0ODU3MTc4LTY5LjUzMDI3MzQ0YzAtMzguMzk4ODY0NzQtMjAuNzQ5MzI4NjItNjkuNTMwMjczNDQtNDYuMzQ4NTcxNzgtNjkuNTMwMjczNDRzLTQ2LjM0ODU3MTc3IDMxLjEzMTQwODY5LTQ2LjM0ODU3MTc4IDY5LjUzMDI3MzQ0ek02MDQuNjk3MTQzNTYgNDk5Ljg2NDAxMzY3YzAgMzguMzk4ODY0NzQgMjAuNzQ5MzI4NjIgNjkuNTMwMjczNDQgNDYuMzQ4NTcxNzcgNjkuNTMwMjczNDRzNDYuMzQ4NTcxNzctMzEuMTMxNDA4NjkgNDYuMzQ4NTcxNzgtNjkuNTMwMjczNDRjMC0zOC4zOTg4NjQ3NC0yMC43NDkzMjg2Mi02OS41MzAyNzM0NC00Ni4zNDg1NzE3OC02OS41MzAyNzM0NHMtNDYuMzQ4NTcxNzcgMzEuMTMxNDA4NjktNDYuMzQ4NTcxNzggNjkuNTMwMjczNDR6IiAgaG9yaXotYWR2LXg9IjEwMjQiIC8+CgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0iaW1hZ2UiIHVuaWNvZGU9IiYjNTkzMjQ7IiBkPSJNODgxLjAzOTM3NSA3MDAuNDA2MjVjMC4wMzM3NS0wLjAzMzc1IDAuMDY3NS0wLjA2NzUgMC4xMDEyNS0wLjEwMTI1bDAtNjMyLjYyNjg3NWMtMC4wMzM3NS0wLjAzMzc1LTAuMDY3NS0wLjA2NzUtMC4xMDEyNS0wLjEwMTI1bC03MzguMDk1NjI1IDBjLTAuMDMzNzUgMC4wMzM3NS0wLjA2NzUgMC4wNjc1LTAuMTAxMjUgMC4xMDEyNWwwIDYzMi42MjY4NzVjMC4wMzM3NSAwLjAzMzc1IDAuMDY3NSAwLjA2NzUgMC4xMDEyNSAwLjEwMTI1bDczOC4wOTU2MjUgMHpNODgxLjE0MDYyNSA3NTMuMTQwNjI1bC03MzguMjgxMjUgMGMtMjkuMDA4MTI1IDAtNTIuNzM0Mzc1LTIzLjcyNjI1LTUyLjczNDM3NS01Mi43MzQzNzVsMC02MzIuODEyNWMwLTI5LjAwODEyNSAyMy43MjYyNS01Mi43MzQzNzUgNTIuNzM0Mzc1LTUyLjczNDM3NWw3MzguMjgxMjUgMGMyOS4wMDgxMjUgMCA1Mi43MzQzNzUgMjMuNzI2MjUgNTIuNzM0Mzc1IDUyLjczNDM3NWwwIDYzMi44MTI1YzAgMjkuMDA4MTI1LTIzLjcyNjI1IDUyLjczNDM3NS01Mi43MzQzNzUgNTIuNzM0Mzc1bDAgMHpNNzc1LjY3MTg3NSA1NjguNTYxODc1YzAtNDMuNjg5Mzc1LTM1LjQyMDYyNS03OS4xMS03OS4xMS03OS4xMXMtNzkuMTEgMzUuNDIwNjI1LTc5LjExIDc5LjExIDM1LjQyMDYyNSA3OS4xMSA3OS4xMSA3OS4xMSA3OS4xMS0zNS40MjA2MjUgNzkuMTEtNzkuMTF6TTgyOC40MDYyNSAxMjAuMzI4MTI1bC02MzIuODEyNSAwIDAgMTA1LjQ2ODc1IDE4NC41Nzg3NSAzMTYuNDA2MjUgMjEwLjkzNzUtMjYzLjY3MTg3NSA1Mi43MzQzNzUgMCAxODQuNTc4NzUgMTU4LjIwMzEyNXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJsaXN0bnVtYmVyZWQiIHVuaWNvZGU9IiYjNTkzNzQ7IiBkPSJNNDE5LjMwMjg1NjQ0IDE1Mi4yNTcxNDExMjAwMDAwM2w0NjMuNDg1NzE3NzggMCAwLTkyLjY5NzE0MzU2LTQ2My40ODU3MTc3OCAwek00MTkuMzAyODU2NDQgNDMwLjM0ODU3MTc3bDQ2My40ODU3MTc3OCAwIDAtOTIuNjk3MTQzNTQtNDYzLjQ4NTcxNzc4IDB6TTQxOS4zMDI4NTY0NCA3MDguNDQwMDAyNDRsNDYzLjQ4NTcxNzc4IDAgMC05Mi42OTcxNDM1Ni00NjMuNDg1NzE3NzggMHpNMjgwLjI1NzE0MTEyIDc1NC43ODg1NzQyMmwwLTE4NS4zOTQyODcxMS00Ni4zNDg1NzE3OSAwIDAgMTM5LjA0NTcxNTMzLTQ2LjM0ODU3MTc3IDAgMCA0Ni4zNDg1NzE3OHpNMjMzLjkwODU2OTMzIDM3My44NTUyMjQ2MTAwMDAwNWwxZS04LTM2LjIwMzc5NjM5IDkyLjY5NzE0MzU1IDAgMC00Ni4zNDg1NzE3OC0xMzkuMDQ1NzE1MzMgMCAwIDEwNS43MzQwNjk4MyA5Mi42OTcxNDM1NiA0My40NTY0MjA5IDAgMzYuMjAzNzk2MzgtOTIuNjk3MTQzNTYgMCAwIDQ2LjM0ODU3MTc4IDEzOS4wNDU3MTUzMyAwIDAtMTA1LjczNDA2OTgyek0zMjYuNjA1NzEyODkgMjQ0Ljk1NDI4NDY3bDAtMjMxLjc0Mjg1ODg5LTEzOS4wNDU3MTUzMyAwIDAgNDYuMzQ4NTcxNzggOTIuNjk3MTQzNTYgMCAwIDQ2LjM0ODU3MTc4LTkyLjY5NzE0MzU2IDAgMCA0Ni4zNDg1NzE3OCA5Mi42OTcxNDM1NiAwIDAgNDYuMzQ4NTcxNzctOTIuNjk3MTQzNTYgMCAwIDQ2LjM0ODU3MTc4eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9InBhaW50LWJydXNoIiB1bmljb2RlPSImIzU4OTYzOyIgZD0iTTg0Ni45OTE4NTgwNiA3MjcuOTU1MzQwODljLTM1Ljc2MjM4MTI4IDM1Ljc2MjM4MTI4LTkzLjczMzE1NTA3IDM1Ljc2MjM4MTI4LTEyOS40OTU1MzYzNiAwTDQ1Ni40OTA0NjU3MyA0NjYuOTk1Mjc1ODRjNjAuNDY2MzU2MTYtMjEuNTQ0NDMwNCAxMDguMDQyNjg3MTEtNjkuMTQzNjU2MSAxMjkuNDk1NTM2MzUtMTI5LjU4NzExNzUxbDI2MS4wMDU4NTUyNiAyNjEuMDUxNjQ1NDhDODgyLjc3NzEzNDA4IDYzNC4yMjIxODUwNzk5OTk5IDg4Mi43NzcxMzQwOCA2OTIuMTkyOTU5NjEgODQ2Ljk5MTg1ODA2IDcyNy45NTUzNDA4OXpNNTA3LjQ1NTI5MzcgMjY2LjM4NzA5MTA1YzAgNjcuNDI2NTEyNDktNTQuNzQyNTQzNjMgMTIyLjA3NzQ3NTY4LTEyMi4xNjkwNTYxMyAxMjIuMDc3NDc1NjlzLTEyMi4wNzc0NzU2OC01NC42NTA5NjMyLTEyMi4wNzc0NzU2OC0xMjIuMDc3NDc1NjlsMC4wOTE1ODExNi0wLjA5MTU4MTE2QzI2My4yMDg3NjE5IDE3NS45NzM3NDcyOSAyMTQuMTIxMzQ0MzggOTcuMTY4Mjk1NDM5OTk5OTUgMTQxLjIyMjg2NzM3IDU0Ljk3MjM0ODU3MDAwMDAxbDAuMzY2MzIzOS0wLjQ1NzkwNTA0QzE3Ny40NDMxNTM3IDMzLjk1NDUwODkxOTk5OTk3IDIxOC45NTIyNDIyNSAyMi4xNDA1NTkyNTAwMDAwMjQgMjYzLjMwMDM0MjMyIDIyLjE0MDU1OTI1MDAwMDAyNCAzOTguMTc2MjYyNzcgMjIuMTQwNTU5MjUwMDAwMDI0IDUwNy41NDY4NzQxMiAxMzEuNTExMTcwNiA1MDcuNTQ2ODc0MTIgMjY2LjM4NzA5MTA1TDUwNy40NTUyOTM3IDI2Ni4zODcwOTEwNXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJxdW90ZXNsZWZ0IiB1bmljb2RlPSImIzU5NDE5OyIgZD0iTTI1OS43NDY4NzUgNDgyLjkxNjY2NjY2QzM2OC40NzgxMjUgNDgyLjkxNjY2NjY2IDQ1Ni42MjE4NzUgMzk0Ljc3MjkxNjY2IDQ1Ni42MjE4NzUgMjg2LjA0MTY2NjY2MDAwMDAzIDQ1Ni42MjE4NzUgMTc3LjMxMDQxNjY2IDM2OC40NzgxMjUgODkuMTY2NjY2NjYwMDAwMDMgMjU5Ljc0Njg3NSA4OS4xNjY2NjY2NjAwMDAwMyAxNTEuMDE1NjI1IDg5LjE2NjY2NjY2MDAwMDAzIDYyLjg3MTg3NSAxNzcuMzEwNDE2NjYgNjIuODcxODc1IDI4Ni4wNDE2NjY2NjAwMDAwM0w2MiAzMTQuMTY2NjY2NjYwMDAwMDNDNjIgNTMxLjYyOTE2NjY2IDIzOC4yODc1IDcwNy45MTY2NjY2NiA0NTUuNzUgNzA3LjkxNjY2NjY2TDQ1NS43NSA1OTUuNDE2NjY2NjU5OTk5OUMzODAuNjI4MTI1IDU5NS40MTY2NjY2NTk5OTk5IDMxMC4wMDYyNSA1NjYuMTY2NjY2NjU5OTk5OSAyNTYuODc4MTI1IDUxMy4wMzg1NDE2NiAyNDYuNjQwNjI1IDUwMi44MDEwNDE2NiAyMzcuMzMxMjUgNDkxLjk0NDc5MTY2IDIyOC44OTM3NSA0ODAuNDk3OTE2NjYgMjM4Ljk2MjUgNDgyLjA3MjkxNjY2IDI0OS4yNTYyNSA0ODIuOTE2NjY2NjYgMjU5Ljc0Njg3NSA0ODIuOTE2NjY2NjZaTTc2NS45OTY4NzUgNDgyLjkxNjY2NjY2Qzg3NC43MjgxMjUgNDgyLjkxNjY2NjY2IDk2Mi44NzE4NzUgMzk0Ljc3MjkxNjY2IDk2Mi44NzE4NzUgMjg2LjA0MTY2NjY2MDAwMDAzIDk2Mi44NzE4NzUgMTc3LjMxMDQxNjY2IDg3NC43MjgxMjUgODkuMTY2NjY2NjYwMDAwMDMgNzY1Ljk5Njg3NSA4OS4xNjY2NjY2NjAwMDAwMyA2NTcuMjY1NjI1IDg5LjE2NjY2NjY2MDAwMDAzIDU2OS4xMjE4NzUgMTc3LjMxMDQxNjY2IDU2OS4xMjE4NzUgMjg2LjA0MTY2NjY2MDAwMDAzTDU2OC4yNSAzMTQuMTY2NjY2NjYwMDAwMDNDNTY4LjI1IDUzMS42MjkxNjY2NiA3NDQuNTM3NSA3MDcuOTE2NjY2NjYgOTYyIDcwNy45MTY2NjY2Nkw5NjIgNTk1LjQxNjY2NjY1OTk5OTlDODg2Ljg3ODEyNSA1OTUuNDE2NjY2NjU5OTk5OSA4MTYuMjU2MjUgNTY2LjE2NjY2NjY1OTk5OTkgNzYzLjEyODEyNSA1MTMuMDM4NTQxNjYgNzUyLjg5MDYyNSA1MDIuODAxMDQxNjYgNzQzLjU1MzEyNSA0OTEuOTQ0NzkxNjYgNzM1LjE0Mzc1IDQ4MC40OTc5MTY2NiA3NDUuMjEyNSA0ODIuMDcyOTE2NjYgNzU1LjUwNjI1IDQ4Mi45MTY2NjY2NiA3NjUuOTk2ODc1IDQ4Mi45MTY2NjY2NloiICBob3Jpei1hZHYteD0iMTAyNSIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJ0YWJsZTIiIHVuaWNvZGU9IiYjNTk1MTg7IiBkPSJNOTAuMTI1IDc1My4xNDA2MjVsMC03MzguMjgxMjUgODQzLjc1IDBMOTMzLjg3NSA3NTMuMTQwNjI1IDkwLjEyNSA3NTMuMTQwNjI1ek00MDYuNTMxMjUgMjc4LjUzMTI1bDAgMTU4LjIwMzEyNSAyMTAuOTM3NSAwIDAtMTU4LjIwMzEyNUw0MDYuNTMxMjUgMjc4LjUzMTI1ek02MTcuNDY4NzUgMjI1Ljc5Njg3NWwwLTE1OC4yMDMxMjVMNDA2LjUzMTI1IDY3LjU5Mzc1bDAgMTU4LjIwMzEyNUw2MTcuNDY4NzUgMjI1Ljc5Njg3NXpNNjE3LjQ2ODc1IDY0Ny42NzE4NzVsMC0xNTguMjAzMTI1TDQwNi41MzEyNSA0ODkuNDY4NzUgNDA2LjUzMTI1IDY0Ny42NzE4NzUgNjE3LjQ2ODc1IDY0Ny42NzE4NzV6TTM1My43OTY4NzUgNjQ3LjY3MTg3NWwwLTE1OC4yMDMxMjVMMTQyLjg1OTM3NSA0ODkuNDY4NzUgMTQyLjg1OTM3NSA2NDcuNjcxODc1IDM1My43OTY4NzUgNjQ3LjY3MTg3NXpNMTQyLjg1OTM3NSA0MzYuNzM0Mzc1bDIxMC45Mzc1IDAgMC0xNTguMjAzMTI1TDE0Mi44NTkzNzUgMjc4LjUzMTI1IDE0Mi44NTkzNzUgNDM2LjczNDM3NXpNNjcwLjIwMzEyNSA0MzYuNzM0Mzc1bDIxMC45Mzc1IDAgMC0xNTguMjAzMTI1TDY3MC4yMDMxMjUgMjc4LjUzMTI1IDY3MC4yMDMxMjUgNDM2LjczNDM3NXpNNjcwLjIwMzEyNSA0ODkuNDY4NzVMNjcwLjIwMzEyNSA2NDcuNjcxODc1bDIxMC45Mzc1IDAgMC0xNTguMjAzMTI1TDY3MC4yMDMxMjUgNDg5LjQ2ODc1ek0xNDIuODU5Mzc1IDIyNS43OTY4NzVsMjEwLjkzNzUgMCAwLTE1OC4yMDMxMjVMMTQyLjg1OTM3NSA2Ny41OTM3NSAxNDIuODU5Mzc1IDIyNS43OTY4NzV6TTY3MC4yMDMxMjUgNjcuNTkzNzVsMCAxNTguMjAzMTI1IDIxMC45Mzc1IDAgMC0xNTguMjAzMTI1TDY3MC4yMDMxMjUgNjcuNTkzNzV6IiAgaG9yaXotYWR2LXg9IjEwMjQiIC8+CgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0iaWZyYW1lIiB1bmljb2RlPSImIzU5MjEyOyIgZD0iTTcyIDc0NGwwLTcyMCA5MDAgMEw5NzIgNzQ0IDcyIDc0NHpNNDkyIDY4NGwwLTEyMEwxMzIgNTY0IDEzMiA2ODQgNDkyIDY4NHpNMTMyIDMyNEwxMzIgNTA0bDM2MCAwIDAtMTgwTDEzMiAzMjR6TTEzMiAyNjRsMjQwIDAgMC0xODBMMTMyIDg0IDEzMiAyNjR6TTkxMiA4NEw0MzIgODRsMCAxODAgNDgwIDBMOTEyIDg0ek05MTIgMzI0TDU1MiAzMjQgNTUyIDUwNCA1NTIgNTY0IDU1MiA2ODRsMzYwIDBMOTEyIDMyNHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJsaXN0MiIgdW5pY29kZT0iJiM1ODg4MTsiIGQ9Ik00MTkuMzAyODU2NDQgNzA4LjQ0MDAwMjQ0aDQ2My40ODU3MTc3OHYtOTIuNjk3MTQzNTZINDE5LjMwMjg1NjQ0VjcwOC40NDAwMDI0NHogbTFlLTgtMjc4LjA5MTQzMDY3aDQ2My40ODU3MTc3N3YtOTIuNjk3MTQzNTRINDE5LjMwMjg1NjQ0VjQzMC4zNDg1NzE3N3ogbTAtMjc4LjA5MTQzMDY1aDQ2My40ODU3MTc3N3YtOTIuNjk3MTQzNTZINDE5LjMwMjg1NjQ0djkyLjY5NzE0MzU2ek0xNDEuMjExNDI1NzggNjYyLjA5MTQzMDY3YTkyLjY5NzE0MzU2IDkyLjY5NzE0MzU2IDAgMSAwIDE4NS4zNDc5Mzg1NCAwLjA0NjM0ODU3QTkyLjY5NzE0MzU2IDkyLjY5NzE0MzU2IDAgMCAwIDE0MS4yMTE0MjU3OCA2NjIuMDkxNDMwNjd6IG0wLTI3OC4wOTE0MzA2N2E5Mi42OTcxNDM1NiA5Mi42OTcxNDM1NiAwIDEgMCAxODUuMzQ3OTM4NTQgMC4wNDYzNDg1OEE5Mi42OTcxNDM1NiA5Mi42OTcxNDM1NiAwIDAgMCAxNDEuMjExNDI1NzggMzg0eiBtMC0yNzguMDkxNDMwNjdhOTIuNjk3MTQzNTYgOTIuNjk3MTQzNTYgMCAxIDAgMTg1LjM0NzkzODU0IDAuMDQ2MzQ4NTlBOTIuNjk3MTQzNTYgOTIuNjk3MTQzNTYgMCAwIDAgMTQxLjIxMTQyNTc4IDEwNS45MDg1NjkzMjk5OTk5OHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJmb3JtYXQiIHVuaWNvZGU9IiYjNTg5NzE7IiBkPSJNNjYwLjUxMDkzMzMzIDc2MC40OTgxMzMzM2MtNy4yMjAyNjY2NyA3LjIyMTMzMzMzLTE5LjAzNDY2NjY3IDcuMjIxMzMzMzMtMjYuMjU2IDBMNDUuNDUyOCAxNzEuNjk0OTMzMzMwMDAwMDNjLTcuMjIwMjY2NjctNy4yMTkyLTcuMjIwMjY2NjctMTkuMDM0NjY2NjcgMC0yNi4yNTQ5MzMzNGwxMTQuNTE3MzMzMzMtMTE0LjUxODRjNy4yMjEzMzMzMy03LjIyMDI2NjY3IDIxLjQ4MjY2NjY3LTEzLjEyNzQ2NjY3IDMxLjY5Mzg2NjY3LTEzLjEyNzQ2NjY2SDU1OC41MjhjMTAuMjEwMTMzMzMgMCAyNC40NzM2IDUuOTA3MiAzMS42OTI4IDEzLjEyNzQ2NjY2bDM4Ni44MDUzMzMzMyAzODYuODAzMmM3LjIyMTMzMzMzIDcuMjIwMjY2NjcgNy4yMjEzMzMzMyAxOS4wMzQ2NjY2NyAwIDI2LjI1Nkw2NjAuNTEyIDc2MC40OTgxMzMzM3pNNTUzLjc5OTQ2NjY3IDEwMC43NzY1MzMzM2MtNy4yMjAyNjY2Ny03LjIxOTItMjEuNDgyNjY2NjctMTMuMTI3NDY2NjctMzEuNjkyOC0xMy4xMjc0NjY2N0gyMzguMDczNmMtMTAuMjExMiAwLTI0LjQ3MzYgNS45MDgyNjY2Ny0zMS42OTI4IDEzLjEyNzQ2NjY3bC01My45ODQgNTMuOTg0Yy03LjIyMDI2NjY3IDcuMjIwMjY2NjctNy4yMjAyNjY2NyAxOS4wMzQ2NjY2NyAwIDI2LjI1NmwyMTUuODUwNjY2NjcgMjE1Ljg1MTczMzMzYzcuMjIxMzMzMzMgNy4yMTkyIDE5LjAzNTczMzMzIDcuMjE5MiAyNi4yNTcwNjY2NiAwbDIxNC41NjUzMzMzNC0yMTQuNTY2NGM3LjIyMDI2NjY3LTcuMjE5MiA3LjIyMDI2NjY3LTE5LjAzNDY2NjY3IDAtMjYuMjU0OTMzMzNsLTU1LjI3MDQtNTUuMjcwNHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJsaW5rIiB1bmljb2RlPSImIzU4OTMwOyIgZD0iTTUzNi43MzI0MjE4OCAyNTcuMDk0NzI2NTZsLTE0Ny40OTgwNDY4OC0xNDcuNDk4MDQ2ODdxLTMyLjE0MTYwMTU2LTMxLjMyNDIxODc1LTc2LjYyMzA0Njg4LTMxLjMyNDIxODc1dC03NS44MDU2NjQwNiAzMS4zMjQyMTg3NXEtMzIuMTQxNjAxNTYgMzIuMTQxNjAxNTYtMzIuMTQxNjAxNTYgNzYuNjIzMDQ2ODd0MzIuMTQxNjAxNTYgNzYuNjIzMDQ2ODhsMTQ2LjY4MDY2NDA3IDE0Ny40OTgwNDY4N3E5LjA3MDMxMjUgOC4yNTI5Mjk2OSA5LjA3MDMxMjQ5IDIwLjU5Mjc3MzQ0dC04LjY0ODQzNzUgMjEuMDE0NjQ4NDQtMjEuMDE0NjQ4NDMgOC42NDg0Mzc1LTIwLjU5Mjc3MzQ0LTkuMDcwMzEyNUwxOTQuODAyNzM0MzcgMzA0Ljg0NTcwMzEyMDAwMDA1cS00OS40Mzg0NzY1Ni00OS40Mzg0NzY1Ni00OS40Mzg0NzY1Ni0xMTguNjUyMzQzNzR0NDkuMDE2NjAxNTctMTE4LjIzMDQ2ODc1IDExOC4yMzA0Njg3NC00OS4wMTY2MDE1NyAxMTguNjUyMzQzNzUgNDguNjIxMDkzNzVsMTQ3LjQ5ODA0Njg4IDE0Ny40OTgwNDY4OHE4LjI1MjkyOTY5IDkuMDcwMzEyNSA4LjI1MjkyOTY5IDIxLjQzNjUyMzQzdC04LjY0ODQzNzUgMjEuMDE0NjQ4NDQtMjEuMDE0NjQ4NDQgOC42NDg0Mzc1LTIwLjU5Mjc3MzQ0LTkuMDcwMzEyNXpNODMxLjI4MDI3MzQ0IDcwNC45NDE0MDYyNXEtNDkuMDE2NjAxNTYgNDkuMDE2NjAxNTYtMTE4LjIzMDQ2ODc1IDQ5LjAxNjYwMTU2dC0xMTguNjUyMzQzNzUtNDkuNDM4NDc2NTZsLTE0Ny40OTgwNDY4OC0xNDcuNDk4MDQ2ODhxLTguMjUyOTI5NjktOC4yNTI5Mjk2OS04LjI1MjkyOTY4LTIwLjU5Mjc3MzQzdDguNjQ4NDM3NS0yMS4wMTQ2NDg0NCAyMS4wMTQ2NDg0My04LjY0ODQzNzUgMjAuNTkyNzczNDQgOC4yNTI5Mjk2OWwxNDcuNDk4MDQ2ODggMTQ3LjQ5ODA0Njg3cTMyLjE0MTYwMTU2IDMyLjE0MTYwMTU2IDc2LjYyMzA0Njg3IDMyLjE0MTYwMTU3dDc2LjIyNzUzOTA2LTMxLjcxOTcyNjU3IDMxLjcxOTcyNjU3LTc2LjYyMzA0Njg3LTMyLjE0MTYwMTU3LTc2LjIyNzUzOTA3bC0xNDYuNjgwNjY0MDYtMTQ3LjQ5ODA0Njg3cS05LjA3MDMxMjUtOC4yNTI5Mjk2OS05LjA3MDMxMjUtMjAuNTkyNzczNDR0OC42NDg0Mzc1LTIxLjAxNDY0ODQ0IDIxLjAxNDY0ODQ0LTguNjQ4NDM3NSAyMS40MzY1MjM0NCA4LjI1MjkyOTY5bDE0Ny40OTgwNDY4NyAxNDcuNDk4MDQ2ODhxNDguNjIxMDkzNzUgNDkuNDM4NDc2NTYgNDguNjIxMDkzNzUgMTE4LjY1MjM0Mzc1dC00OS4wMTY2MDE1NiAxMTguMjMwNDY4NzV6TTQ5MC41ODk4NDM3NSAzMjEuMzc3OTI5NjlsODQuMDU4NTkzNzUgODQuMDU4NTkzNzVxOS4wNzAzMTI1IDguMjUyOTI5NjkgOS4wNzAzMTI1IDIwLjU5Mjc3MzQzdC04LjY0ODQzNzUgMjEuMDE0NjQ4NDQtMjEuMDE0NjQ4NDQgOC42NDg0Mzc1LTIwLjU5Mjc3MzQ0LTkuMDcwMzEyNWwtODQuMDU4NTkzNzQtODQuMDU4NTkzNzVxLTkuMDcwMzEyNS04LjI1MjkyOTY5LTkuMDcwMzEyNS0yMC41OTI3NzM0M3Q4LjY0ODQzNzUtMjEuMDE0NjQ4NDQgMjEuMDE0NjQ4NDMtOC42NDg0Mzc1IDIwLjU5Mjc3MzQ0IDkuMDcwMzEyNXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJ0ZXJtaW5hbCIgdW5pY29kZT0iJiM1OTA0NjsiIGQ9Ik00NzcuODY2NjY2NjcgMzg0djAuMTE5NDY2NjcgMC4xMTk0NjY2NmE1MS4wMjkzMzMzMyA1MS4wMjkzMzMzMyAwIDAgMS0xNS42NjcyIDM2Ljg0NjkzMzM0bDAuMDE3MDY2NjYgMC4wMTcwNjY2Ni0zMDcuMiAzMDcuMi0wLjEzNjUzMzMzLTAuMTM2NTMzMzNhNTEuMiA1MS4yIDAgMSAxLTY4Ljc2MTYtNzUuNzkzMDY2NjdsMjY4LjI1Mzg2NjY3LTI2OC4yNTM4NjY2Nkw4Mi42MDI2NjY2NyAxMTIuMzQ5ODY2NjY5OTk5OThsMC4wMTcwNjY2Ni0wLjAxNzA2NjY3YTUxLjIgNTEuMiAwIDAgMSA3Mi4zNzk3MzMzNC03Mi4zNzk3MzMzM2wwLjAxNzA2NjY2LTAuMDE3MDY2NjcgMzA3LjIgMzA3LjItMC4wMTcwNjY2NiAwLjAxNzA2NjY3QTUxLjAyOTMzMzMzIDUxLjAyOTMzMzMzIDAgMCAxIDQ3Ny44NjY2NjY2NyAzODR6IG00MzUuMi0yNTZoLTM5Mi41MzMzMzMzNGE0Mi42NjY2NjY2NyA0Mi42NjY2NjY2NyAwIDAgMS00Mi42NjY2NjY2Ni00Mi42NjY2NjY2N3YtMTcuMDY2NjY2NjZhNDIuNjY2NjY2NjcgNDIuNjY2NjY2NjcgMCAwIDEgNDIuNjY2NjY2NjYtNDIuNjY2NjY2NjdoMzkyLjUzMzMzMzM0YTQyLjY2NjY2NjY3IDQyLjY2NjY2NjY3IDAgMCAxIDQyLjY2NjY2NjY2IDQyLjY2NjY2NjY3djE3LjA2NjY2NjY2YTQyLjY2NjY2NjY3IDQyLjY2NjY2NjY3IDAgMCAxLTQyLjY2NjY2NjY2IDQyLjY2NjY2NjY3eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9InVuZG8iIHVuaWNvZGU9IiYjNTg5NzA7IiBkPSJNMTAzLjI1IDQyOS4yODEyNWwyNzYuMzc1LTI3Ni40Njg3NWMxOC4yODEyNS0xOC4xODc1IDQ5LjUtNS4yNSA0OS41IDIwLjUzMTI1VjMzNy41OTM3NWMxODkuODQzNzUgNy42ODc1IDMyMi41OTM3NS01NS43ODEyNSA0NzAuMjUtMzE3LjE1NjI1IDcuOTY4NzUtMTQuMDYyNSAyOS41MzEyNS03LjQwNjI1IDI4LjY4NzUgOC43MTg3NS0yOC41OTM3NSA1MjAuMDMxMjUtNDI0LjY4NzUgNTM1LjY4NzUtNDk5LjAzMTI1IDUzNHYxNjMuMTI1YzAgMjUuNzgxMjUtMzEuMTI1IDM4LjcxODc1LTQ5LjQwNjI1IDIwLjQzNzVMMTAzLjE1NjI1IDQ3MC4yNWMtMTEuMjUtMTEuMzQzNzUtMTEuMjUtMjkuNjI1IDAuMDkzNzUtNDAuOTY4NzV6IiAgaG9yaXotYWR2LXg9IjEwMjQiIC8+CgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0icGFyYWdyYXBoLXJpZ2h0IiB1bmljb2RlPSImIzU5MjIyOyIgZD0iTTg2NC4yNDkxNDU1MSAxNC44NTkzNzVoLTQxLjE5ODczMDQ4Vjc1My4xNDA2MjVoNDEuMTk4NzMwNDd2LTczOC4yODEyNXogbS00OTguNTA0NjM4NjcgNDAwLjAzOTY3Mjg2aDQxNS4yODMyMDMxM3Y0MS4xOTg3MzA0NmgtMzc0LjA4NDQ3MjY2djIxNC4yMzMzOTg0NGgzNzQuMDg0NDcyNjZ2NDEuMTk4NzMwNDZoLTQxNS4yODMyMDMxM3YtMjk2LjYzMDg1OTM2eiBtLTIwNS45OTM2NTIzNC02MS43OTgwOTU3MnYtMjk2LjYzMDg1OTM2aDYyMS4yNzY4NTU0N3Y0MS4xOTg3MzA0NmgtNTgwLjA3ODEyNXYyMTQuMjMzMzk4NDRoNTgwLjA3ODEyNXY0MS4xOTg3MzA0NmgtNjIxLjI3Njg1NTQ3eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9InBhcmFncmFwaC1sZWZ0IiB1bmljb2RlPSImIzU5MjIzOyIgZD0iTTE1OS43NTA4NTQ0OSA3NTMuMTQwNjI1aDQxLjE5ODczMDQ4di03MzguMjgxMjVoLTQxLjE5ODczMDQ3Vjc1My4xNDA2MjV6IG00OTguNTA0NjM4NjctNDEuNjEwNzE3NzhoLTQxNS4yODMyMDMxM3YtNDEuMTk4NzMwNDdoMzc0LjA4NDQ3MjY2di0yMTQuMjMzMzk4NDJoLTM3NC4wODQ0NzI2NnYtNDEuMTk4NzMwNDhoNDE1LjI4MzIwMzEzdjI5Ni42MzA4NTkzOHogbS00MTUuMjgzMjAzMTMtMzU4LjQyODk1NTA3di00MS4xOTg3MzA0OGg1ODAuMDc4MTI1di0yMTQuMjMzMzk4NDJoLTU4MC4wNzgxMjV2LTQxLjE5ODczMDQ4aDYyMS4yNzY4NTU0N3YyOTYuNjMwODU5MzhoLTYyMS4yNzY4NTU0N3oiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJwYXJhZ3JhcGgtY2VudGVyIiB1bmljb2RlPSImIzU4ODgwOyIgZD0iTTUxMiAxNDkuNjI1MzY2MjIwMDAwMDVoNDYuODc1MDkxNTZ2LTE0MC42MjUyNzQ2Nkg1MTJ6IG0wIDI4MS4yNDk3MjUzNGg0Ni44NzUwOTE1NnYtMTQwLjYyNTI3NDY2SDUxMnogbTAgMzI4LjEyNDgxNjg4aDQ2Ljg3NTA5MTU2di0xNDAuNjI1Mjc0NjZINTEyek0xODMuODc1MTgzMSAzMzcuMTI0OTA4NDRIODg2Ljk5OTA4NDQ3di0yMzQuMzc0NjMzNzhIMTgzLjg3NTE4MzFWMzM3LjEyNDA4NDQ3OTk5OTk2eiBtNDYuODc1MDkxNTYtMTg3LjQ5OTU0MjIzaDYwOS4zNzQ1NDIyNFYyOTAuMjQ5ODE2OTAwMDAwMDRIMjMwLjc1MDI3NDY2di0xNDAuNjI0NDUwNjh6IG05My43NDkzNTkxMyA1MTUuNjI0MzU5MTNoNDIxLjg3NVY0MzAuODc1OTE1NTJoLTQyMS44NzVWNjY1LjI0OTcyNTMzOTk5OTl6IG00Ni44NzU5MTU1My00Ni44NzUwOTE1NnYtMTQwLjYyNDQ1MDY4aDMyOC4xMjQ4MTY5VjYxOC4zNzQ2MzM3ODAwMDAxSDM3MS4zNzQ3MjUzNHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJoZWFkZXIiIHVuaWNvZGU9IiYjNTkxMDY7IiBkPSJNMzQ0LjQyMzAzOTA5IDQyNS44OTQyNDAwMmgzMzUuMTUzOTIxODJ2MjkzLjI1OTY4MjYyYTQxLjg5NDI0MDAyIDQxLjg5NDI0MDAyIDAgMSAwIDgzLjc4ODQ4MDg2IDB2LTY3MC4zMDc4NDUyOGE0MS44OTQyNDAwMiA0MS44OTQyNDAwMiAwIDAgMC04My43ODg0ODA4NiAwdjI5My4yNTk2ODI2MmgtMzM1LjE1MzkyMTgydi0yOTMuMjU5NjgyNjJhNDEuODk0MjQwMDIgNDEuODk0MjQwMDIgMCAwIDAtODMuNzg4NDgwODYgMHY2NzAuMzA3ODQ1MjhhNDEuODk0MjQwMDIgNDEuODk0MjQwMDIgMCAwIDAgODMuNzg4NDgwODYgMHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJ1bmRlcmxpbmUiIHVuaWNvZGU9IiYjNTg5MjA7IiBkPSJNMjYxLjUwMzY2NzQ2IDExLjg3ODA5MjQ1MDAwMDA1NHY0OS45NzY1MzQ0N2w1MDAuOTkyNjY1MDggNC41NDU5OTkwMXYtNDkuOTY2NzE1ODVMMjYxLjUwMzY2NzQ2IDExLjg3ODA5MjQ1MDAwMDA1NHpNNzM4LjY4NjI5NDE3IDM5NS4xNzU1Mjg0NXEwLTI1Ni40MTIwMjIzNy0yMzIuNjAxOTgzOTgtMjU2LjQxMjAyMzEtMjIyLjg4MTU5NzExIDAtMjIyLjg4MTU5NzEzIDI0Ny40MjgwMjg4NlY3NTMuNDA2MTQ4MzNoNzguMDU3NjUxN3YtMzYzLjY4OTc0NjU4cTAtMTgxLjQ3NjY3Njk4IDE1Mi4xODc4NzQ1Ny0xODEuNDc2Njc2OTcgMTQ3LjEzMTMwOTg2IDAgMTQ3LjEzMTMwOTg3IDE3NS42MjQ4MDc2OVY3NTMuNDU1MjQwODlINzM4LjY4NjI5NDE3eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9IlBsYXkiIHVuaWNvZGU9IiYjNjAyODA7IiBkPSJNNzY2Ljk5OTk5OTcxIDc1OS4wMDAwMDAyOWgtNTA5Ljk5OTk5OTQyQzE0OS4wMDAwMDAyOSA3NTkuMDAwMDAwMjkgNjIgNjcyIDYyIDU2NHYtMzYwYzAtMTA4IDg3LjAwMDAwMDI5LTE5NS4wMDAwMDAyOSAxOTUuMDAwMDAwMjktMTk1LjAwMDAwMDI5aDUwOS45OTk5OTk0MmMxMDggMCAxOTUuMDAwMDAwMjkgODcuMDAwMDAwMjkgMTk1LjAwMDAwMDI5IDE5NS4wMDAwMDAyOVY1NjRjMCAxMDgtODcuMDAwMDAwMjkgMTk1LjAwMDAwMDI5LTE5NS4wMDAwMDAyOSAxOTUuMDAwMDAwMjl6IG0tODEtMzg3bC0yNzAtMTgwYy0yLjk5OTk5OTcxLTIuOTk5OTk5NzEtNi4wMDAwMDAyOS0yLjk5OTk5OTcxLTktMy4wMDAwMDA1OC0yLjk5OTk5OTcxIDAtNi4wMDAwMDAyOSAwLTUuOTk5OTk5NDIgMy4wMDAwMDA1OC02LjAwMDAwMDI5IDAtOSA2LjAwMDAwMDI5LTkgMTEuOTk5OTk5NzFWNTY0YzAgNi4wMDAwMDAyOSAyLjk5OTk5OTcxIDExLjk5OTk5OTcxIDkgMTEuOTk5OTk5NzFzMTEuOTk5OTk5NzEgMi45OTk5OTk3MSAxNC45OTk5OTk0MiAwbDI3MC0xODBjMi45OTk5OTk3MS0yLjk5OTk5OTcxIDYuMDAwMDAwMjktNi4wMDAwMDAyOSA2LjAwMDAwMDI5LTExLjk5OTk5OTcxcy0yLjk5OTk5OTcxLTktNi4wMDAwMDAyOS0xMS45OTk5OTk3MXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJyZWRvIiB1bmljb2RlPSImIzYwODEwOyIgZD0iTTEwMTcuMTczMzMzIDQ2NS45MmwtNDc3Ljg2NjY2NiAzMDcuMmMtNi44MjY2NjcgMy40MTMzMzMtMTMuNjUzMzMzIDMuNDEzMzMzLTE3LjA2NjY2NyAwLTYuODI2NjY3LTMuNDEzMzMzLTEwLjI0LTYuODI2NjY3LTEwLjI0LTEzLjY1MzMzM3YtMTg3LjczMzMzNEMxNzAuNjY2NjY3IDU2MS40OTMzMzMgMy40MTMzMzMgMjMzLjgxMzMzMjk5OTk5OTk0IDAgOC41MzMzMzI5OTk5OTk5N3YtMy40MTMzMzNjMC02LjgyNjY2NyA2LjgyNjY2Ny0xMy42NTMzMzMgMTcuMDY2NjY3LTEzLjY1MzMzM3MxNy4wNjY2NjcgNi44MjY2NjcgMTcuMDY2NjY2IDE3LjA2NjY2NmMzLjQxMzMzMyA1MS4yIDIyOC42OTMzMzMgMjc5Ljg5MzMzMyA0NzcuODY2NjY3IDI5MC4xMzMzMzRWMTEwLjkzMzMzMjk5OTk5OTk1YzAtNi44MjY2NjcgMy40MTMzMzMtMTMuNjUzMzMzIDEwLjI0LTEzLjY1MzMzMyA2LjgyNjY2Ny0zLjQxMzMzMyAxMy42NTMzMzMtMy40MTMzMzMgMTcuMDY2NjY3IDBsNDc3Ljg2NjY2NiAzNDEuMzMzMzMzYzMuNDEzMzMzIDMuNDEzMzMzIDYuODI2NjY3IDEwLjI0IDYuODI2NjY3IDEzLjY1MzMzNHMtMy40MTMzMzMgMTAuMjQtNi44MjY2NjcgMTMuNjUzMzMzeiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9InBlbmNpbDIiIHVuaWNvZGU9IiYjNTg5NjI7IiBkPSJNMTUyIDk4LjI1bDc0Ljk5OTk5OTcxLTc0Ljk5OTk5OTcxSDE1MnpNMzc3IDguMjVIMTUyYTE1LjAwMDAwMDI5IDE1LjAwMDAwMDI5IDAgMCAwLTE1LjAwMDAwMDI5IDE1LjAwMDAwMDI5djIyNSAwLjA1OTk5OTQyIDAuMDQ1IDAuMDMwMDAwNTggMC4wMTQ5OTk0MiAwLjA0NSAwLjA0NWExNC45NCAxNC45NCAwIDAgMCA0LjM2NSAxMC4zMzUwMDA1OGwwLjAzMDAwMDU4IDAuMDI5OTk5NzEgNDEyLjQ5OTk5OTcxIDQxMi40OTk5OTk3MSA2NC41NTk5OTk3MSA2My44MWMwLjM3NTAwMDI5IDAuMzc1MDAwMjkgMC43ODAwMDAyOSAwLjcyIDEuMjAwMDAwNTggMS4wNjUwMDA1OCAzNy40Njk5OTk3MSAyOS44NTAwMDAyOSA3Ny4zNTUgMjkuODY0OTk5NzEgMTE1LjM0OTk5OTQyIDAuMDU5OTk5NDJhMTIuNjc0OTk5NzEgMTIuNjc0OTk5NzEgMCAwIDAgMS4zNS0xLjE5OTk5OTcxbDEyOC4yNS0xMjguMjVhMTQuOTEwMDAwMjkgMTQuOTEwMDAwMjkgMCAwIDAgMS4yMTUtMS4zNjUwMDAyOWMyOS4yNjUwMDAyOS0zNy40NTUwMDAyOSAyOS4wMDk5OTk3MS03Ny4yOTQ5OTk3MS0wLjc2NS0xMTUuMjQ1YTE0LjgwNSAxNC44MDUgMCAwIDAtMS4xOTk5OTk3MS0xLjM1bC00NzYuMjUwMDAwMjktNDc2LjI0OTk5OTQyYTE0Ljk2OTk5OTcxIDE0Ljk2OTk5OTcxIDAgMCAwLTEwLjM2NDk5OTQyLTQuMzk1MDAwNThoLTAuMTY1MDAwNThMMzc3IDguMjV6IG0tMTQzLjc5MDAwMDI5IDI5Ljk5OTk5OTcxaDEwNy41ODAwMDA1OEwxNjcuMDAwMDAwMjkgMjEyLjAzOTk5OTcwOTk5OTk2di0xMDcuNTc5OTk5NzFsNjYuMjA5OTk5NDItNjYuMjEwMDAwMjl6TTE2Ny4wMDAwMDAyOSAzOC4yNDk5OTk3MWgyMy43ODk5OTk3MUwxNjcuMDAwMDAwMjkgNjIuMDQwMDAwMjg5OTk5OTY2di0yMy43OTAwMDA1OHogbTE1Ni45NiA1OS4yNTAwMDA1OEwzNzcgNDQuNDU5OTk5NzEwMDAwMDM0bDQ2NC45ODUgNDY0Ljk4NWMyMC40MyAyNi40NiAyMC42NzAwMDAyOSA1MC45MjQ5OTk3MSAwLjczNTAwMDI5IDc2Ljg2bC0xMjYuOTE1MDAwMjkgMTI2LjkzMDAwMDU4Yy0yNi40NiAyMC40MDAwMDAyOS01MC45MjQ5OTk3MSAyMC4zODUtNzYuODQ0OTk5NzEgMC4wMTQ5OTk0MmwtNjMuOTE1MDAwMjktNjMuMTY0OTk5NzFMMTczLjIxMDAwMDI5IDI0OC4yNTAwMDAyOSAyMjYuOTk5OTk5NzEgMTk0LjQ2MDAwMDAwMDAwMDA0bDQwMS44OTUgNDAxLjg5NWExNC45ODUgMTQuOTg1IDAgMSAwIDIxLjIxMDAwMDI5LTIxLjIxMDAwMDI5TDI0OC4yMSAxNzMuMjQ5OTk5NzFsNTQuNTQtNTQuNTQgNDAxLjg5NSA0MDEuODgwMDAwNThhMTQuOTg1IDE0Ljk4NSAwIDEgMCAyMS4yMTAwMDAyOS0yMS4yMTAwMDAyOUwzMjMuOTYwMDAwMjkgOTcuNTAwMDAwMjl6TTU4NS43MSA2ODEuOTc0OTk5NzFsMjI1LTIyNS00Mi40MzUtNDIuNDE5OTk5NzEtMjI1IDIyNXoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJ0ZXh0LWhlaWdoIiB1bmljb2RlPSImIzU4OTE1OyIgZD0iTTYyIDMwOS4wMDAwMDAyOWgxNTAuMDAwMDAwMjl2LTM3NS4wMDAwMDAyOWg3NC45OTk5OTk3MVYzMDkuMDAwMDAwMjloMTUwLjAwMDAwMDI5VjM4NEg2MnYtNzQuOTk5OTk5NzF6TTIxMC41IDgzNHYtMTUwLjAwMDAwMDI5SDU4Ni45OTk5OTk3MXYtNzQ5Ljk5OTk5OTcxaDE1MC4wMDAwMDAyOVY2ODMuOTk5OTk5NzFoMzcyLjc1MDAwMDI5VjgzNEgyMTAuNXoiICBob3Jpei1hZHYteD0iMTE5MiIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJzdHJpa2V0aHJvdWdoIiB1bmljb2RlPSImIzU5Njc4OyIgZD0iTTk0NS45Mjg1NzE2OCAzODRxNy4wMzEyNTAwMSAwIDExLjU1MTMzOTE2LTQuNTIwMDg5MTZ0NC41MjAwODkxNi0xMS41NTEzMzkxNnYtMzIuMTQyODU3NTFxMC03LjAzMTI1MDAxLTQuNTIwMDg5MTYtMTEuNTUxMzM5MTd0LTExLjU1MTMzOTE2LTQuNTIwMDg5MTdINzguMDcxNDI4MzJxLTcuMDMxMjUwMDEgMC0xMS41NTEzMzkxNiA0LjUyMDA4OTE3dC00LjUyMDA4OTE2IDExLjU1MTMzOTE1djMyLjE0Mjg1NzUzcTAgNy4wMzEyNTAwMSA0LjUyMDA4OTE2IDExLjU1MTMzOTE2dDExLjU1MTMzOTE2IDQuNTIwMDg5MTZoODY3Ljg1NzE0MzM1ek0zMDQuNTc4MTI1IDQxNi4xNDI4NTc1MXEtMTQuMDYyNSAxNy41NzgxMjUtMjUuNjEzODM5MTcgNDAuMTc4NTcwODEtMjQuMTA3MTQyNDkgNDguNzE2NTE3NDgtMjQuMTA3MTQzMzYgOTQuNDE5NjQzMzYgMCA5MC45MDQwMTc0OCA2Ny4yOTkxMDc1NCAxNTUuMTg5NzMxNjQgNjYuNzk2ODc1IDYzLjc4MzQ4MjUyIDE5Ny4zNzcyMzI1MSA2My43ODM0ODI1MyAyNS4xMTE2MDc1MiAwIDgzLjg3Mjc2NzQ5LTkuNTQyNDEwODUgMzMuMTQ3MzIxNjctNi4wMjY3ODU4MyA4OC44OTUwODkxNS0yNC4xMDcxNDI0OCA1LjAyMjMyMTY3LTE5LjA4NDgyMTY5IDEwLjU0Njg3NTAxLTU5LjI2MzM5MzM2IDcuMDMxMjUwMDEtNjEuNzc0NTUzMzIgNy4wMzEyNDk5OS05MS45MDg0ODE2NSAwLTkuMDQwMTc4MzMtMi41MTExNjA4NC0yMi42MDA0NDY2N2wtNi4wMjY3ODU4NC0xLjUwNjY5NjY5LTQyLjE4NzUgMy4wMTMzOTMzNy03LjAzMTI1IDEuMDA0NDY0MTZxLTI1LjExMTYwNzUyIDc0LjgzMjU4OTE2LTUxLjcyOTkwOTk1IDEwMi45NTc1ODkxNi00NC4xOTY0MjgzMiA0NS43MDMxMjUtMTA1LjQ2ODc1MDAxIDQ1LjcwMzEyNDk5LTU3LjI1NDQ2NDE2IDAtOTEuNDA2MjQ5OTktMjkuNjMxNjk2NjctMzMuNjQ5NTUzMzItMjkuMTI5NDY0MTYtMzMuNjQ5NTU0MjEtNzMuMzI1ODkyNDggMC0zNi42NjI5NDY2OCAzMy4xNDczMjE2OC03MC4zMTI1dDE0MC4xMjI3Njc0OC02NC43ODc5NDY2OXEzNC42NTQwMTc0OC0xMC4wNDQ2NDI0OSA4Ni44ODYxNjA4NC0zMy4xNDczMjE2NyAyOS4xMjk0NjQxNi0xNC4wNjI1IDQ3LjcxMjA1NDItMjYuMTE2MDcwODFIMzA0LjU3ODEyNXogbTI1NC42MzE2OTY2OS0xMjguNTcxNDI5MTloMjA2LjQxNzQxMDgzcTMuNTE1NjI1LTE5LjU4NzA1MzMyIDMuNTE1NjI0OTktNDYuMjA1MzU2NjQgMC01NS43NDc3Njc0OC0yMC41OTE1MTgzNS0xMDYuNDczMjE0MTUtMTEuNTUxMzM5MTYtMjcuNjIyNzY3NDgtMzUuNjU4NDgxNjUtNTIuMjMyMTQzMzgtMTguNTgyNTg5MTYtMTcuNTc4MTI1LTU0Ljc0MzMwNDE5LTQwLjY4MDgwMzMxLTQwLjE3ODU3MTY4LTI0LjEwNzE0MjQ5LTc2Ljg0MTUxNzQ4LTMzLjE0NzMyMTY4LTQwLjE3ODU3MTY4LTEwLjU0Njg3NS0xMDEuOTUzMTI1LTEwLjU0Njg3NTAxLTU3LjI1NDQ2NDE2IDAtOTcuOTM1MjY4MzUgMTEuNTUxMzM5MTdsLTcwLjMxMjUgMjAuMDg5Mjg1ODRxLTI4LjYyNzIzMjUyIDguMDM1NzE0MTUtMzYuMTYwNzE0MTcgMTQuMDYyNS00LjAxNzg1NzUxIDQuMDE3ODU3NTEtNC4wMTc4NTY2NSAxMS4wNDkxMDc1MnY2LjUyOTAxNzQ4cTAgNTQuMjQxMDcxNjgtMS4wMDQ0NjQxNSA3OC4zNDgyMTQxNS0wLjUwMjIzMjUyIDE1LjA2Njk2NDE2IDAgMzQuMTUxNzg1ODVsMS4wMDQ0NjQxNSAxOC41ODI1ODkxNnYyMi4wOTgyMTQxNmw1MS4yMjc2NzgzNCAxLjAwNDQ2NTA0cTcuNTMzNDgyNTItMTcuMDc1ODkyNDggMTUuMDY2OTY0MTYtMzUuNjU4NDgyNTF0MTEuMzAwMjIzMzMtMjguMTI1IDYuMjc3OTAxNjYtMTMuNTYwMjY3NDlxMTcuNTc4MTI1LTI4LjYyNzIzMjUyIDQwLjE3ODU3MTY4LTQ3LjIwOTgyMTY4IDIxLjU5NTk4MjUyLTE4LjA4MDM1NzUxIDUyLjczNDM3NTAxLTI4LjYyNzIzMjUyIDI5LjYzMTY5NjY4LTExLjA0OTEwNzUyIDY2LjI5NDY0MjQ3LTExLjA0OTEwNjYzIDMyLjE0Mjg1NzUxIDAgNjkuODEwMjY4MzYgMTMuNTYwMjY3NDcgMzguNjcxODc1IDEzLjA1ODAzNTg0IDYxLjI3MjMyMDggNDMuMTkxOTY0MTYgMjMuNjA0OTEwODQgMzAuNjM2MTYwODQgMjMuNjA0OTEwODQgNjQuNzg3OTQ2NjggMCA0Mi4xODc1LTQwLjY4MDgwMzMyIDc4Ljg1MDQ0NjY4LTE3LjA3NTg5MjQ4IDE0LjU2NDczMjUyLTY4LjgwNTgwMzMxIDM1LjY1ODQ4MTY0eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9ImJvbGQiIHVuaWNvZGU9IiYjNTkwNDE7IiBkPSJNNTk3LjMzMzMzMyAzNDEuMzMzMzMzMDAwMDAwMDRIMjU2Yy0yNS42IDAtNDIuNjY2NjY3IDE3LjA2NjY2Ny00Mi42NjY2NjcgNDIuNjY2NjY3VjcyNS4zMzMzMzNjMCAyNS42IDE3LjA2NjY2NyA0Mi42NjY2NjcgNDIuNjY2NjY3IDQyLjY2NjY2N2gzNDEuMzMzMzMzYzExOS40NjY2NjcgMCAyMTMuMzMzMzMzLTkzLjg2NjY2NyAyMTMuMzMzMzM0LTIxMy4zMzMzMzNzLTkzLjg2NjY2Ny0yMTMuMzMzMzMzLTIxMy4zMzMzMzQtMjEzLjMzMzMzNHogbS0yOTguNjY2NjY2IDg1LjMzMzMzNGgyOTguNjY2NjY2YzcyLjUzMzMzMyAwIDEyOCA1NS40NjY2NjcgMTI4IDEyOHMtNTUuNDY2NjY3IDEyOC0xMjggMTI4SDI5OC42NjY2Njd2LTI1NnpNNjQwIDBIMjU2Yy0yNS42IDAtNDIuNjY2NjY3IDE3LjA2NjY2Ny00Mi42NjY2NjcgNDIuNjY2NjY3djM0MS4zMzMzMzNjMCAyNS42IDE3LjA2NjY2NyA0Mi42NjY2NjcgNDIuNjY2NjY3IDQyLjY2NjY2N2gzODRjMTE5LjQ2NjY2NyAwIDIxMy4zMzMzMzMtOTMuODY2NjY3IDIxMy4zMzMzMzMtMjEzLjMzMzMzNHMtOTMuODY2NjY3LTIxMy4zMzMzMzMtMjEzLjMzMzMzMy0yMTMuMzMzMzMzeiBtLTM0MS4zMzMzMzMgODUuMzMzMzMzaDM0MS4zMzMzMzNjNzIuNTMzMzMzIDAgMTI4IDU1LjQ2NjY2NyAxMjggMTI4cy01NS40NjY2NjcgMTI4LTEyOCAxMjhIMjk4LjY2NjY2N3YtMjU2eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9ImxpbmUtaGVpZ2h0IiB1bmljb2RlPSImIzU5MTkwOyIgZD0iTTQ2OS4zMzMzMzMgNzI1LjMzMzMzM2g0MjYuNjY2NjY3di04NS4zMzMzMzNINDY5LjMzMzMzM1Y3MjUuMzMzMzMzek0yNTYgNTk3LjMzMzMzM3YtMTcwLjY2NjY2NkgxNzAuNjY2NjY3VjU5Ny4zMzMzMzNINDIuNjY2NjY3bDE3MC42NjY2NjYgMTcwLjY2NjY2NyAxNzAuNjY2NjY3LTE3MC42NjY2NjdIMjU2eiBtMC00MjYuNjY2NjY2aDEyOGwtMTcwLjY2NjY2Ny0xNzAuNjY2NjY3LTE3MC42NjY2NjYgMTcwLjY2NjY2N2gxMjh2MTcwLjY2NjY2Nmg4NS4zMzMzMzN2LTE3MC42NjY2NjZ6IG0yMTMuMzMzMzMzLTQyLjY2NjY2N2g0MjYuNjY2NjY3di04NS4zMzMzMzNINDY5LjMzMzMzM3Y4NS4zMzMzMzN6IG0tODUuMzMzMzMzIDI5OC42NjY2NjdoNTEydi04NS4zMzMzMzRIMzg0djg1LjMzMzMzNHoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJzb3VuZC1jb2RlIiB1bmljb2RlPSImIzU4ODk0OyIgZD0iTTg3OS42MzI3NTE0NiA0MzcuMjI4NzU5NzdMNzE2LjkxNDI0NTYgNTk5Ljk0NzI2NTYzbC01NC4yMzQwMDg3OC01NC4yNDIyNDg1NCAxNjIuNzEwMjY2MTEtMTYyLjcxMDI2NjExTDY2Mi42ODAyMzY4MiAyMjAuMjc2MjQ1MTFsNTQuMjM0MDA4NzgtNTQuMjM0MDA4NzggMTYyLjcxODUwNTg2IDE2Mi43MTAyNjYxMSA1NC4yNDIyNDg1NCA1NC4yNDIyNDg1M3pNMzA3LjA3NzUxNDY0IDU5OS45NDcyNjU2M0wxNDQuMzU5MDA4NzggNDM3LjIyODc1OTc3IDkwLjEyNSAzODIuOTk0NzUwOTcwMDAwMDRsNTQuMjM0MDA4NzktNTQuMjQyMjQ4NTNMMzA3LjA3NzUxNDY0IDE2Ni4wNDIyMzYzMzAwMDAwNGw1NC4yMzQwMDg4IDU0LjIzNDAwODc5LTE2Mi43MTAyNjYxMiAxNjIuNzE4NTA1ODUgMTYyLjcxMDI2NjEyIDE2Mi43MTAyNjYxMnpNMzcyLjk1MTgxMjc0IDIzLjUyNTExNTk3TDU3Ny4wNjEwMzUxNiA3NjIuODcxNzY1MTNsNzMuOTI3MDAxOTUtMjAuNDA4MjAzMTItMjA0LjEwOTIyMjQyLTczOS4zNDgyOTcxMnoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJpdGFsaWMiIHVuaWNvZGU9IiYjNTg4OTU7IiBkPSJNNzMyLjU4NjI0MjY4IDY5OC45ODA3NzM5Mjk5OTk5Vjc2OS40ODAwNDE1MUg1MjEuMDg4NDM5OTR2LTcwLjQ5OTI2NzU4aDU4LjM2MjEyMTU4TDM4OS4xMzcxNDU5OSA2NS40NDMxNzYyNjk5OTk5OGgtNzkuNTQ2NTA4Nzh2LTcwLjQ5OTI2NzU4aDIxMS40OTc4MDI3M3Y3MC40OTkyNjc1OEg0NjIuNzI2MzE4MzZsMTkwLjMyMTY1NTI4IDYzMy41Mzc1OTc2NnoiICBob3Jpei1hZHYteD0iMTAyNCIgLz4KCiAgICAKCgogIDwvZm9udD4KPC9kZWZzPjwvc3ZnPgo=) format(\\'svg\\');  /* iOS 4.1- */}.w-e-icon {  font-family: \"w-e-icon\" !important;  font-size: 18px;  font-style: normal;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.w-e-icon-font:before {  content: \"\\\\e7a0\";}.w-e-icon-happy:before {  content: \"\\\\e7a8\";}.w-e-icon-image:before {  content: \"\\\\e7bc\";}.w-e-icon-listnumbered:before {  content: \"\\\\e7ee\";}.w-e-icon-paint-brush:before {  content: \"\\\\e653\";}.w-e-icon-quotesleft:before {  content: \"\\\\e81b\";}.w-e-icon-table2:before {  content: \"\\\\e87e\";}.w-e-icon-iframe:before {  content: \"\\\\e74c\";}.w-e-icon-list2:before {  content: \"\\\\e601\";}.w-e-icon-format:before {  content: \"\\\\e65b\";}.w-e-icon-link:before {  content: \"\\\\e632\";}.w-e-icon-terminal:before {  content: \"\\\\e6a6\";}.w-e-icon-undo:before {  content: \"\\\\e65a\";}.w-e-icon-paragraph-right:before {  content: \"\\\\e756\";}.w-e-icon-paragraph-left:before {  content: \"\\\\e757\";}.w-e-icon-paragraph-center:before {  content: \"\\\\e600\";}.w-e-icon-header:before {  content: \"\\\\e6e2\";}.w-e-icon-underline:before {  content: \"\\\\e628\";}.w-e-icon-Play:before {  content: \"\\\\eb78\";}.w-e-icon-redo:before {  content: \"\\\\ed8a\";}.w-e-icon-pencil2:before {  content: \"\\\\e652\";}.w-e-icon-text-heigh:before {  content: \"\\\\e623\";}.w-e-icon-strikethrough:before {  content: \"\\\\e91e\";}.w-e-icon-bold:before {  content: \"\\\\e6a1\";}.w-e-icon-line-height:before {  content: \"\\\\e736\";}.w-e-icon-sound-code:before {  content: \"\\\\e60e\";}.w-e-icon-italic:before {  content: \"\\\\e60f\";}.w-e-toolbar {  display: -ms-flexbox;  display: flex;  padding: 0 5px;  /* flex-wrap: wrap; */  /* åä¸ªèå */}.w-e-toolbar .w-e-menu {  position: relative;  text-align: center;  padding: 5px 10px;  cursor: pointer;}.w-e-toolbar .w-e-menu i {  color: #999;}.w-e-toolbar .w-e-menu:hover i {  color: #333;}.w-e-toolbar .w-e-active i {  color: #1e88e5;}.w-e-toolbar .w-e-active:hover i {  color: #1e88e5;}.w-e-text-container .w-e-panel-container {  position: absolute;  top: 0;  left: 50%;  border: 1px solid #ccc;  border-top: 0;  box-shadow: 1px 1px 2px #ccc;  color: #333;  background-color: #fff;  /* ä¸º emotion panel å®å¶çæ ·å¼ */  /* ä¸ä¼ å¾çç panel å®å¶æ ·å¼ */}.w-e-text-container .w-e-panel-container .w-e-panel-close {  position: absolute;  right: 0;  top: 0;  padding: 5px;  margin: 2px 5px 0 0;  cursor: pointer;  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-close:hover {  color: #333;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title {  list-style: none;  display: -ms-flexbox;  display: flex;  font-size: 14px;  margin: 2px 10px 0 10px;  border-bottom: 1px solid #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-item {  padding: 3px 5px;  color: #999;  cursor: pointer;  margin: 0 3px;  position: relative;  top: 1px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-active {  color: #333;  border-bottom: 1px solid #333;  cursor: default;  font-weight: 700;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content {  padding: 10px 15px 10px 15px;  font-size: 16px;  /* è¾å¥æ¡çæ ·å¼ */  /* æé®çæ ·å¼ */}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content button:focus {  outline: none;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea {  width: 100%;  border: 1px solid #ccc;  padding: 5px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus {  border-color: #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text] {  border: none;  border-bottom: 1px solid #ccc;  font-size: 14px;  height: 20px;  color: #333;  text-align: left;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].small {  width: 30px;  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].block {  display: block;  width: 100%;  margin: 10px 0;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text]:focus {  border-bottom: 2px solid #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button {  font-size: 14px;  color: #1e88e5;  border: none;  padding: 5px 10px;  background-color: #fff;  cursor: pointer;  border-radius: 3px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.left {  float: left;  margin-right: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.right {  float: right;  margin-left: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.gray {  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.red {  color: #c24f4a;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button:hover {  background-color: #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container:after {  content: \"\";  display: table;  clear: both;}.w-e-text-container .w-e-panel-container .w-e-emoticon-container .w-e-item {  cursor: pointer;  font-size: 18px;  padding: 0 3px;  display: inline-block;  *display: inline;  *zoom: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container {  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn {  display: inline-block;  *display: inline;  *zoom: 1;  color: #999;  cursor: pointer;  font-size: 60px;  line-height: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn:hover {  color: #333;}.w-e-text-container {  position: relative;}.w-e-text-container .w-e-progress {  position: absolute;  background-color: #1e88e5;  bottom: 0;  left: 0;  height: 1px;}.w-e-text {  padding: 10px;  overflow-y: scroll;}.w-e-text p,.w-e-text h1,.w-e-text h2,.w-e-text h3,.w-e-text h4,.w-e-text h5,.w-e-text table,.w-e-text pre {  line-height: 1.5;}.w-e-text ul,.w-e-text ol {  margin: 10px 0 10px 20px;}.w-e-text blockquote {  display: block;  border-left: 8px solid #d0e5f2;  padding: 5px 10px;  margin: 10px 0;  line-height: 1.4;  font-size: 100%;  background-color: #f1f1f1;}.w-e-text code {  display: inline-block;  *display: inline;  *zoom: 1;  background-color: #f1f1f1;  border-radius: 3px;  padding: 3px 5px;  margin: 0 3px;}.w-e-text pre code {  display: block;}.w-e-text table {  border-top: 1px solid #ccc;  border-left: 1px solid #ccc;}.w-e-text table td,.w-e-text table th {  border-bottom: 1px solid #ccc;  border-right: 1px solid #ccc;  padding: 3px 5px;}.w-e-text table th {  border-bottom: 2px solid #ccc;  text-align: center;}.w-e-text:focus {  outline: none;}.w-e-text img {  cursor: pointer;}.w-e-text img:hover {  box-shadow: 0 0 5px #333;}';\n\n// å° css ä»£ç æ·»å å° <style> ä¸­\nvar style = document.createElement('style');\nstyle.type = 'text/css';\nstyle.innerHTML = inlinecss;\ndocument.getElementsByTagName('HEAD').item(0).appendChild(style);\n\n// è¿å\nvar index = window.wangEditor || Editor;\n\nreturn index;\n\n})));\n"]}